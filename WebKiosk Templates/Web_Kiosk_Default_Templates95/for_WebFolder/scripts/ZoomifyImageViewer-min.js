(function(){var e=function(){return this}.call();e.Z={}})(),Z.showImage=function(e,t,n){Z.Utils.z202(),Z.Utils.z201(),Z.Utils.z200(),Z.Utils.z258(),Z.z361=e,Z.imagePath=Z.Utils.z392(t),Z.parameters=Z.Utils.z368(n),Z.Utils.addEventListener(document,"DOMContentLoaded",Z.initialize),Z.Utils.addEventListener(window,"load",Z.initialize)},Z.initialize=function(){arguments.callee.done||(arguments.callee.done=!0,Z.Utils.z259(),Z.Utils.z399(Z.parameters),Z.Viewer=new Z.ZoomifyImageViewer,Z.Utils.isStrVal(Z.z245)?Z.Utils.z275():Z.Viewer.z229(),Z.debug!=0&&Z.Utils.trace(Z.Utils.z285("z122")))},Z.ZoomifyImageViewer=function(){Z.ViewerDisplay=Z.Utils.z248("div","ViewerDisplay","inline-block","relative","hidden","100%","100%","0px","0px","none","0px","transparent none","0px","0px","normal","pointer"),Z.pageContainer=document.getElementById(Z.z361);var e=Z.Utils.getElementStyle(Z.pageContainer);Z.viewerW=parseFloat(e.width),Z.viewerH=parseFloat(e.height),isNaN(Z.viewerW)&&(Z.viewerW=Z.ViewerDisplay.clientWidth),isNaN(Z.viewerH)&&(Z.viewerH=Z.ViewerDisplay.clientHeight),Z.pageContainer.innerHTML="",Z.pageContainer.appendChild(Z.ViewerDisplay),this.z229=function(){Z.Viewport=new Z.ZoomifyViewport},this.z227=function(){Z.toolbarVisible>0&&(Z.Toolbar=new Z.ZoomifyToolbar(Z.Viewport)),Z.navigatorVisible>0&&(Z.Navigator=new Z.ZoomifyNavigator(Z.Viewport)),Z.Navigator&&Z.Navigator.z432()},this.setSizeAndPosition=function(e,t,n,r,i){Z.viewerW=e,Z.viewerH=t,Z.ViewerDisplay.style.width=e+"px",Z.ViewerDisplay.style.height=t+"px",Z.Viewport&&Z.Viewport.z284()&&Z.Viewport.setSizeAndPosition(e,t,n,r);var s=Z.toolbarPosition==1?t-Z.toolbarH:0;Z.ToolbarDisplay&&Z.Toolbar.z284()&&(Z.Toolbar.setSizeAndPosition(e,null,null,s),Z.toolbarVisible>1&&Z.Toolbar.show(!0)),Z.NavigatorDisplay&&Z.Navigator.z284()&&(Z.Navigator.setSizeAndPosition(null,null,n,r,Z.navigatorFit),Z.navigatorVisible>1&&Z.Navigator.setVisibility(!0)),i&&Z.Viewport.updateView(!0)},this.setImagePath=function(e,t){if(Z.Viewport&&Z.Viewport.z284()){Z.Viewport.z448(!0),Z.imagePath=Z.Utils.z392(e);if(t==null){var n=new Z.NetConnector;Z.Viewport.loadImageProperties(n)}else{var r=Z.Utils.z241(t);Z.Viewport.z366(r)}}},this.setHotspotPath=function(e){Z.Viewport&&Z.Viewport.z284()&&Z.Viewport.setHotspotPath(e)}},Z.ZoomifyViewport=function(){function e(e,t,n,r,s,o,u){Z.imageW=e,Z.imageH=t,Un=s,zn=o,Wn=u,Vn=r,Jn=n,c(),d(),Fr=H(Pr,Z.initialZ),Br=H(Dr,Z.initialZ),jr=Br,Z.useCanvas&&fr.scale(Br,Br),vr&&ft(),yr&&vt(),v(),hn(Z.initialX,Z.initialY,Z.initialZ),Z.fullPageInitial&&qn.toggleFullPageView(!0),Sn(),i(!0),Z.Viewer.z227()}function t(e,t,r,s,u,a,f){i(!1),n(),Z.imageW=e,Z.imageH=t,Un=u,zn=a,Wn=f,Vn=s,Jn=r,c(),d(),Fr=H(Pr,Z.initialZ),Br=H(Dr,Z.initialZ),jr=Br,Z.useCanvas&&(fr.restore(),fr.scale(Br,Br)),rr&&N(rr),ur&&N(ur),cr&&N(cr),vr&&N(vr),yr&&N(yr),Nr&&N(Nr),Ar&&N(Ar),vr&&ft(),yr&&vt(),v(),o(li,ci,hi,pi),hn(Z.initialX,Z.initialY,Z.initialZ),i(!0),Z.navigatorVisible>0&&Z.Navigator.setImagePath(Z.imagePath)}function n(){_r=1,Dr=0,Pr=0,Ir=[],qr=[],Rr=[],Ur=[],zr=[],Wr=[],Xr=[],Vr=[],$r=[],Jr=[],Kr=[],Qr=[],Gr=[],Yr=[],Zr=[],ei=[],ti=[],ni=0,vr&&(as=[],fs=[]),yr&&(ls=[],cs=[],Ms!=null?Bs=[]:(Xs=[],Js=[],Ks=[],Vs=[],$s=[]))}function r(){return Rn}function i(e){Rn=e}function s(){Zn=Z.Utils.z248("div","viewportContainer","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Z.ViewerDisplay.appendChild(Zn),er=Zn,tr=er.style,nr=Z.Utils.z248(Z.useCanvas?"canvas":"div","viewportBackfillDisplay","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Zn.appendChild(nr),rr=nr,ir=rr.style,or=Z.Utils.z248(Z.useCanvas?"canvas":"div","viewportDisplay","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Zn.appendChild(or),ur=or,ar=ur.style,Z.useCanvas&&(lr=Z.Utils.z248("canvas","transitionDisplay","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Zn.appendChild(lr),cr=lr,hr=cr.style),Z.Utils.isStrVal(Z.watermarkPath)&&(dr=Z.Utils.z248("div","watermarkDisplay","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Zn.appendChild(dr),vr=dr,mr=vr.style);if(Z.Utils.isStrVal(Z.hotspotPath)||Z.Utils.isStrVal(Z.annotationPath))Z.Utils.isStrVal(Z.annotationPath)&&Z.useCanvas&&(Tr=Z.Utils.z248("canvas","drawingDisplay","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Zn.appendChild(Tr),Nr=Tr,Cr=Nr.style,Z.editMode&&(Lr=Z.Utils.z248("canvas","editingDisplay","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Zn.appendChild(Lr),Ar=Lr,Or=Ar.style)),gr=Z.Utils.z248("div","hotspotDisplay","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Zn.appendChild(gr),yr=gr,br=yr.style;Z.useCanvas?(sr=rr.getContext("2d"),fr=ur.getContext("2d"),pr=cr.getContext("2d")):(rr.innerHTML="",ur.innerHTML=""),vr&&(vr.innerHTML=""),yr&&(yr.innerHTML=""),Nr&&(kr=Nr.getContext("2d")),Ar&&(Mr=Ar.getContext("2d"))}function o(e,t,n,r){if(typeof n=="undefined"||n===null)n=0;if(typeof r=="undefined"||r===null)r=0;li=e,ci=t,di=li*fi,vi=ci*fi,mi=di/2,gi=vi/2,yi=-((di-li)/2)+n,bi=(di-li)/2+n,wi=-((vi-ci)/2)+r,Ei=(vi-ci)/2+r,er.width=di,er.height=vi,tr.width=di+"px",tr.height=vi+"px",tr.left=yi+"px",tr.top=wi+"px",ur.width=di,ur.height=vi,vr&&(vr.width=di,vr.height=vi,mr.width=di+"px",mr.height=vi+"px");if(yr){yr.width=di,yr.height=vi,br.width=di+"px",br.height=vi+"px";if(wr){var i=parseInt(Z.Utils.z285("z69"),10),s=Dt(_s,i,li,ci);Er.left=s.x+"px",Er.top=s.y+"px"}}Nr&&(Nr.width=di,Nr.height=vi,Cr.width=di+"px",Cr.height=vi+"px"),Ar&&(Ar.width=di,Ar.height=vi,Or.width=di+"px",Or.height=vi+"px");if(Sr){var o=parseInt(Z.Utils.z285("z29"),10),u=parseInt(Z.Utils.z285("z27"),10),a=qt(Fs,o,u,li,ci);xr.left=a.x+"px",xr.top=a.y+"px"}Z.useCanvas&&(fr.translate(mi,gi),fr.save(),Nr&&(kr.translate(mi,gi),kr.save()),Ar&&(Mr.translate(mi,gi),Mr.save()))}function u(e){if(Z.tileSource=="ZoomifyImageFolder"){var t=Z.Utils.z215(Z.imagePath+"/"+"ImageProperties.xml");e.loadXML(t)}else Z.tileSource=="ZoomifyImageFile"?f(e):Z.tileSource=="OtherTileSource"&&l(e)}function a(n){if(typeof qn.z284=="undefined")var r=window.setTimeout(function(){a(n)},100);else{var i,s,o,u,f,l,c,h;Z.tileSource=="ZoomifyImageFolder"?(i=parseInt(n.documentElement.getAttribute("WIDTH"),10),s=parseInt(n.documentElement.getAttribute("HEIGHT"),10),u=parseInt(n.documentElement.getAttribute("NUMTILES"),10),f=parseInt(n.documentElement.getAttribute("NUMIMAGES"),10),l=parseInt(n.documentElement.getAttribute("VERSION"),10),o=parseInt(n.documentElement.getAttribute("TILESIZE"),10)):Z.tileSource=="ZoomifyImageFile"&&(i=parseInt(n.documentElement.getAttribute("WIDTH"),10),s=parseInt(n.documentElement.getAttribute("HEIGHT"),10),o=parseInt(n.documentElement.getAttribute("TILESIZE"),10),u=parseInt(n.documentElement.getAttribute("NUMTILES"),10),f=parseInt(n.documentElement.getAttribute("NUMIMAGES"),10),l=parseInt(n.documentElement.getAttribute("VERSION"),10),c=parseInt(n.documentElement.getAttribute("HEADERSIZE"),10),h=1060+c),!isNaN(i)&&i>0&&!isNaN(s)&&s>0&&!isNaN(o)&&o>0?qn.z284()?t(i,s,o,u,l,c,h):e(i,s,o,u,l,c,h):Z.Utils.z405(Z.Utils.z285("z147"))}}function f(e){var t=1,n=0,r=1060,i=Z.imagePath.replace(".","%2E"),s=Z.tileHandlerPathFull+"?file="+i+"&requestType="+t+"&begin="+n+"&end="+r;e.loadXML(s)}function l(e){}function c(){var e=h();e!=Vn&&(e=p(),e!=Vn&&Z.Utils.z405(Z.Utils.z285("z146")))}function h(){var e=Z.imageW,t=Z.imageH;while(e>Jn||t>Jn)e/=2,t/=2,_r++;e=Z.imageW,t=Z.imageH;var n=0;for(var r=_r-1;r>=0;r--)Rr[r]=e,Ur[r]=t,zr[r]=Math.ceil(Rr[r]/Jn),Wr[r]=Math.ceil(Ur[r]/Jn),Xr[r]=zr[r]*Wr[r],e/=2,t/=2,n+=Xr[r];return n}function p(){Rr=[],Ur=[],zr=[],Wr=[],_r=0;var e="DIV2",t=Z.imageW,n=Z.imageH;_r=1;var r=2;while(t>Jn||n>Jn)e=="Div2"?(t=Math.floor(t/2),n=Math.floor(n/2)):e=="Plus1Div2"?(t=Math.floor((t+1)/2),n=Math.floor((n+1)/2)):(t=Math.floor(Z.imageW/r),n=Math.floor(Z.imageH/r),r*=2,t%2&&t++,n%2&&n++),_r++;t=Z.imageW,n=Z.imageH,r=2,tileCounter=0;for(var i=_r-1;i>=0;i--)zr[i]=Math.floor(t/Jn),t%Jn&&zr[i]++,Wr[i]=Math.floor(n/Jn),n%Jn&&Wr[i]++,Xr[i]=zr[i]*Wr[i],tileCounter+=Xr[i],Rr[i]=t,Ur[i]=n,e=="Div2"?(t=Math.floor(t/2),n=Math.floor(n/2)):e=="Plus1Div2"?(t=Math.floor((t+1)/2),n=Math.floor((n+1)/2)):(t=Math.floor(Z.imageW/r),n=Math.floor(Z.imageH/r),r*=2,t%2&&t++,n%2&&n++);return tileCounter}function d(){var e=parseFloat(Z.Utils.z285("z74")),t=parseFloat(Z.Utils.z285("z75")),n=parseFloat(Z.Utils.z285("z76")),r=parseFloat(Z.Utils.z285("z83")),i=parseFloat(Z.Utils.z285("z81"));niX=isNaN(e)?null:e,niY=isNaN(t)?null:t,niZ=isNaN(n)?null:n,nmnZ=isNaN(r)?null:r,nmxZ=isNaN(i)?null:i;if(!Z.parameters)Z.initialX=niX,Z.initialY=niY,Z.initialZ=niZ,Z.minZ=nmnZ,Z.maxZ=nmxZ;else{var s=Z.parameters.toString();s.indexOf("zInitialX")==-1&&(Z.initialX=niX),s.indexOf("zInitialY")==-1&&(Z.initialY=niY),s.indexOf("zInitialZoom")==-1&&(Z.initialZ=niZ),s.indexOf("zMinZ")==-1&&(Z.minZ=nmnZ),s.indexOf("zMaxZ")==-1&&(Z.maxZ=nmxZ)}Z.initialX==null&&(Z.initialX=Z.imageW/2),Z.initialY==null&&(Z.initialY=Z.imageH/2),Z.fitZ=it(),Z.initialZ==null&&(Z.initialZ=Z.fitZ),Z.minZ==null&&(Z.minZ=Z.fitZ),Z.maxZ==null&&(Z.maxZ=Z.fitZ),Z.initialZ<Z.minZ&&(Z.initialZ=Z.minZ),Z.initialZ>Z.maxZ&&(Z.initialZ=Z.maxZ)}function v(){m(ai),_r>si&&(m(ui),_r>ii&&m(oi)),qr.sort(),qr=Z.Utils.z391(qr),T(qr,V,0,"backfill")}function m(e){var t=zr[e]-1,n=Wr[e]-1;for(var r=0;r<=n;r++)for(var i=0;i<=t;i++)qr.push(e+"-"+i+"-"+r)}function g(e,t){}function y(e){var t=!1;if(e||parseFloat(ar.width)!=ur.width)Z.useCanvas&&(ar.width=ur.width+"px",ar.height=ur.height+"px",ar.left="0px",ar.top="0px",fr.restore(),fr.save(),fr.scale(Br,Br),Nr&&(Cr.width=Nr.width+"px",Cr.height=Nr.height+"px",Cr.left="0px",Cr.top="0px"),Ar&&(Or.width=Ar.width+"px",Or.height=Ar.height+"px",Or.left="0px",Or.top="0px")),t=!0;if(e||parseFloat(tr.left)!=yi||parseFloat(tr.top)!=wi){var n=parseFloat(tr.left)-yi,r=parseFloat(tr.top)-wi;tr.left=yi+"px",tr.top=wi+"px",Ti=parseFloat(ir.left)+n,Ni=parseFloat(ir.top)+r,ir.left=Ti+"px",ir.top=Ni+"px";var i=qn.getZoom();Z.imageX=Z.imageX-n/i,Z.imageY=Z.imageY-r/i,t=!0}t&&S(ur,Dr,Jr,"centerOut",!1,"1. Updating view: resetting display positions")}function b(){Br!=jr&&(Z.imageZ=qi),Z.imageZ<Z.minZ&&(Z.imageZ=Z.minZ);var e=Kn,t=_r;while(e/2>=Z.imageZ)t--,e/=2;t=t-1<0?0:t-1;var n=H(t,Z.imageZ);if(t!=Dr||n!=Br)Z.useCanvas&&(fr.restore(),fr.save(),fr.scale(n,n)),Dr!=t&&(Hr=!0),Dr=t,Br=n;jr=Br}function w(){Pr=Dr>ii?oi:Dr>si?ui:ai,Fr=H(Pr,Z.imageZ),tierBackfillW=Rr[Pr],tierBackfillH=Ur[Pr],rr.width=tierBackfillW,rr.height=tierBackfillH;var e=tierBackfillW*Fr,t=tierBackfillH*Fr,n=Z.imageX*Z.imageZ,r=Z.imageY*Z.imageZ;Si=e,xi=t,Ti=mi-n,Ni=gi-r,Z.useCanvas&&(ir.width=Si+"px",ir.height=xi+"px"),ir.left=Ti+"px",ir.top=Ni+"px"}function E(){var e=A();for(var t=e.top,n=e.bottom;t<=n;t++)for(var r=e.left,i=e.right;r<=i;r++)$r.push(Dr+"-"+r+"-"+t);Kr.sort(),$r.sort(),Kr=Z.Utils.z391(Kr),$r=Z.Utils.z391($r),Z.debug==2&&Z.Utils.trace("Tiles required: "+$r.join(", "));var s=Z.Utils.intersect($r,Kr);$r=Z.Utils.subtract($r,Kr),ni=tilesLoadingNamesLength=$r.length,Z.ToolbarDisplay&&Z.Toolbar.z284()&&Z.Toolbar.updateProgress(ni,tilesLoadingNamesLength),Kr=Z.Utils.subtract(Kr,s),Kr=Kr.concat(s);if(tilesLoadingNamesLength!=0){for(var o=0,u=Vr.length;o<u;o++){var a=Vr[o];a.alpha=1}Vr=[]}}function S(e,t,n,r,i,s){if(n.length>0){var o=A();i||N(e);if(r=="canvasCopy")N(ur),fr.restore(),fr.save(),fr.scale(1,1),fr.drawImage(cr,-mi,-gi),fr.restore(),fr.save(),fr.scale(Br,Br);else if(r=="centerOut"){var u=Math.floor(n.length/2);for(var a=u,f=n.length;a<f;a++){var l=n[a];l&&l.t==t&&(t==Pr||l.c>=o.left&&l.c<=o.right&&l.r>=o.top&&l.r<=o.bottom)&&K(e,t,l);if(n.length-a-1!=a){var l=n[n.length-a-1];l&&l.t==t&&(t==Pr||l.c>=o.left&&l.c<=o.right&&l.r>=o.top&&l.r<=o.bottom)&&K(e,t,l)}}}else for(var a=0,f=n.length;a<f;a++){var l=n[a];l&&l.t==t&&(t==Pr||l.c>=o.left&&l.c<=o.right&&l.r>=o.top&&l.r<=o.bottom)&&K(e,t,l)}if(Z.debug==2&&e.id=="viewportDisplay"){var c=[];for(var a=0,f=n.length;a<f;a++)l&&n[a].t==t&&(t==Pr||n[a].c>=o.left&&n[a].c<=o.right&&n[a].r>=o.top&&n[a].r<=o.bottom)&&c.push(n[a].name);c.length>0&&(c.sort(),c=Z.Utils.z391(c));var h=c.length>0?c.join(", "):"No cached tiles to redisplay";Z.Utils.trace("Tiles redisplaying - "+s+": "+h)}}}function x(e,t){var n=A();cr.width=ur.width,cr.height=ur.height,hr.width=ar.width,hr.height=ar.height,hr.left=ar.left,hr.top=ar.top,pr.restore(),pr.save(),pr.translate(mi,gi),pr.scale(Br,Br);for(var r=0,i=t.length;r<i;r++){var s=t[r];s&&s.t==e&&(e==Pr||s.c>=n.left&&s.c<=n.right&&s.r>=n.top&&s.r<=n.bottom)&&K(cr,e,s)}}function T(e,t,n,r){if(e.length>0){var i=(new Date).getTime();if(n){var s=Math.floor(e.length/2);for(var o=s,u=e.length;o<u;o++){var a=e[o];if(a){var f=new q(a,r);W(f,i,t)}if(e.length-o-1!=o){var a=e[e.length-o-1];if(a){var f=new q(a,r);W(f,i,t)}}}}else for(var o=0,u=e.length;o<u;o++){var a=e[o];if(a){var f=new q(a,r);W(f,i,t)}}var l=typeof r!="undefined"&&r!==null?" - "+r+": ":": ";Z.debug==2&&l!=" - backfill: "&&Z.Utils.trace("Tiles to be requested"+l+e.join(", "))}else Z.debug==2&&Z.Utils.trace("No new tiles requested.")}function N(e){if(e)if(Z.useCanvas&&e.tagName=="CANVAS"){var t=e.getContext("2d");t.save(),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,t.canvas.width,t.canvas.height),t.restore()}else while(e.hasChildNodes())e.removeChild(e.lastChild)}function C(){if(Z.ToolbarDisplay&&Z.Toolbar.z284()){var e=qn.getZoom();Z.Toolbar.z418(e)}}function k(){Z.Navigator&&Z.Navigator.z284()&&Z.Navigator.z420()}function L(){return new _(O(),Dr)}function A(){return new _(M(),Dr)}function O(){var e=parseFloat(tr.left)-yi,t=parseFloat(tr.top)-wi;if(Z.useCanvas){var n=parseFloat(tr.width)/er.width;e/=n,t/=n}var r=qn.getZoom();e!=0&&(e/=r),t!=0&&(t/=r);var i=Z.imageX-e,s=Z.imageY-t,o=-(li/2),u=li/2,a=-(ci/2),f=ci/2;return new D(i,s,o,u,a,f,r)}function M(){var e=parseFloat(tr.left)-yi,t=parseFloat(tr.top)-wi;if(Z.useCanvas){var n=parseFloat(tr.width)/er.width;e/=n,t/=n}var r=qn.getZoom();e!=0&&(e/=r),t!=0&&(t/=r);var i=Z.imageX-e,s=Z.imageY-t,o=-(di/2),u=di/2,a=-(vi/2),f=vi/2;return new D(i,s,o,u,a,f,r)}function _(e,t){var n=P(t,1),r=Math.floor(e.left*n/Jn),i=Math.floor(e.right*n/Jn),s=Math.floor(e.top*n/Jn),o=Math.floor(e.bottom*n/Jn);r<0&&(r=0),i>zr[Dr]-1&&(i=zr[Dr]-1),s<0&&(s=0),o>Wr[Dr]-1&&(o=Wr[Dr]-1),this.left=r,this.right=i,this.top=s,this.bottom=o}function D(e,t,n,r,i,s,o){this.left=e+n/o,this.right=e+r/o,this.top=t+i/o,this.bottom=t+s/o}function P(e,t){var n=t*(Rr[e]/Z.imageW);return n}function H(e,t){var n=t/(Rr[e]/Z.imageW);return n}function B(e,t){var n=e-Z.Utils.getElementPosition(Z.ViewerDisplay).x,r=t-Z.Utils.getElementPosition(Z.ViewerDisplay).y;return new Z.Utils.Point(n,r)}function F(e,t){var n=parseFloat(tr.left)+mi,r=parseFloat(tr.top)+gi,i=e-n,s=t-r,o=i/Z.imageZ,u=s/Z.imageZ,a=Z.imageX+o,f=Z.imageY+u;return new Z.Utils.Point(a,f)}function I(e,t,n){var r=Z.imageX-e,i=Z.imageY-t,s=r*n,o=i*n,u=yi+s,a=wi+o;return new Z.Utils.Point(u,a)}function q(e,t){this.name=e,this.t=parseInt(e.substring(0,e.indexOf("-")),10),this.c=parseInt(e.substring(e.indexOf("-")+1,e.lastIndexOf("-")),10),this.r=parseInt(e.substring(e.lastIndexOf("-")+1),10),this.x=Math.floor(this.c*Jn),this.y=Math.floor(this.r*Jn),this.image=null,this.alpha=0,this.url=qn.z279(this.t,this.c,this.r,t),this.loadTime=null,this.elmt=null,this.style=null}function R(e,t,n){var r=0;for(var i=_r-1;i>=e;i--)r+=Xr[i];r+=n*zr[e]+t;var s=Math.floor(r/Xn);return s}function U(e,t,n){Yr[e]=n;var r=2,i=Z.imagePath.replace(".","%2E"),s=Z.tileHandlerPathFull+"?file="+i+"&requestType="+r+"&begin="+e+"&end="+t,o=new Z.NetConnector;o.loadXML(s)}function z(e){for(var t=0,n=Zr.length;t<n;t++){var r=Zr[t].split(",");r[0]==e&&(r[4]!=undefined&&r[4]!="backfill"?ei.push(r[1]+"-"+r[2]+"-"+r[3]):ti.push(r[1]+"-"+r[2]+"-"+r[3]),Zr.splice(t,1),t--,n--)}ei.length>0&&(T(ei,J,0),Z.debug==2&&Z.Utils.trace("Tiles being requested - offset chunk now loaded: "+ei.join(", "))),ti.length>0&&T(ti,V,0,"backfill")}function W(e,t,n){e.url.substr(0,8)=="skipTile"?X(e):e.url!="offsetLoading"&&(e.loadTime=t,e.loading=ri.loadImage(e.url,Z.Utils.createCallback(null,n,e),"tile"),Z.debug==2&&Z.Utils.trace("Tile actually requested: "+e.name)),Z.debug==2&&Z.Utils.trace("Tile not yet requested - offset chunk loading in progress: "+e.name)}function X(e){Gn>0&&(Jr.push(e),Kr.push(e.name));var t=$r.indexOf(e.name);t!=-1&&$r.splice(t,1),Z.tileSource=="ZoomifyImageFile"&&(t=ei.indexOf(e.name),t!=-1&&ei.splice(t,1)),Vr.push(e)}function V(e,t){if(e&&t){e.image=t;var n=e.name;Ir.push(e);var r=qr.indexOf(n);r!=-1&&qr.splice(r,1),Z.tileSource=="ZoomifyImageFile"&&(r=ti.indexOf(n),r!=-1&&ti.splice(r,1)),e.alpha=1,e.t==Pr&&K(rr,Pr,e)}else t==null&&(Z.mobileDevice?console.log(Z.Utils.z285("z161")+e.name+".jpg"):Z.Utils.z405(Z.Utils.z285("z161")+e.name+".jpg"))}function $(e,t){if(e&&t){e.image=t;var n=e.name;K(ur,Dr,e)}else t==null&&(Z.mobileDevice?console.log(Z.Utils.z285("z161")+e.name+".jpg"):Z.Utils.z405(Z.Utils.z285("z161")+e.name+".jpg"))}function J(e,t){if(e&&t){e.image=t;var n=e.name;Gn>0&&(Jr.push(e),Kr.push(n));var r=$r.indexOf(n);r!=-1&&$r.splice(r,1),Z.tileSource=="ZoomifyImageFile"&&(r=ei.indexOf(n),r!=-1&&ei.splice(r,1)),Vr.push(e),Vi||(Vi=window.setInterval(nt,50)),Z.debug==2&&(Z.Utils.trace("Tile received: "+e.name),i==0&&Z.Utils.trace("Tile loading complete: all requested tiles received."));var i=$r.length;if(i==0){if(Z.useCanvas&&Gn>0)if(!Hr)S(ur,Dr,Jr,"centerOut",!1,"4. Updating view: all new tiles loaded");else{x(Dr,Jr),S(ur,Dr,Jr,"canvasCopy",!1,"4. Updating view: all new tiles loaded");var s=window.setTimeout(function(){N(cr)},200);Hr=!1}Kr.length>Gn&&rt(),ni=0}Z.ToolbarDisplay&&Z.Toolbar.z284()&&Z.Toolbar.updateProgress(ni,i)}else t==null&&(Z.mobileDevice?console.log(Z.Utils.z285("z161")+e.name+".jpg"):Z.Utils.z405(Z.Utils.z285("z161")+e.name+".jpg"))}function K(e,t,n){if(n.url.substr(0,8)!="skipTile"){var r=n.x,i=n.y,s=P(t,1);if(Z.useCanvas){if(e==ur||e==cr)r-=Z.imageX*s,i-=Z.imageY*s;Q(e,n,r,i)}else{var o;e==ur?(r-=Z.imageX*s-mi/Br,i-=Z.imageY*s-gi/Br,o=Br):o=Fr,G(e,n,r,i,o)}}}function Q(e,t,n,r){var i=e.getContext("2d");Z.alphaSupported&&t.alpha<1&&e.id!="transitionDisplay"?(i.globalAlpha=t.alpha,i.drawImage(t.image,n,r),i.globalAlpha=1):i.drawImage(t.image,n,r),Z.debug==2&&Y(e,t.name,n,r,Br)}function G(e,t,n,r,i){t.elmt||(t.elmt=Z.Utils.z248("img"),t.elmt.onmousedown=Z.Utils.preventDefault,Z.Utils.addEventListener(t.elmt,"contextmenu",Z.Utils.preventDefault),t.elmt.src=t.url,t.style=t.elmt.style,t.style.position="absolute",Z.Utils.renderQuality(t,Z.renderQuality),Z.cssTransformsSupported&&(t.style[Z.cssTransformProperty+"Origin"]="0px 0px")),t.elmt.parentNode!=e&&e.appendChild(t.elmt);var s=t.style;s.display="none",Z.cssTransformsSupported?s[Z.cssTransformProperty]=["matrix(",(t.image.width/t.elmt.width*i).toFixed(8),",0,0,",(t.image.height/t.elmt.height*i).toFixed(8),",",(n*i).toFixed(8),Z.cssTransformNoUnits?",":"px,",(r*i).toFixed(8),Z.cssTransformNoUnits?")":"px)"].join(""):(s.width=t.image.width*i+"px",s.height=t.image.height*i+"px",s.left=n*i+"px",s.top=r*i+"px"),s.display="inline-block",Z.Utils.z398(t,t.alpha),Z.debug==2&&Y(e,t.name,n,r,i)}function Y(e,t,n,r,i){Z.useCanvas?et(e,t,n,r,i):tt(e,t,n,r,i)}function et(e,t,n,r,i){var s=parseInt(Z.Utils.z285("z64"),10),o=parseInt(Z.Utils.z285("z82"),10),u=parseInt(Z.Utils.z285("z80"),10),a=Math.round(s*i),f=2*(a<o?o:a>u?u:a),l=e.getContext("2d");l.font=f+"px verdana",l.textAlign="left",l.textBaseline="top";var c=Jn*i/2;l.fillStyle="#ffffff",l.fillText(t,n+c,r+c),l.fillStyle="#000000",l.fillText(t,n+c+1,r+c+1)}function tt(e,t,n,r,i){var s=parseInt(Z.Utils.z285("z64"),10),o=parseInt(Z.Utils.z285("z82"),10),u=parseInt(Z.Utils.z285("z80"),10),a=Math.round(s*i),f=2*(a<o?o:a>u?u:a),l=parseInt(Z.Utils.z285("z65"),10)*i,c=Z.Utils.z248("div","tileNameTextBox","inline-block","absolute","hidden","auto","auto","1px","1px","none","0px","transparent none","0px",l+"px","nowrap"),h=document.createTextNode(t);c.appendChild(h),e.appendChild(c),Z.Utils.z401(h,"white","verdana",f+"px","none","normal","normal","normal","normal","1em","center","none");var p=Z.Utils.z248("div","tileNameTextBox2","inline-block","absolute","hidden","auto","auto","1px","1px","none","0px","transparent none","0px",l+"px","nowrap"),d=document.createTextNode(t);p.appendChild(d),e.appendChild(p),Z.Utils.z401(d,"black","verdana",f+"px","none","normal","normal","normal","normal","1em","center","none");var l=parseFloat(c.style.padding),v=parseFloat(Z.Utils.getElementStyleProperty(c,"width"));if(isNaN(v)){var m=parseFloat(Z.Utils.z285("z56")),g=parseFloat(c.style.fontSize)/m;v=Math.round(parseFloat(t.length*g))}var y=Jn*i/2,b=Jn*i/2;c.style.left=n*i+(y-v/2-l)+"px",c.style.top=r*i+b+"px",p.style.left=1+n*i+(y-v/2-l)+"px",p.style.top=1+r*i+b+"px",Z.Utils.addEventListener(c,"contextmenu",Z.Utils.preventDefault),Z.Utils.z260(h),Z.Utils.addEventListener(p,"contextmenu",Z.Utils.preventDefault),Z.Utils.z260(d)}function nt(e){var t=0;for(var n=0,r=Vr.length;n<r;n++){var i=Vr[n];i.t==Dr&&(i.alpha<1?(Xi==0?i.alpha=1:i.alpha+=Xi,i.alpha>1&&(i.alpha=1),K(ur,Dr,i)):(t++,t>=r&&(window.clearInterval(Vi),Vi=null),Z.debug==2&&Z.Utils.trace("Fading-in tile complete: "+i.name)))}}function rt(){while(Kr.length>Gn&&Jr.length>0)j=Kr.indexOf(Jr[0].name),j!=-1&&Kr.splice(j,1),Jr.splice(0,1)}function it(){return Z.imageW/Z.imageH>li/ci?li/Z.imageW:ci/Z.imageH}function st(e,t,n){if(Z.constrainPan){n===null&&(n=Z.imageZ);var r=new D(e,t,-(li/2),li/2,-(ci/2),ci/2,n),i=r.left,s=r.right,o=r.top,u=r.bottom;Z.imageW*n>li?i<0?e=li/2/n:s>Z.imageW&&(e=Z.imageW-li/2/n):e=Z.imageW/2,Z.imageH*n>ci?o<0?t=ci/2/n:u>Z.imageH&&(t=Z.imageH-ci/2/n):t=Z.imageH/2}return new Z.Utils.Point(e,t)}function ot(e,t){if(Z.constrainPan){var n=qn.getZoom(),r=Z.imageX,i=Z.imageY,s=new D(r,i,-(li/2),li/2,-(ci/2),ci/2,n),o=s.left,u=s.right,a=s.top,f=s.bottom;Z.imageW*n>li?o<0?e+=o*n:u>Z.imageW&&(e-=(Z.imageW-u)*n):e+=(r-Z.imageW/2)*n,Z.imageH*n>ci?a<0?t+=a*n:f>Z.imageH&&(t-=(Z.imageH-f)*n):t+=(i-Z.imageH/2)*n}return new Z.Utils.Point(e,t)}function ut(e,t){if(Z.constrainPan){var n=qn.getZoom(),r=Z.imageX-(e-yi)/n,i=Z.imageY-(t-wi)/n,s=new D(r,i,-(li/2),li/2,-(ci/2),ci/2,n),o=s.left,u=s.right,a=s.top,f=s.bottom;Z.imageW*n>li?o<0?e+=o*n:u>Z.imageW&&(e-=(Z.imageW-u)*n):e+=(r-Z.imageW/2)*n,Z.imageH*n>ci?a<0?t+=a*n:f>Z.imageH&&(t-=(Z.imageH-f)*n):t+=(i-Z.imageH/2)*n}return new Z.Utils.Point(e,t)}function at(e){return e>Z.maxZ?e=Z.maxZ:e<Z.minZ&&(e=Z.minZ),e}function ft(){os=new Image,us=parseFloat(Z.Utils.z285("z128")),os.url=Z.watermarkPath,os.onload=lt,os.onerror=dt,os.src=Z.watermarkPath}function lt(){if(vr){var e=parseFloat(Z.Utils.z285("z129")),t=parseFloat(Z.Utils.z285("z131")),n=parseFloat(Z.Utils.z285("z130")),r=qn.getZoom(),i=(Z.imageW*r-vr.width)/2,s=(Z.imageH*r-vr.height)/2,o=(Z.imageW/2-Z.imageX)*r,u=(Z.imageH/2-Z.imageY)*r,a=r<e?e:r,f=Math.round(Z.imageW/t),l=Math.round(Z.imageH/n),c=M(),h=os.width*a,p=os.height*a,d=0,v=0;for(var m=1;m<=f;m++)for(var g=1;g<=l;g++){var y=Math.round(Z.imageW/(f+1)*m),b=Math.round(Z.imageH/(l+1)*g);if(y>c.left&&y<c.right&&b>c.top&&b<c.bottom){var w=Math.round(y*r-h/2-i+o),E=Math.round(b*r-p/2-s+u);if(Z.imageW>4e3){var S=d+100,x=v+100;if(w<S&&E<x)continue;d=w,v=E}ct(h,p,w,E)}}}}function ct(e,t,n,r){ht(e,t,n,r)}function ht(e,t,n,r){var i=os.cloneNode(!1);Z.Utils.z398(i,us),i.width=e,i.height=t;var s=Z.Utils.z248("div","wiC","inline-block","absolute","hidden",e+"px",t+"px",n+"px",r+"px","none","0px","transparent none","0px","0px","normal");s.appendChild(i),vr.appendChild(s),Z.Utils.addEventListener(i,"contextmenu",Z.Utils.preventDefault),Z.Utils.addEventListener(i,"mousedown",Z.Utils.preventDefault)}function pt(){vr&&(N(vr),lt())}function dt(){Z.Utils.z405(Z.Utils.z285("z166")+this.url)}function vt(){var e;Z.Utils.isStrVal(Z.hotspotPath)?e=Z.Utils.z215(Z.hotspotPath+"/"+Z.Utils.z285("z71")):Z.Utils.isStrVal(Z.annotationPath)&&(e=Z.Utils.z215(Z.annotationPath+"/"+Z.Utils.z285("z34")));var t=new Z.NetConnector;t.loadXML(e)}function mt(e){this.id=e.getAttribute("ID"),this.internalID=parseInt(e.getAttribute("INTERNALID")),this.name=e.getAttribute("NAME"),this.mediaType=e.getAttribute("MEDIATYPE"),this.media=e.getAttribute("MEDIA"),this.image=null,this.iW=null,this.iH=null;var t=parseFloat(e.getAttribute("X"));this.x=isNaN(t)?0:t;var n=parseFloat(e.getAttribute("Y"));this.y=isNaN(n)?0:n;var r=parseFloat(e.getAttribute("ZOOM"));this.zoom=isNaN(r)?-1:r;var i=parseFloat(e.getAttribute("XSCALE"));this.xScale=isNaN(i)?100:i;var s=parseFloat(e.getAttribute("YSCALE"));this.yScale=isNaN(s)?100:s,this.url=e.getAttribute("URL"),this.urlTarget=e.getAttribute("URLTARGET");var o=e.getAttribute("ROLLOVER");this.rollover=o=="1"||o=="true",this.caption=e.getAttribute("CAPTION"),this.tooltip=e.getAttribute("TOOLTIP"),this.textColor="#"+e.getAttribute("TEXTCOLOR"),this.backColor="#"+e.getAttribute("BACKCOLOR"),this.lineColor="#"+e.getAttribute("LINECOLOR"),this.fillColor="#"+e.getAttribute("FILLCOLOR"),this.textVisible=e.getAttribute("TEXTVISIBLE")!="0",this.backVisible=e.getAttribute("BACKVISIBLE")!="0",this.lineVisible=e.getAttribute("LINEVISIBLE")!="0",this.fillVisible=e.getAttribute("FILLVISIBLE")!="0";var u=e.getAttribute("CAPTIONPOSITION");this.captionPosition=Z.Utils.isStrVal(u)?u:"8",this.saved=!0,this.visibility=!0,this.polygonPts=null;if(e.getAttribute("MEDIA")=="polygon"){var a=e.getElementsByTagName("POLYGON"),f=a[0].getElementsByTagName("POINT"),l=[];for(var c=0,h=f.length;c<h;c++)l.push({x:f[c].getAttribute("X"),y:f[c].getAttribute("Y")});this.polygonPts=l}var p=1,d=2,v=e.getAttribute("MEDIATYPE");this.mediaType=v=="symbol"?p:d}function gt(e){var t=(new Date).getTime();for(var n=0,r=e.length;n<r;n++)yt(e[n],t)}function yt(e,t){var n=ys.loadImage(e,Z.Utils.createCallback(null,bt,e,t),"hotspot")}function bt(e,t,n){if(e&&t&&n){var r=new kt;for(var i=0,s=ls.length;i<s;i++)if(ls[i].media==e){cs.push(n.cloneNode(!1)),ls[i].image=n.cloneNode(!1),ls[i].iW=n.width,ls[i].iH=n.height;var o=ls[i].x,u=ls[i].y;o>r.bounds.left&&o<r.bounds.right&&u>r.bounds.top&&u<r.bounds.bottom&&xt(ls[i],r)}}else Z.Utils.z405(Z.Utils.z285("z142"))}function wt(){yr&&(N(yr),Nr&&N(Nr),Ar&&N(Ar),St())}function Et(){var e=new kt;for(var t=0,n=ls.length;t<n;t++)if(ls[t].media==""||ls[t].media=="polygon"){var r=ls[t].x,i=ls[t].y;r>e.bounds.left&&r<e.bounds.right&&i>e.bounds.top&&i<e.bounds.bottom&&xt(ls[t],e)}}function St(){var e=new kt;for(var t=0,n=ls.length;t<n;t++){var r=ls[t].x,i=ls[t].y;r>e.bounds.left&&r<e.bounds.right&&i>e.bounds.top&&i<e.bounds.bottom&&xt(ls[t],e)}if(yr.childNodes.length==0){var s=Z.Utils.z248("div","hotspotImmortal","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal");yr.appendChild(s)}}function xt(e,t){e.media=="polygon"&&tn(e,t),Tt(e,t)}function Tt(e,t){if(!Z.Utils.isStrVal(e.media)&&!Z.Utils.isStrVal(e.caption)||(e.iW==null||e.iH==null)&&e.media!="polygon"&&(Nr||!Z.Utils.isStrVal(e.caption)))return;var n=ls.indexOfObjectValue("internalID",e.internalID);n!=-1&&Nt(ls[n]);if(Z.useCanvas&&e.media=="polygon"){var r=e.polygonPts,i=Z.Utils.getDimensionsFromPolygonPoints(e.polygonPts);e.iW=i.x,e.iH=i.y}if((e.iW===null||e.iH==null)&&e.media!="polygon"&&e.media!="")return;var s=e.iW*t.constrainedScale*(e.xScale/100/(e.zoom/100)),o=e.iH*t.constrainedScale*(e.yScale/100/(e.zoom/100)),u;e.image&&(u=e.image,u.align="top",u.width=s,u.height=o);var a=Math.round(e.x*t.currentZ-s/2-t.displayOffsetL+t.imageOffsetL),f=Math.round(e.y*t.currentZ-o/2-t.displayOffsetT+t.imageOffsetT),l;Z.Utils.isStrVal(e.caption)&&(l=Lt(e,t));var c=Z.Utils.z248("div","hCloak","inline-block","absolute","visible"),h="hot"+e.internalID.toString(),p=Z.Utils.z248("div",h,"inline-block","absolute","visible",s+"px",o+"px",a+"px",f+"px","none","0px","transparent none","0px","0px","normal");Z.Utils.isStrVal(e.tooltip)&&(p.title=unescape(e.tooltip));if(Z.Utils.isStrVal(e.url)){if(u){var d=document.createElement("a");d.setAttribute("href",e.url),d.setAttribute("target",e.urlTarget),d.setAttribute("outline","none"),d.appendChild(u),u.style.cursor="help",u.style.border="none"}if(l){var v=document.createElement("a");v.setAttribute("href",e.url),v.setAttribute("target",e.urlTarget),v.setAttribute("outline","none"),v.appendChild(l),l.style.cursor="help"}c.style.border="none"}Z.Utils.isStrVal(e.url)?(d&&c.appendChild(d),v&&c.appendChild(v)):(u&&c.appendChild(u),l&&c.appendChild(l)),p.appendChild(c),yr.appendChild(p),e.rollover&&(c.rollover=e.rollover),_t(p,!e.rollover&&e.visibility);if(l){var m=At(l,e.captionPosition,s,o);l.style.left=m.x+"px",l.style.top=m.y+"px"}e.rollover&&(Z.Utils.addEventListener(p,"mouseover",zt),Z.Utils.addEventListener(p,"mouseout",Wt)),Z.Utils.addEventListener(p,"mousedown",Z.Utils.preventDefault),Z.Utils.addEventListener(p,"contextmenu",Z.Utils.preventDefault)}function Nt(e){var t=document.getElementById("hot"+e.internalID);t!==null&&t.parentNode.removeChild(t)}function Ct(e){var t=0,n=[];switch(e){case"poi":for(var r=0,i=Xs.length;r<i;r++)n.push(Xs[r].value);break;case"note":for(var r=0,i=notesListDP.length;r<i;r++)n.push(notesListDP[r].value);break;case"label":for(var r=0,i=Vs.length;r<i;r++)n.push(Vs[r].value);break;case"labelExternal":for(var r=0,i=ls.length;r<i;r++)n.push(ls[r].id);break;case"hotspot":for(var r=0,i=ls.length;r<i;r++)n.push(ls[r].internalID)}n.sort();for(var r=0,i=n.length;r<i;r++)n[r]!=t?r=i:t++;return t}function kt(){this.bounds=M(),this.currentZ=qn.getZoom(),this.constrainedScale=this.currentZ<Ps?Ps:this.currentZ>Hs?Hs:this.currentZ,this.displayOffsetL=(Z.imageW*this.currentZ-yr.width)/2,this.displayOffsetT=(Z.imageH*this.currentZ-yr.height)/2,this.imageOffsetL=(Z.imageW/2-Z.imageX)*this.currentZ,this.imageOffsetT=(Z.imageH/2-Z.imageY)*this.currentZ}function Lt(e,t){var n=t.constrainedScale*(e.xScale/100/(e.zoom/100)),r=Math.round(Ns*n),i=r<Cs?Cs:r>ks?ks:r,s=Ls*n,o=s<As?As:s>Os?Os:s,u=Z.Utils.z248("div","captionTextBox","inline-block","absolute","hidden","auto","auto","1px","1px","solid","1px","white","0px",o+"px","nowrap"),a=document.createTextNode(unescape(e.caption));return u.appendChild(a),Z.Utils.z401(a,"black","verdana",i+"px","none","normal","normal","normal","normal","1em","center","none"),Z.Utils.addEventListener(u,"contextmenu",Z.Utils.preventDefault),Z.Utils.z260(a),u}function At(e,t,n,r){var i=parseFloat(e.style.padding),s=parseFloat(Z.Utils.getElementStyleProperty(e,"width"));if(isNaN(s)){var o=parseFloat(Z.Utils.z285("z56")),u=parseFloat(e.style.fontSize)/o;s=Math.round(parseFloat(e.firstChild.length*u))}var a=qn.getZoom(),f=20*a,l,c;switch(t){case"1":l=-s-i,c=-f-i;break;case"2":l=(n-s)/2-i,c=-f-i;break;case"3":l=n+i,c=-f-i;break;case"4":l=-s-i,c=(r-f)/2;break;case"5":l=(n-s)/2-i,c=(r-f)/2;break;case"6":l=n+i,c=(r-f)/2;break;case"7":l=-s-i,c=r+i;break;case"8":l=(n-s)/2-i,c=r+i;break;case"9":l=n+i,c=r+i}return new Z.Utils.Point(l,c)}function Ot(e,t){var n=parseInt(Z.Utils.z285("z69"),10),r=Dt(_s,n,li,ci),i=_s=="0"?"hidden":"visible",s=document.getElementById("hotspotList");s&&Z.ViewerDisplay.removeChild(s),Ms=new Z.Utils.z253("hotspotList",e,t,n,r.x,r.y,i,Qt),wr=Ms,Er=wr.style,Z.ViewerDisplay.appendChild(Ms)}function Mt(e,t){var n=document.getElementById("hotspotList");n!=null&&(n.options[n.options.length]=new Option(e,t))}function _t(e,t){var n=e.childNodes[0];if(n&&n.style){n.style.visibility="visible";var r=t?"visible":"hidden",i=t?"":"#ffffff",s=t?1:.01;if(Z.browser!=Z.browsers.IE)n.style.visibility=r;else{n.style.backgroundColor=i,Z.Utils.z398(n,s);var o=e.childNodes[0].childNodes[1];o&&o.style&&(o.style.visibility=r)}var u=ls.indexOfObjectValue("internalID",e.internalID);u!=-1&&(ls[u].visibility=t)}}function Dt(e,t,n,r){var i,s,o=25;switch(e){case"0":i=0,s=0;break;case"1":i=o,s=o;break;case"2":i=n-t-o,s=20;break;case"3":i=n-t-o,toolbar!=null?s=r-o:s=r-o;break;case"4":i=o,toolbar!=null?s=r-o:s=r-o;break;default:i=n-t,s=o}return new Z.Utils.Point(i,s)}function Pt(e){return Z.Utils.isStrVal(e.media)||Z.Utils.isStrVal(e.caption)}function Ht(e){var t="[Hotspot ";return t+="id:"+e.id+", ",t+="internalID:"+e.internalID.toString()+", ",t+="name:"+e.name+", ",t+="mediaType:"+e.mediaType+", ",t+="media:"+e.media+", ",t+="x:"+e.x.toString()+", ",t+="y:"+e.y.toString()+", ",t+="zoom:"+e.zoom.toString()+", ",t+="xScale:"+e.xScale.toString()+", ",t+="yScale:"+e.yScale.toString()+", ",t+="url:"+e.url+", ",t+="urlTarget:"+e.urlTarget+", ",t+="rollover:"+e.rollover+", ",t+="caption:"+e.caption+", ",t+="tooltip:"+e.tooltip,t+="]",t}function Bt(e){var t,n,r=Z.imageW/2,i=Z.imageH/2,s="<ZAS></ZAS>",o=Z.Utils.z241(s),u=o.getElementsByTagName("ZAS")[0],a=o.createElement("LABELSETUP");a.setAttribute("PANELPOSITION","2"),a.setAttribute("INITIALVISIBILITY","1"),a.setAttribute("NOTEVISIBILITY","1"),a.setAttribute("MINSCALE","1"),a.setAttribute("MAXSCALE","1"),u.appendChild(a);var f=e.getElementsByTagName("LABELSETUP")[0];t=f.getAttribute("PANELPOSITION"),Z.Utils.isStrVal(t)&&a.setAttribute("PANELPOSITION",t);var l=f.getAttribute("INITIALVISIBILITY");if(Z.Utils.isStrVal(l)){var c=Z.Utils.z285("z70");c?initVis=l!="0"&&l!="hide"?"1":"0":initVis=l!="1"&&l!="show"?"0":"1",a.setAttribute("INITIALVISIBILITY",initVis)}var l=f.getAttribute("NOTEVISIBILITY");if(Z.Utils.isStrVal(l)){var c=Z.Utils.z285("DEFAULT_ANNOTATIONNOTEVISIBILITY");c?initVis=l!="0"&&l!="hide"?"1":"0":initVis=l!="1"&&l!="show"?"0":"1",a.setAttribute("NOTEVISIBILITY",initVis)}t=f.getAttribute("MINSCALE"),Z.Utils.isStrVal(t)&&!isNaN(parseFloat(t))&&parseFloat(t)>0&&a.setAttribute("MINSCALE",t),t=f.getAttribute("MAXSCALE"),Z.Utils.isStrVal(t)&&!isNaN(parseFloat(t))&&parseFloat(t)>0&&a.setAttribute("MAXSCALE",t);var h=e.getElementsByTagName("POI");for(var p=0,d=h.length;p<d;p++){var v=o.createElement("POI");v.setAttribute("ID","0"),v.setAttribute("NAME",Z.Utils.z285("z16")),v.setAttribute("X","center"),v.setAttribute("Y","center"),v.setAttribute("ZOOM","-1"),v.setAttribute("USER",Z.Utils.z285("z17")),v.setAttribute("DATE",Z.Utils.z282()),u.appendChild(v);var m=e.getElementsByTagName("POI")[p];t=m.getAttribute("ID"),Z.Utils.isStrVal(t)&&v.setAttribute("ID",t),t=m.getAttribute("NAME"),Z.Utils.isStrVal(t)&&v.setAttribute("NAME",t),t=m.getAttribute("X"),Z.Utils.isStrVal(t)&&!isNaN(parseFloat(t))&&v.setAttribute("X",t=="center"?r.toString():t),t=m.getAttribute("Y"),Z.Utils.isStrVal(t)&&!isNaN(parseFloat(t))&&v.setAttribute("Y",t=="center"?i.toString():t),t=m.getAttribute("ZOOM"),Z.Utils.isStrVal(t)&&!isNaN(parseFloat(t))&&v.setAttribute("ZOOM",t),t=m.getAttribute("USER"),Z.Utils.isStrVal(t)&&v.setAttribute("USER",t),t=m.getAttribute("DATE"),Z.Utils.isStrVal(t)&&v.setAttribute("DATE",t),u.appendChild(v),v=u.getElementsByTagName("POI")[p];var g=h[p].getElementsByTagName("NOTES")[0];if(g){var y=o.createElement("NOTES");v.appendChild(y);var b=g.getElementsByTagName("NOTE");for(var w=0,E=b.length;w<E;w++){var S=o.createElement("NOTE");S.setAttribute("ID","0"),S.setAttribute("NAME",Z.Utils.z285("z13")),S.setAttribute("TEXT",Z.Utils.z285("z14")),S.setAttribute("USER",Z.Utils.z285("z15")),S.setAttribute("DATE",Z.Utils.z282()),y.appendChild(S);var x=g.getElementsByTagName("NOTE")[w];t=x.getAttribute("ID"),Z.Utils.isStrVal(t)&&S.setAttribute("ID",t),t=x.getAttribute("NAME"),Z.Utils.isStrVal(t)&&S.setAttribute("NAME",t),t=x.getAttribute("TEXT"),Z.Utils.isStrVal(t)&&S.setAttribute("TEXT",t),t=x.getAttribute("USER"),Z.Utils.isStrVal(t)&&S.setAttribute("USER",t),t=x.getAttribute("DATE"),Z.Utils.isStrVal(t)&&S.setAttribute("DATE",t),y.appendChild(S)}}var T=h[p].getElementsByTagName("LABELS")[0];if(T){var N=o.createElement("LABELS");v.appendChild(N);var C=T.getElementsByTagName("LABEL");for(var k=0,L=C.length;k<L;k++){var A=o.createElement("LABEL");A.setAttribute("INTERNALID","0"),A.setAttribute("ID","0"),A.setAttribute("NAME",Z.Utils.z285("z11")),A.setAttribute("MEDIATYPE","url"),A.setAttribute("MEDIA","circle"),A.setAttribute("X","center"),A.setAttribute("Y","center"),A.setAttribute("ZOOM","100"),A.setAttribute("XSCALE","100"),A.setAttribute("YSCALE","100"),A.setAttribute("URL",""),A.setAttribute("URLTARGET","_blank"),A.setAttribute("ROLLOVER","0"),A.setAttribute("CAPTION",""),A.setAttribute("TOOLTIP",""),A.setAttribute("USER",Z.Utils.z285("z12")),A.setAttribute("DATE",Z.Utils.z282()),A.setAttribute("TOOLTIP",""),A.setAttribute("TEXTCOLOR",Z.Utils.z285("CONTENT_ANNOTATIONSCAPTIONTEXTCOLOR")),A.setAttribute("BACKCOLOR",Z.Utils.z285("CONTENT_ANNOTATIONSCAPTIONBACKCOLOR")),A.setAttribute("BACKVISIBLE",Z.Utils.z285("CONTENT_ANNOTATIONSCAPTIONBACKVISIBLE")),A.setAttribute("LINECOLOR",Z.Utils.z285("CONTENT_POLYGONLINECOLOR")),A.setAttribute("FILLCOLOR",Z.Utils.z285("CONTENT_POLYGONFILLCOLOR")),A.setAttribute("LINEVISIBLE",Z.Utils.z285("CONTENT_POLYGONLINEVISIBLE")),A.setAttribute("FILLVISIBLE",Z.Utils.z285("CONTENT_POLYGONFILLVISIBLE")),A.setAttribute("CAPTIONPOSITION",Z.Utils.z285("CONTENT_ANNOTATIONSCAPTIONPOSITION")),N.appendChild(A);var O=T.getElementsByTagName("LABEL")[k];t=O.getAttribute("ID"),Z.Utils.isStrVal(t)&&A.setAttribute("ID",t),t=O.getAttribute("NAME"),Z.Utils.isStrVal(t)&&A.setAttribute("NAME",t),t=O.getAttribute("MEDIATYPE"),Z.Utils.isStrVal(t)&&A.setAttribute("MEDIATYPE",t),t=O.getAttribute("MEDIA"),Z.Utils.isStrVal(t)&&A.setAttribute("MEDIA",t),t=O.getAttribute("X"),Z.Utils.isStrVal(t)&&!isNaN(parseFloat(t))&&A.setAttribute("X",t=="center"?r.toString():t),t=O.getAttribute("Y"),Z.Utils.isStrVal(t)&&!isNaN(parseFloat(t))&&A.setAttribute("Y",t=="center"?i.toString():t),t=O.getAttribute("ZOOM"),Z.Utils.isStrVal(t)&&!isNaN(parseFloat(t))&&A.setAttribute("ZOOM",t),t=O.getAttribute("XSCALE"),Z.Utils.isStrVal(t)&&!isNaN(parseFloat(t))&&A.setAttribute("XSCALE",t),t=O.getAttribute("YSCALE"),Z.Utils.isStrVal(t)&&!isNaN(parseFloat(t))&&A.setAttribute("YSCALE",t),t=O.getAttribute("URL"),Z.Utils.isStrVal(t)&&A.setAttribute("URL",t),t=O.getAttribute("URLTARGET"),Z.Utils.isStrVal(t)&&A.setAttribute("URLTARGET",t),t=O.getAttribute("ROLLOVER"),Z.Utils.isStrVal(t)&&A.setAttribute("ROLLOVER",t),t=O.getAttribute("CAPTION"),Z.Utils.isStrVal(t)&&A.setAttribute("CAPTION",t),t=O.getAttribute("TOOLTIP"),Z.Utils.isStrVal(t)&&A.setAttribute("TOOLTIP",t),t=O.getAttribute("USER"),Z.Utils.isStrVal(t)&&A.setAttribute("USER",t),t=O.getAttribute("DATE"),Z.Utils.isStrVal(t)&&A.setAttribute("DATE",t),t=O.getAttribute("TEXTCOLOR"),Z.Utils.isStrVal(t)&&A.setAttribute("TEXTCOLOR",t),t=O.getAttribute("BACKCOLOR"),Z.Utils.isStrVal(t)&&A.setAttribute("BACKCOLOR",t),t=O.getAttribute("LINECOLOR"),Z.Utils.isStrVal(t)&&A.setAttribute("LINECOLOR",t),t=O.getAttribute("FILLCOLOR"),Z.Utils.isStrVal(t)&&A.setAttribute("FILLCOLOR",t),t=O.getAttribute("TEXTVISIBLE"),Z.Utils.isStrVal(t)&&A.setAttribute("TEXTVISIBLE",t),t=O.getAttribute("BACKVISIBLE"),Z.Utils.isStrVal(t)&&A.setAttribute("BACKVISIBLE",t),t=O.getAttribute("LINEVISIBLE"),Z.Utils.isStrVal(t)&&A.setAttribute("LINEVISIBLE",t),t=O.getAttribute("FILLVISIBLE"),Z.Utils.isStrVal(t)&&A.setAttribute("FILLVISIBLE",t),t=O.getAttribute("CAPTIONPOSITION"),Z.Utils.isStrVal(t)&&A.setAttribute("CAPTIONPOSITION",t),n=O.getElementsByTagName("CAPTION")[0],n!=undefined&&A.appendChild(n),n=O.getElementsByTagName("TOOLTIP")[0],n!=undefined&&A.appendChild(n),n=O.getElementsByTagName("POLYGON")[0],n!=undefined&&A.appendChild(n),N.appendChild(A)}}}return o}function jt(){Vs.sort(Ft),$s.sort(Ft)}function Ft(e,t){var n=e.text.toLowerCase(),r=t.text.toLowerCase(),i=0;return n<r?i=-1:n>r&&(i=1),i}function It(){var e=9,t=9,n=51,r=12,i=25,s=40,o=20,u=5,a=parseInt(Z.Utils.z285("z29"),10),f=parseInt(Z.Utils.z285("z27"),10);Rs||(f-=131);var l=parseInt(Z.Utils.z285("z19"),10),c=parseInt(Z.Utils.z285("z23"),10),h=parseInt(Z.Utils.z285("z21"),10),p=qt(Fs,a,f,li,ci),d=Fs=="0"?"hidden":"visible",v=document.getElementById("poiList");v&&Z.AnnotationPanelDisplay.removeChild(v);var m=document.getElementById("labelList");m&&Z.AnnotationPanelDisplay.removeChild(m);var g=document.getElementById("noteList");g&&Z.AnnotationPanelDisplay.removeChild(g),Z.AnnotationPanelDisplay||(Z.AnnotationPanelDisplay=Z.Utils.z248("div","AnnotationPanelDisplay","inline-block","absolute","hidden",a+"px",f+"px",p.x+"px",p.y+"px","solid","1px","transparent none","0px","0px","normal","default"),Sr=Z.AnnotationPanelDisplay,xr=Sr.style);var y=parseFloat(Z.Utils.z285("z24")),b=Z.Utils.z285("z25"),w=Z.Utils.z285("z25NOALPHA"),E=Z.Utils.z248("div","annotationPanelBackground","inline-block","absolute","hidden",a+"px",f+"px","0px","0px","none","0px",b,"0px","0px","normal");Z.Utils.z398(E,y,w);var S=parseInt(Z.Utils.z285("z28"),10),x=Z.Utils.z248("div","labelPOITextBox","inline-block","absolute","hidden",s+"px",o+"px",e+"px",r+u+"px","none","0px","transparent none","0px","0px","nowrap"),T=document.createTextNode(Z.Utils.z285("z199"));x.appendChild(T),Z.Utils.z401(T,"black","verdana",S+"px","none","normal","normal","normal","normal","1em","left","none");var N=Z.Utils.z248("div","labelLabelTextBox","inline-block","absolute","hidden",s+"px",o+"px",e+"px",r+i+u+"px","none","0px","transparent none","0px","0px","nowrap"),C=document.createTextNode(Z.Utils.z285("z197"));N.appendChild(C),Z.Utils.z401(C,"black","verdana",S+"px","none","normal","normal","normal","normal","1em","left","none");var k=Z.Utils.z248("div","labelNoteTextBox","inline-block","absolute","hidden",s+"px",o+"px",e+"px",r+i*2+u+"px","none","0px","transparent none","0px","0px","nowrap"),L=document.createTextNode(Z.Utils.z285("z198"));k.appendChild(L),Z.Utils.z401(L,"black","verdana",S+"px","none","normal","normal","normal","normal","1em","left","none");var A=Z.Utils.z285("z9"),O=[{text:A,value:"0"}];Is=new Z.Utils.z253("poiList","",O,l,n,r,d,Gt),Us=new Z.Utils.z253("labelList","",O,l,n,r+i,d,Yt);if(Rs){qs=new Z.Utils.z253("noteList","",O,l,n,r+i*2,d,Zt);var M=Z.Utils.z285("z10"),_=parseInt(Z.Utils.z285("z22"),10),D=parseInt(Z.Utils.z285("z20"),10),P=Z.Utils.z254("noteTextArea",M,c+"px",h+"px",t+"px",r+i*3+3+"px",_+"px","solid","1px","auto",!0,"verdana",D+"px","none")}Z.AnnotationPanelDisplay.appendChild(E),Z.AnnotationPanelDisplay.appendChild(x),Z.AnnotationPanelDisplay.appendChild(N),Z.AnnotationPanelDisplay.appendChild(Is),Z.AnnotationPanelDisplay.appendChild(Us),qs&&(Z.AnnotationPanelDisplay.appendChild(k),Z.AnnotationPanelDisplay.appendChild(qs),Z.AnnotationPanelDisplay.appendChild(P)),Z.ViewerDisplay.appendChild(Z.AnnotationPanelDisplay),Z.Utils.z428(Is,Xs),Gt()}function qt(e,t,n,r,i){var s,o,u=15;switch(e){case"0":s=0,o=0;break;case"1":s=u,o=u;break;case"2":s=r-t-u,o=u;break;case"3":s=r-t-u,toolbar!=null?o=i-n-u:o=i-u;break;case"4":s=u,toolbar!=null?o=i-n-u:o=i-u;break;default:s=r-t-u,o=u}return new Z.Utils.Point(s,o)}function Rt(e,t,n){Vs.push({text:e,value:t,poiID:n}),$s.push({text:e,value:t,poiID:n});var r=document.getElementById("labelList");Z.Utils.z428(r,$s),r.selectedIndex=r.length-1}function Ut(e){var t=document.getElementById("labelList");if(t!=null){var n=Vs.indexOfObjectValue("value",e);n!=-1&&Vs.splice(n,1);var n=$s.indexOfObjectValue("value",e);if(n!=-1){$s.splice(n,1),Z.Utils.z428(t,$s);var r=t.length;r!=0&&(t.selectedIndex=n>r-1?r-1:n)}}}function zt(e){var e=Z.Utils.event(e);if(e){var t=Z.Utils.target(e);Z.browser!=Z.browsers.IE&&t&&Z.Utils.isStrVal(t.id)?_t(t,!0):Z.browser==Z.browsers.IE&&(t.parentNode.parentNode&&t.parentNode.parentNode.id.indexOf("hot")!=-1?_t(t.parentNode.parentNode,!0):t.parentNode.parentNode.parentNode&&t.parentNode.parentNode.parentNode.id.indexOf("hot")!=-1&&_t(t.parentNode.parentNode.parentNode,!0))}}function Wt(e){var e=Z.Utils.event(e);if(e){var t=Z.Utils.target(e),n=Z.Utils.relatedTarget(e);if(Z.browser!=Z.browsers.IE&&n&&Z.Utils.isStrVal(n.id)||Z.browser==Z.browsers.IE&&t.parentNode.parentNode.parentNode&&Z.Utils.isStrVal(t.parentNode.parentNode.parentNode.id))t.parentNode.parentNode&&t.parentNode.parentNode.id.indexOf("hot")!=-1?_t(t.parentNode.parentNode,!1):t.parentNode.parentNode.parentNode&&t.parentNode.parentNode.parentNode.id.indexOf("hot")!=-1&&_t(t.parentNode.parentNode.parentNode,!1)}}function Xt(e){}function Vt(e){}function $t(e){}function Jt(e){}function Kt(e){}function Qt(e){var t="0",e=Z.Utils.event(e);if(e)var n=Z.Utils.target(e),t=n.options[n.selectedIndex].value;if(Z.Utils.isStrVal(t)){var r=ls.indexOfObjectValue("id",t);r!=-1&&qn.zoomAndPanToView(ls[r].x,ls[r].y,ls[r].zoom/100)}}function Gt(e){var t="0",e=Z.Utils.event(e);if(e){var n=Z.Utils.target(e);t=n.options[n.selectedIndex].value}if(Z.Utils.isStrVal(t)){var r=Xs.indexOfObjectValue("value",t);if(r!=-1){var i=Z.imageW/2,s=Z.imageH/2,o;o=Xs[r].x;var u=o=="center"?i:parseFloat(o);o=Xs[r].y;var a=o=="center"?s:parseFloat(o);o=Xs[r].zoom;var f=o=="-1"?Z.fitZ:parseFloat(o);eo?qn.zoomAndPanToView(u,a,f/100):(eo=!0,wt())}}$s=en(Vs,t),Z.Utils.z428(Us,$s),qs&&(Ks=en(Js,t),Z.Utils.z428(qs,Ks),Zt()),Z.editMode&&(hs=parseInt(Us.options[Us.selectedIndex].value))}function Yt(e){var e=Z.Utils.event(e),t=Z.Utils.target(e),n=t.options[t.selectedIndex].value;if(n!==null){hs=parseInt(n),vs=!0;var r=ls.indexOfObjectValue("internalID",hs);if(r!=-1){var i=Z.imageW/2,s=Z.imageH/2,o;o=ls[r].x;var u=o=="center"?i:parseFloat(o);o=ls[r].y;var a=o=="center"?s:parseFloat(o);o=ls[r].zoom;var f=o=="-1"?Z.fitZ:parseFloat(o);Z.z375?wt():qn.zoomAndPanToView(u,a,f/100)}}}function Zt(e){var t=document.getElementById("noteTextArea");t.value="";var n="0",e=Z.Utils.event(e);if(e){var r=Z.Utils.target(e);n=r.options[r.selectedIndex].value}else Ks.length>0&&(n=Ks[0].value);if(Z.Utils.isStrVal(n)){var i=Ks.indexOfObjectValue("value",n);i!=-1&&(t.value=Ks[i].noteText)}}function en(e,t){var n=[];for(var r=0,i=e.length;r<i;r++)e[r].poiID==t&&n.push(e[r]);return n}function tn(e,t){if(Z.useCanvas){var n=e.internalID;!Z.z375||n!==hs?targetCtx=kr:targetCtx=Mr,targetCtx.save(),targetCtx.translate((e.x-Z.imageX)*Z.imageZ,(e.y-Z.imageY)*Z.imageZ);var r=Br/jr,i=t.constrainedScale*(e.xScale/100/(e.zoom/100))/r,s=t.constrainedScale*(e.yScale/100/(e.zoom/100))/r;targetCtx.scale(i,s);var o=e.polygonPts,u=e.x,a=e.y;targetCtx.lineWidth=bs;if(!e.fillVisible||!vs)targetCtx.lineWidth*=3;targetCtx.strokeStyle=e.lineColor,targetCtx.fillStyle=e.fillColor,targetCtx.beginPath();var f=o[0].x-u,l=o[0].y-a;targetCtx.moveTo(f,l);for(var c=1,h=o.length;c<h;c++){var p=o[c].x-u,d=o[c].y-a;targetCtx.lineTo(p,d)}if(vs||n!=hs||Ci&&ms==0)targetCtx.lineTo(f,l),targetCtx.closePath(),e.fillVisible&&(vs||n!=hs)&&(targetCtx.globalAlpha=.5,targetCtx.fill()),targetCtx.globalAlpha=1;targetCtx.stroke();var v=(i+s)/2;if(Z.z375&&e.internalID==hs)for(var c=0,h=o.length;c<h;c++){var p=o[c].x-u,d=o[c].y-a;nn(p,d,!vs&&c==0,v)}targetCtx.restore()}else ds||(Z.Utils.z405(Z.Utils.z285("z3")),ds=!0)}function nn(e,t,n,r){var i=Ts;r!==undefined&&r!==null&&(i/=r),Mr.lineWidth=ws,Mr.strokeStyle=Es,Mr.fillStyle=n?Ss:xs,Mr.beginPath(),Mr.arc(e,t,i,0,Math.PI*2,!1),Mr.closePath(),Mr.globalAlpha=.5,Mr.fill(),Mr.globalAlpha=1,Mr.stroke()}function rn(e,t){N(Ar);var n=new kt,r=ls.indexOfObjectValue("internalID",hs);if(r!=-1){tn(ls[r],n);var i=Z.imageX,s=Z.imageY,o=Z.imageZ,u=ls[r].polygonPts,a=u[u.length-1],f=(a.x-i)*o,l=(a.y-s)*o;vs||(Mr.lineWidth=ws,Mr.strokeStyle=Es,Mr.moveTo(f,l),Mr.lineTo(e,t),Mr.stroke())}}function sn(e){Nr&&N(Nr),Ar&&N(Ar);var t=new kt;for(var n=0,r=ls.length;n<r;n++)if(ls[n].media=="polygon"){var i=ls[n].x,s=ls[n].y;i>t.bounds.left&&i<t.bounds.right&&s>t.bounds.top&&s<t.bounds.bottom&&(e||!Z.z375||hs===null||hs!==n)&&tn(ls[n],t)}}function on(e,t,n){gs=!0,N(Ar);var r=new kt,i=ls.indexOfObjectValue("internalID",e);i!=-1&&(ls[i].polygonPts[t]=n,tn(ls[i],r))}function un(e,t){if(hs===null)an(null,!0,t);else{var n=ls.indexOfObjectValue("internalID",hs);n!=-1&&(ps=ls[n].polygonPts,ps===null?an(hs,!0,t):(ms=fn(e,t),vs?ms===null&&an(null,!0,t):ms===null?an(hs,!1,t):ms==0&&ls[n].polygonPts.length>2&&ln(hs)))}}function an(e,t,n){var r=!1,i=!1;if(e===null){var s=Ct("label"),o=Ct("labelExternal"),u="<LABEL ID='"+o.toString()+"' INTERNALID='"+s.toString()+"' NAME='Polygon "+s.toString()+"' MEDIATYPE='symbol' MEDIA='polygon' X='"+n.x.toString()+"' Y='"+n.y.toString()+"' ZOOM='"+"100"+"' XSCALE='100' YSCALE='100' URL='' URLTARGET='' ROLLOVER='0' CAPTION='' TOOLTIP='' LINECOLOR='ffffff' FILLCOLOR='999999' FILLVISIBLE='1' CAPTIONPOSITION='8' ><POLYGON><POINT X='"+n.x.toString()+"' Y='"+n.y.toString()+"' ></POINT></POLYGON></LABEL>",a=Z.Utils.z241(u),f=a.getElementsByTagName("LABEL"),l=new mt(f[0]);poiCurrentID=Is.options[Is.selectedIndex].value,l.poiInternalID=poiCurrentID,l.saved=!1,ls.push(l);var c=Is.options[Is.selectedIndex].value;hs=s,Rt(l.name,hs,c),i=!0,r=!0}else{var h=ls.indexOfObjectValue("internalID",e);if(h!=-1){var p=ls[h].polygonPts;p.push({x:n.x,y:n.y}),ls[h].polygonPts=p,ls[h].saved=!1}}var d=(n.x-Z.imageX)*Z.imageZ,v=(n.y-Z.imageY)*Z.imageZ;nn(d,v,r),vs=!1,i?wt():t&&sn()}function fn(e,t){var n=null,r=(Ts+1)/Z.imageZ;for(var i=0,s=ls.length;i<s;i++)if(ls[i].media=="polygon"&&ls[i].internalID==hs){var o=ls[i].polygonPts;for(var u=0,a=o.length;u<a;u++)Z.Utils.calculatePointsDistance(t.x,t.y,o[u].x,o[u].y)<r&&(n=u)}return n}function ln(e){N(Ar),vs=!0;var t=ls.indexOfObjectValue("internalID",e);if(t!=-1){var n=Z.Utils.getCenterOfPolygonPoints(ls[t].polygonPts);ls[t].x=n.x,ls[t].y=n.y,ls[t].caption="Polygon "+e.toString();var r=new kt;xt(ls[t],r)}}function cn(e){var t,n,r=Z.imageW/2,i=Z.imageH/2,s="<ZAS></ZAS>",o=Z.Utils.z241(s),u=o.getElementsByTagName("ZAS")[0],a=o.createElement("LABELSETUP");a.setAttribute("PANELPOSITION","2"),a.setAttribute("INITIALVISIBILITY","1"),a.setAttribute("MINSCALE","1"),a.setAttribute("MAXSCALE","1");var f=e.getElementsByTagName("LABELSETUP")[0];t=f.getAttribute("PANELPOSITION"),Z.Utils.isStrVal(t)&&a.setAttribute("PANELPOSITION",t),t=f.getAttribute("INITIALVISIBILITY"),Z.Utils.isStrVal(t)&&a.setAttribute("INITIALVISIBILITY",t),t=f.getAttribute("MINSCALE"),Z.Utils.isStrVal(t)&&!isNaN(parseFloat(t))&&parseFloat(t)>0&&a.setAttribute("MINSCALE",t),t=f.getAttribute("MAXSCALE"),Z.Utils.isStrVal(t)&&!isNaN(parseFloat(t))&&parseFloat(t)>0&&a.setAttribute("MAXSCALE",t),u.appendChild(a);var l=e.getElementsByTagName("POI");for(var c=0,h=l.length;c<h;c++){var p=o.createElement("POI");p.setAttribute("ID","0"),p.setAttribute("NAME",Z.Utils.z285("z16")),p.setAttribute("X","center"),p.setAttribute("Y","center"),p.setAttribute("ZOOM","-1"),p.setAttribute("USER",Z.Utils.z285("z17")),p.setAttribute("DATE",Z.Utils.z282());var d=l[c];t=d.getAttribute("ID"),Z.Utils.isStrVal(t)&&p.setAttribute("ID",t),t=d.getAttribute("NAME"),Z.Utils.isStrVal(t)&&p.setAttribute("NAME",t),t=d.getAttribute("X"),Z.Utils.isStrVal(t)&&!isNaN(parseFloat(t))&&p.setAttribute("X",t=="center"?r.toString():t),t=d.getAttribute("Y"),Z.Utils.isStrVal(t)&&!isNaN(parseFloat(t))&&p.setAttribute("Y",t=="center"?i.toString():t),t=d.getAttribute("ZOOM"),Z.Utils.isStrVal(t)&&!isNaN(parseFloat(t))&&p.setAttribute("ZOOM",t),t=d.getAttribute("USER"),Z.Utils.isStrVal(t)&&p.setAttribute("USER",t),t=d.getAttribute("DATE"),Z.Utils.isStrVal(t)&&p.setAttribute("DATE",t),u.appendChild(p);var v=l[c].getElementsByTagName("NOTES")[0];if(typeof v!="undefined"){var m=o.createElement("NOTES");p.appendChild(m);var g=v.getElementsByTagName("NOTE");for(var y=0,b=g.length;y<b;y++){var w=o.createElement("NOTE");w.setAttribute("ID","0"),w.setAttribute("NAME",Z.Utils.z285("z13")),w.setAttribute("TEXT",Z.Utils.z285("z14")),w.setAttribute("USER",Z.Utils.z285("z15")),w.setAttribute("DATE",Z.Utils.z282());var E=g[y];t=E.getAttribute("ID"),Z.Utils.isStrVal(t)&&w.setAttribute("ID",t),t=E.getAttribute("NAME"),Z.Utils.isStrVal(t)&&w.setAttribute("NAME",t),t=E.getAttribute("TEXT"),Z.Utils.isStrVal(t)&&w.setAttribute("TEXT",t),t=E.getAttribute("USER"),Z.Utils.isStrVal(t)&&w.setAttribute("USER",t),t=E.getAttribute("DATE"),Z.Utils.isStrVal(t)&&w.setAttribute("DATE",t),m.appendChild(w)}}if(ls.length>0){var S=o.createElement("LABELS");p.appendChild(S);for(var x=0,T=ls.length;x<T;x++){var N=o.createElement("LABEL");N.setAttribute("ID",ls[x].id),N.setAttribute("NAME",ls[x].name),N.setAttribute("MEDIATYPE",ls[x].mediaType),N.setAttribute("MEDIA",ls[x].media),N.setAttribute("X",ls[x].x),N.setAttribute("Y",ls[x].y),N.setAttribute("ZOOM",ls[x].zoom),N.setAttribute("XSCALE",ls[x].xScale),N.setAttribute("YSCALE",ls[x].yScale),N.setAttribute("URL",ls[x].url),N.setAttribute("URLTARGET",ls[x].urlTarget),N.setAttribute("ROLLOVER",ls[x].rollover),N.setAttribute("CAPTION",ls[x].caption),N.setAttribute("TOOLTIP",ls[x].tooltip),N.setAttribute("CAPTIONPOSITION",ls[x].captionPosition),N.setAttribute("USER",Z.Utils.z285("z12")),N.setAttribute("DATE",Z.Utils.z282());var C=ls[x].polygonPts;if(C!=null){var k=o.createElement("POLYGON");for(var L=0,A=C.length;L<A;L++){var O=o.createElement("POINT");O.setAttribute("X",C[L].x),O.setAttribute("Y",C[L].y),k.appendChild(O)}N.appendChild(k)}S.appendChild(N)}}}return o}function hn(e,t,n){qn.z448(),Z.imageZ=at(n);var r=st(e,t);Z.imageX=r.x,Z.imageY=r.y,qn.updateView(!0)}function pn(){Ui&&(Bi!=0||ji!=0||Fi!=0)&&(dn(Bi,ji,Fi),Ui=window.setTimeout(pn,Ri))}function dn(e,t,n){var r=!1,i=!1,s=!1;if(n!=0){var o=Br*(1+n),u=P(Dr,o);constrainedZoom=at(u);if(constrainedZoom!=Z.imageZ)var i=s=yn(constrainedZoom)}if(e!=0||t!=0){var a=parseFloat(tr.left)+e,f=parseFloat(tr.top)+t,l=ut(a,f);tr.left=l.x+"px",tr.top=l.y+"px",r=!0,s=!0}Ii%2==0&&(pt(),wt(),i&&C(),s&&k())}function vn(e,t,n,r,i){Qi++;var s=r/i,o=Qi*s,u=Z.Utils.z274(Z.imageX,e,o,r),a=Z.Utils.z274(Z.imageY,t,o,r),f=Z.Utils.z274(Z.imageZ,n,o,r),l=I(u,a,f),c=l.x,h=l.y;if(c!=parseFloat(tr.left)||h!=parseFloat(tr.top))syncNav=!0;var p=syncNav=yn(f);tr.left=c+"px",tr.top=h+"px",wt(),Qi%2==0&&(p&&C(),syncNav&&k()),Qi<i+1?Ki=window.setTimeout(function(){vn(e,t,n,r,i)},s):(gn(),qn.updateView(),qn.z427(!0))}function mn(){Ui&&(window.clearTimeout(Ui),Ui=null),Bi=0,ji=0,Fi=0,Ii=0}function gn(){Ki&&(window.clearTimeout(Ki),Ki=null)}function yn(e){var t=!1,n=H(Dr,e);if(n!=Br){Br=n,Fr=H(Pr,e);var r=n/jr,i=di*r,s=vi*r,o=(di-i)/2,u=(vi-s)/2;if(n<jr){var a=ot(o,u);tr.left=yi+a.x-o+"px",tr.top=wi+a.y-u+"px"}if(Z.useCanvas)ar.width=i+"px",ar.height=s+"px",ar.left=o+"px",ar.top=u+"px",Nr&&(Cr.width=i+"px",Cr.height=s+"px",Cr.left=o+"px",Cr.top=u+"px"),Ar&&(Or.width=i+"px",Or.height=s+"px",Or.left=o+"px",Or.top=u+"px"),i=Si*r,s=xi*r,o=Ti+Z.imageX*(1-r)*Z.imageZ,u=Ni+Z.imageY*(1-r)*Z.imageZ,ir.width=i+"px",ir.height=s+"px",ir.left=o+"px",ir.top=u+"px";else{S(ur,Dr,Jr,"centerOut",!1,"Scaling: non-canvas zoom"),tierBackfillW=Rr[Pr],tierBackfillH=Ur[Pr],rr.width=tierBackfillW,rr.height=tierBackfillH;var f=tierBackfillW*Fr,l=tierBackfillH*Fr,c=Z.imageX*e,h=Z.imageY*e;Ti=mi-c,Ni=gi-h,ir.left=Ti+"px",ir.top=Ni+"px",S(rr,Pr,Ir,"simple",!1,"Scaling: non-canvas zoom - backfill")}t=!0}return t}function bn(e){e?(is||wn(),is.elmt.style.display="inline-block"):is&&(is.elmt.style.display="none")}function wn(){var e=Z.Utils.z285("z58"),t=34,n=34,r=20,i=parseFloat(Z.viewerW)-(t+r),s=parseFloat(Z.viewerH)-(n+r),o=Z.Utils.z285("z57");is=new Z.Utils.Button("buttonFPCancel",e,null,null,null,null,t+"px",n+"px",i+"px",s+"px","mousedown",En,"z174","solid","1px",o,"0px","0px"),Z.ViewerDisplay.appendChild(is.elmt)}function En(){qn.toggleFullPageView(!1)}function Sn(){Z.Utils.addEventListener(document,"keydown",Fn),Z.Utils.addEventListener(document,"keyup",In),Z.mobileDevice?(Z.Utils.addEventListener(er,"touchstart",Ln),Z.Utils.addEventListener(er,"touchmove",An),Z.Utils.addEventListener(er,"touchend",On),Z.Utils.addEventListener(er,"touchcancel",Mn),Z.Utils.addEventListener(er,"gesturestart",_n),Z.Utils.addEventListener(er,"gesturechange",Dn),Z.Utils.addEventListener(er,"gestureend",Pn),document.getElementsByTagName("body")[0].onorientationchange=jn):(Z.Utils.addEventListener(Z.ViewerDisplay,"mouseover",xn),Z.Utils.addEventListener(Z.ViewerDisplay,"mouseout",kn),Z.Utils.addEventListener(Z.ViewerDisplay,"mousemove",Z.Utils.preventDefault),Z.Utils.addEventListener(er,"mousedown",Tn),Z.Utils.addEventListener(er,"mousemove",Z.Utils.preventDefault)),Z.Utils.addEventListener(rr,"contextmenu",Z.Utils.preventDefault),Z.Utils.addEventListener(ur,"contextmenu",Z.Utils.preventDefault),vr&&Z.Utils.addEventListener(vr,"contextmenu",Z.Utils.preventDefault),yr&&Z.Utils.addEventListener(yr,"contextmenu",Z.Utils.preventDefault)}function xn(e){var t=Z.Utils.z353(Z.Utils.target(Z.Utils.event(e))),n=Z.Utils.z353(Z.Utils.relatedTarget(e));if(!t||!n)Z.ToolbarDisplay&&Z.toolbarVisible>1&&Z.Toolbar.show(!0),Z.NavigatorDisplay&&Z.navigatorVisible>1&&Z.Navigator.setVisibility(!0),ki=null}function Tn(e){var t=window.setTimeout(function(){qn.z448()},1);if(Z.Utils.z324(e))return;Ci=!0;var n=Z.Utils.getMousePosition(e);Li=new Z.Utils.Point(n.x,n.y),er.mouseXPrior=n.x,er.mouseYPrior=n.y;if(Z.z375&&hs!==null){var r=qn.z281(e,Li,Dr,Br);ms=fn(e,r)}return Z.Utils.addEventListener(document,"mousemove",Nn),Z.Utils.addEventListener(er,"mouseup",Cn),Z.Utils.addEventListener(document,"mouseup",Cn),!1}function Nn(e){var e=Z.Utils.event(e),t=Z.Utils.getMousePosition(e);Ai=new Z.Utils.Point(t.x,t.y);var n=qn.z281(e,Ai,Dr,Br);if(Z.z375&&ms!==null&&Ci)on(hs,ms,n);else if(Z.z375&&!vs&&(!Ci||Ci&&ms!==null)){var r=(n.x-Z.imageX)*Z.imageZ,i=(n.y-Z.imageY)*Z.imageZ;rn(r,i)}else{if(!Z.mousePan)return;var s=t.x-er.mouseXPrior,o=t.y-er.mouseYPrior;if(!isNaN(s)&&!isNaN(o)){var u=parseFloat(tr.left)+s,a=parseFloat(tr.top)+o,f=ut(u,a);tr.left=f.x+"px",tr.top=f.y+"px",er.mouseXPrior=t.x,er.mouseYPrior=t.y;if(Z.Navigator){var l=qn.z217(f);Z.Navigator.z417(l)}}}return!1}function Cn(e){Ci=!1,document.mousemove=null,document.mouseup=null,Z.Utils.removeEventListener(document,"mousemove",Nn),Z.Utils.removeEventListener(er,"mouseup",Cn),Z.Utils.removeEventListener(document,"mouseup",Cn);var e=Z.Utils.event(e),t=Z.Utils.getMousePosition(e),n;ki?n=ki:n=new Z.Utils.Point(t.x,t.y);var r=Z.Utils.calculatePointsDistance(Li.x,Li.y,n.x,n.y,2);if(r<4){var i=qn.z281(e,n,Dr,Br);if(Z.clickZoom&&!Z.z375)var s=window.setTimeout(function(){qn.zoomAndPanToView(i.x,i.y,i.z)},1);else Z.clickPan&&!Z.z375?qn.zoomAndPanToView(i.x,i.y,Z.imageZ):Z.z375&&(un(e,i),vs||Z.Utils.addEventListener(document,"mousemove",Nn))}else{if(Z.z375&&(gs||ms===null&&!vs)){ms=null,gs=!1;var o=new kt,u=ls.indexOfObjectValue("internalID",hs);if(u!=-1){var a=Z.Utils.getCenterOfPolygonPoints(ls[u].polygonPts);ls[u].x=a.x,ls[u].y=a.y,N(Ar),xt(ls[u],o),vs||Z.Utils.addEventListener(document,"mousemove",Nn)}}Ai=null,Z.mousePan&&qn.updateView()}ki&&(Z.ToolbarDisplay&&Z.toolbarVisible>1&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&Z.navigatorVisible>1&&Z.Navigator.setVisibility(!1))}function kn(e){var t=Z.Utils.z353(Z.Utils.target(e)),n=Z.Utils.z353(Z.Utils.relatedTarget(Z.Utils.event(e)));if(!t||!n)if(!Ci)Z.ToolbarDisplay&&Z.toolbarVisible>1&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&Z.navigatorVisible>1&&Z.Navigator.setVisibility(!1);else{var r=Z.Utils.getMousePosition(e);ki=new Z.Utils.Point(r.x,r.y)}}function Ln(e){qn.z448();var e=Z.Utils.event(e),t=Z.Utils.getFirstTouch(e);if(t&&!Oi){_i=!1;var n=t.target,r=new Z.Utils.Point(t.pageX,t.pageY);Li=new Z.Utils.Point(r.x,r.y),er.mouseXPrior=r.x,er.mouseYPrior=r.y;if(Z.z375){Ci=!0;if(hs!==null){var i=qn.z281(e,Li,Dr,Br);ms=fn(e,i)}}}}function An(e){var e=Z.Utils.event(e);e.preventDefault();var t=Z.Utils.getFirstTouch(e),n=new Z.Utils.Point(t.pageX,t.pageY);Ai=new Z.Utils.Point(n.x,n.y);var r=qn.z281(e,Ai,Dr,Br);if(Z.z375&&ms!==null&&Ci)on(hs,ms,r);else{if(!Z.mousePan)return;if(t&&!Oi&&!_i){var i=t.target,s=n.x-er.mouseXPrior,o=n.y-er.mouseYPrior;if(!isNaN(s)&&!isNaN(o)){var u=parseFloat(tr.left)+s,a=parseFloat(tr.top)+o,f=ut(u,a);tr.left=f.x+"px",tr.top=f.y+"px",er.mouseXPrior=n.x,er.mouseYPrior=n.y;if(Z.Navigator){var l=qn.z217(f);Z.Navigator.z417(l)}}}}return!1}function On(e){var e=Z.Utils.event(e);if(!Oi&&!_i){Ci=!1,typeof Ai!="undefined"&&Ai!==null?dragPtEnd=Ai:dragPtEnd=Li;var t=Z.Utils.calculatePointsDistance(Li.x,Li.y,dragPtEnd.x,dragPtEnd.y,2);if(t<4){var n=qn.z281(e,dragPtEnd,Dr,Br);Z.clickZoom&&!Z.z375?qn.zoomAndPanToView(n.x,n.y,n.z):Z.clickPan&&!Z.z375?qn.zoomAndPanToView(n.x,n.y,Z.imageZ):Z.z375&&un(e,n)}else{if(Z.z375&&(gs||ms===null&&!vs)){ms=null,gs=!1;var r=new kt,i=ls.indexOfObjectValue("internalID",hs);if(i!=-1){var s=Z.Utils.getCenterOfPolygonPoints(ls[i].polygonPts);ls[i].x=s.x,ls[i].y=s.y,N(Ar),xt(ls[i],r),vs||Z.Utils.addEventListener(document,"mousemove",Nn)}}Z.mousePan&&qn.updateView()}Ai=null}}function Mn(e){var e=Z.Utils.event(e);if(!Oi&&!_i){Ci=!1;var t=!1;typeof Ai!="undefined"&&Ai!==null?dragPtEnd=Ai:dragPtEnd=Li;var n=Z.Utils.calculatePointsDistance(Li.x,Li.y,dragPtEnd.x,dragPtEnd.y,2);if(n<4){var r=qn.z281(e,dragPtEnd,Dr,Br);Z.clickZoom&&!Z.z375?qn.zoomAndPanToView(r.x,r.y,r.z):Z.clickPan&&!Z.z375?qn.zoomAndPanToView(r.x,r.y,Z.imageZ):Z.z375&&un(e,r)}else{if(Z.z375&&(gs||ms===null&&!vs)){ms=null,gs=!1;var i=new kt,s=ls.indexOfObjectValue("internalID",hs);if(s!=-1){var o=Z.Utils.getCenterOfPolygonPoints(ls[s].polygonPts);ls[s].x=o.x,ls[s].y=o.y,N(Ar),xt(ls[s],i),vs||Z.Utils.addEventListener(document,"mousemove",Nn)}}Z.mousePan&&qn.updateView()}Ai=null}}function _n(e){qn.z448();var e=Z.Utils.event(e);Dn(e),Oi||(Oi=window.setInterval(Hn,Di))}function Dn(e){var e=Z.Utils.event(e);e.preventDefault(),Mi=Math.round(e.scale*100)/100}function Pn(e){Oi&&(window.clearInterval(Oi),_i=!0,Oi=null),Z.mousePan&&qn.updateView()}function Hn(e){if(!Z.mousePan)return;var t=Bn(Dr,jr,Mi),n=at(t);t!=Z.imageZ&&yn(n)}function Bn(e,t,n){var r=t*n,i=P(e,r);return i}function jn(e){Z.fullPage&&(Z.ToolbarDisplay&&Z.toolbarVisible>1&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&Z.navigatorVisible>1&&Z.Navigator.setVisibility(!1),qn.toggleFullPageView(!1),qn.toggleFullPageView(!0),Z.ToolbarDisplay&&Z.toolbarVisible>1&&Z.Toolbar.show(!0),Z.NavigatorDisplay&&Z.navigatorVisible>1&&Z.Navigator.setVisibility(!0))}function Fn(e){if(!Z.keys)return;e.altKey||gn();var e=Z.Utils.event(e);switch(e.keyCode){case 90:qn.zoom("out");break;case 17:qn.zoom("out");break;case 65:qn.zoom("in");break;case 16:qn.zoom("in");break;case 37:qn.pan("left");break;case 38:qn.pan("up");break;case 40:qn.pan("down");break;case 39:qn.pan("right");break;case 27:Z.fullPage?qn.toggleFullPageView(!1):qn.reset()}}function In(e){if(!Z.keys)return;var e=Z.Utils.event(e),t=e.keyCode;t==90||t==17||t==65||t==16?qn.zoom("stop"):t==37||t==39?qn.pan("horizontalStop"):(t==38||t==40)&&qn.pan("verticalStop")}var qn=this,Rn=!1,Un=-1,zn=0,Wn=0,Xn=256,Vn=0,$n=256,Jn,Kn=parseFloat(Z.Utils.z285("z116")),Qn=Kn/2,Gn=parseInt(Z.Utils.z285("z117"),10),Yn=Z.toolbarVisible==1?Z.toolbarH:0,Zn,er,tr,nr,rr,ir,sr,or,ur,ar,fr,lr,cr,hr,pr,dr,vr,mr,gr,yr,br,wr,Er,Sr,xr,Tr,Nr,Cr,kr,Lr,Ar,Or,Mr;s();var _r=1,Dr=0,Pr=0,Hr=!1,Br,jr,Fr,Ir=[],qr=[],Rr=[],Ur=[],zr=[],Wr=[],Xr=[],Vr=[],$r=[],Jr=[],Kr=[],Qr=[],Gr=[],Yr=[],Zr=[],ei=[],ti=[],ni=0,ri=new Z.NetConnector,ii=parseInt(Z.Utils.z285("z40"),10),si=parseInt(Z.Utils.z285("z39"),10),oi=parseInt(Z.Utils.z285("z38"),10),ui=parseInt(Z.Utils.z285("z37"),10),ai=parseInt(Z.Utils.z285("z36"),10),fi=parseFloat(Z.Utils.z285("z95"),10),li,ci,hi,pi,di,vi,mi,gi,yi,bi,wi,Ei,Si,xi,Ti,Ni;li=Z.viewerW,ci=Z.viewerH,hi=pi=0,ci-=Yn,Z.toolbarPosition==0&&(pi+=Yn);var Ci=!1,ki=null,Li,Ai,Oi=null,Mi=null,_i=!1,Di=parseInt(Z.Utils.z285("z63"),10),Pi=parseFloat(Z.Utils.z285("z134"))*Z.zoomSpeed;Z.mobileDevice&&(Pi/=2);var Hi=Math.round(parseFloat(Z.Utils.z285("z97"))*Z.panSpeed),Bi=0,ji=0,Fi=0,Ii=0,qi=0,Ri=parseInt(Z.Utils.z285("z135"),10),Ui,zi,Wi,Xi=parseFloat(Z.Utils.z285("z54"))*Z.fadeInSpeed,Vi,$i=parseFloat(Z.Utils.z285("z137")),Ji=parseFloat(Z.Utils.z285("z136"));Z.mobileDevice&&(Ji/=2);var Ki=null,Qi=0,Gi,Yi,Zi,es,ts,ns,rs,is,ss;if(Z.Utils.isStrVal(Z.watermarkPath))var os,us,as=[],fs=[];if(Z.Utils.isStrVal(Z.hotspotPath)||Z.Utils.isStrVal(Z.annotationPath)){var ls=[],cs=[],hs=null,ps=null,ds=!1,vs=!0,ms=null,gs=!1,ys=new Z.NetConnector,bs=Z.Utils.z285("z105"),ws=Z.Utils.z285("z45"),Es=Z.Utils.z285("z47"),Ss=Z.Utils.z285("z55"),xs=Z.Utils.z285("z115"),Ts=parseInt(Z.Utils.z285("z46"),10),Ns=parseInt(Z.Utils.z285("z64"),10),Cs=parseInt(Z.Utils.z285("z82"),10),ks=parseInt(Z.Utils.z285("z80"),10),Ls=parseInt(Z.Utils.z285("z65"),10),As=parseInt(Z.Utils.z285("DEFAULT_MINHOTSPOTCAPTIONPADDING"),10),Os=parseInt(Z.Utils.z285("DEFAULT_MAXHOTSPOTCAPTIONPADDING"),10);Z.mobileDevice&&(Ts*=2);if(Z.Utils.isStrVal(Z.hotspotPath))var Ms,_s,Ds,Ps,Hs,Bs=[];else if(Z.Utils.isStrVal(Z.annotationPath))var js,Fs,Is,qs,Rs,Us,zs,Ws,Xs=[],Vs=[],$s=[],Js=[],Ks=[],Qs=[],Gs=[],Ys=[],Zs=[],eo=!1}o(li,ci,hi,pi);if(Z.imageProperties==null){var to=new Z.NetConnector;u(to)}else{var no=Z.Utils.z241(Z.imageProperties);a(no)}this.z284=function(){return r()},this.getW=function(){return di},this.getH=function(){return vi},this.z286=function(){return _r},this.z294=function(){return Jn},this.z287=function(){return Dr},this.getTierScale=function(){return Br},this.getX=function(){var e=parseFloat(tr.left)-yi,t=qn.getZoom(),n=Z.imageX-e/t;return n},this.getY=function(){var e=parseFloat(tr.top)-wi,t=qn.getZoom(),n=Z.imageY-e/t;return n},this.getZoom=function(){var e=P(Dr,Br);return e},this.z293=function(){return Kn},this.z292=function(){return Qn},this.z296=function(){return Gn},this.z291=function(){return Rr.join(",")},this.z288=function(){return Ur.join(", ")},this.z290=function(){return Xr.join(", ")},this.z295=function(){var e=$r.join(", ")==""?"Current view loading complete":$r.join(", ");return e},this.setSizeAndPosition=function(e,t,n,r){o(e,t,n,r)},this.setHotspotPath=function(e){yr&&(Z.hotspotPath=Z.Utils.z392(e))},this.loadImageProperties=function(e){u(e)},this.z366=function(e){a(e)},this.updateView=function(e){if(typeof e!="undefined"&&e===!0||Br!=jr||Z.imageZ!=qi||parseFloat(tr.left)!=yi||parseFloat(tr.top)!=wi){y(e),qi=qn.getZoom();var t=!1;e||Br!=jr||Z.imageZ!=qi||!Rn?(b(),w(),S(rr,Pr,Ir,"simple",!1,"2. Updating view: changing tier - backfill"),!e&&Gn>0&&(t=!0)):Z.debug==2&&Z.Utils.trace("2. Updating view: no change to tier."),E(),S(ur,Dr,Jr,"centerOut",t,"3. Updating view: prior to loading of any new tiles"),T($r,J,0),pt(),wt(),C(),k()}},this.z279=function(e,t,n,r){var i;if(Z.tileSource=="ZoomifyImageFolder"){var s=n*zr[e]+t;for(var o=0;o<e;o++)s+=Xr[o];var u=Math.floor(s/$n);i=Z.imagePath+"/"+"TileGroup"+u+"/"+e+"-"+t+"-"+n+".jpg",i=Z.Utils.z215(i)}else if(Z.tileSource=="ZoomifyImageFile"){var a=0,f=0,l,c,h,p,d,v,m,g,i="offsetLoading";for(var y=_r-1;y>e;y--)a+=Xr[y];a+=n*zr[e]+t,l=Math.floor(a/Xn),f=a-1==-1?0:a-1,c=Math.floor(f/Xn);if(Gr[l]==undefined||Gr[l]=="offsetLoading"||Gr[c]==undefined||Gr[c]=="offsetLoading"){var b=R(e,t,n);Zr.push(b+","+e+","+t+","+n+","+r),Z.debug==2&&Z.Utils.trace("Tile recorded for load retry after load chunk: "+b+","+e+","+t+","+n+","+r),Gr[l]==undefined&&(Gr[l]="offsetLoading",d=Wn+Xn*l*8,v=d+Xn*8,U(d,v,b)),Gr[c]==undefined&&(Gr[c]="offsetLoading",m=Wn+Xn*c*8,g=m+Xn*8,U(m,g,b))}else{var w=Math.floor(Gr[l][0]),E=Math.floor(Gr[c][0]),S=Gr[c][1],x=Gr[l][1];p=9*(f%Xn);var T=Math.floor(parseFloat(S.substring(p,p+9)));h=9*(a%Xn);var N=Math.floor(parseFloat(x.substring(h,h+9))),C=a==0?Wn+Vn*8:E+T,k=w+N;k-C>0?i=Z.tileHandlerPathFull+"?file="+Z.imagePath+"&requestType=0&begin="+C.toString()+"&end="+k.toString()+"&vers="+Un.toString()+"&head="+zn.toString():i="skipTile:"+e+"-"+t+"-"+n}}return i},this.z367=function(e){var t=parseInt(e.documentElement.getAttribute("BEGIN"),10),n=e.documentElement.getAttribute("REPLYDATA"),r=Yr[t],i=Math.floor((t-Wn)/8/Xn);Gr[i]=new Array,Gr[i]=n.split(",",2),z(r)},this.z365=function(e){var t=e.getElementsByTagName("HOTSPOTSETUP")[0],n=t.getAttribute("CHOICELIST");_s=Z.Utils.isStrVal(n)?n:Z.Utils.z285("z66");var r=t.getAttribute("LISTSOURCE"),i=Z.Utils.isStrVal(r)?r:Z.Utils.z285("z67"),s=t.getAttribute("LISTTITLE"),o=Z.hotspotListTitle!==null?Z.hotspotListTitle:Z.Utils.isStrVal(s)?s:Z.Utils.z285("z68"),u=Z.Utils.z285("z70"),a=t.getAttribute("INITIALVISIBILITY");u?Ds=a!="0"&&a!="hide":Ds=a!="1"&&a!="show";var f=parseFloat(t.getAttribute("MINSCALE")),l=parseFloat(t.getAttribute("MAXSCALE"));Ps=isNaN(f)?1:f,Hs=isNaN(l)?1:l;var c=[];Bs=[],cs=[];var h=!1,p=-1,d=e.getElementsByTagName("HOTSPOT");for(var v=0,m=d.length;v<m;v++){var g=new mt(d[v]);p++,g.internalID=p;if(Pt(g)){ls.push(g);if(d[v].getAttribute("MEDIATYPE")!="symbol"){var y=d[v].getAttribute("MEDIA");Z.Utils.isStrVal(y)&&c.push(y)}else d[v].getAttribute("MEDIA")!="polygon"&&(h=!0);var b=unescape(d[v].getAttribute("ID")),w=unescape(d[v].getAttribute("NAME")),E=unescape(d[v].getAttribute("CAPTION")),S=unescape(d[v].getAttribute("TOOLTIP"));switch(i){case"CAPTION":Bs.push({text:E,value:b});break;case"TOOLTIP":Bs.push({text:S,value:b});break;default:Bs.push({text:w,value:b})}}}Z.debug==2&&h&&Z.Utils.trace(Z.Utils.z285("z141")),br.visibility=Ds?"visible":"hidden",Ot(o,Bs),Et(),c.sort(),c=Z.Utils.z391(c),gt(c)},this.createHotspot=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){var d="<HOTSPOT ID='"+e+"' NAME='"+t+"' MEDIATYPE='"+n+"' MEDIA='"+r+"' X='"+i.toString()+"' Y='"+s.toString()+"' ZOOM='"+o.toString()+"' XSCALE='"+u.toString()+"' YSCALE='"+a.toString()+"' URL='"+f+"' URLTARGET='"+l+"' ROLLOVER='"+c+"' CAPTION='"+h+"' TOOLTIP='"+p+"'></HOTSPOT>",v=Z.Utils.z241(d),m=v.getElementsByTagName("HOTSPOT"),g=new mt(m[0]);g.internalID=Ct("hotspot");var y=cs.indexOfObjectValueSubstring("src",g.media),r=cs[y];if(y!=-1){var b=new Image;b.src=g.media;var w=b.width,E=b.height;b=null,g.image=r.cloneNode(!1),g.iW=w,g.iH=E;var S=new kt;xt(g,S)}else{var x=(new Date).getTime();yt(g.media,x)}ls.push(g),Mt(g.name,g.internalID)},this.modifyHotspot=function(){},this.setHotspotsVisibility=function(e){br.visibility=e?"visible":"hidden"},this.setHotspotsVisibilityByFilter=function(e,t,n){if(ls.length>0)if(yr&&yr.childNodes.length>0){for(var r=0,i=ls.length;r<i;r++)if(ls[r][e]==t){var s=ls[r].id,o=document.getElementById("hot"+s);o!=null&&_t(o,n)}}else var u=window.setTimeout(function(){setHotspotsVisibilityByFilter(e,t,n)},100)},this.setHotspotVisibilityByID=function(e,t){if(ls.length>0)if(yr&&yr.childNodes.length>0){var n=ls.indexOfObjectValue("id",e);if(n!=-1){var r=ls[n].id,i=document.getElementById("hot"+r);i!=null&&_t(i,t)}}else var s=window.setTimeout(function(){setHotspotVisibilityByID(e,t)},100)},this.z364=function(e){js=Bt(e);var t,n=-1,r=js.getElementsByTagName("LABELSETUP")[0];Fs=r.getAttribute("PANELPOSITION"),Ds=r.getAttribute("INITIALVISIBILITY")!="0",Rs=r.getAttribute("NOTEVISIBILITY")!="0",Ps=parseFloat(r.getAttribute("MINSCALE")),Hs=parseFloat(r.getAttribute("MAXSCALE")),Xs=[],Js=[],Ks=[],Vs=[],$s=[],cs=[];var i=[],s=!1,o=js.getElementsByTagName("POI");for(var u=0,a=o.length;u<a;u++){var f=unescape(o[u].getAttribute("ID")),l=unescape(o[u].getAttribute("NAME")),c=unescape(o[u].getAttribute("X")),h=unescape(o[u].getAttribute("Y")),p=unescape(o[u].getAttribute("ZOOM"));Xs.push({text:l,value:f,x:c,y:h,zoom:p});var d=o[u].getElementsByTagName("NOTES")[0];if(d){var v=d.getElementsByTagName("NOTE");for(var m=0,g=v.length;m<g;m++){var y=unescape(v[m].getAttribute("ID")),b=unescape(v[m].getAttribute("NAME")),w=unescape(v[m].getAttribute("TEXT"));Js.push({text:b,value:y,noteText:w,poiID:f})}}var E=o[u].getElementsByTagName("LABELS")[0];if(E){var S=E.getElementsByTagName("LABEL");for(var x=0,T=S.length;x<T;x++){var N=unescape(S[x].getAttribute("NAME"));n++,S[x].setAttribute("INTERNALID",n.toString()),Vs.push({text:N,value:n,poiID:f});if(S[x].getAttribute("MEDIA")!="polygon"){if(S[x].getAttribute("MEDIATYPE")=="symbol"){var C=S[x].getAttribute("MEDIA"),k;switch(C){case"circle":k=Z.annotationPath+"/"+"circle.png";break;case"square":k=Z.annotationPath+"/"+"square.png";break;case"triangle":k=Z.annotationPath+"/"+"triangle.png";break;case"arrowDown":k=Z.annotationPath+"/"+"arrowDown.png";break;case"arrowDownLeft":k=Z.annotationPath+"/"+"arrowDownLeft.png";break;case"arrowLeft":k=Z.annotationPath+"/"+"arrowLeft.png";break;case"arrowUpLeft":k=Z.annotationPath+"/"+"arrowUpLeft.png";break;case"arrowUp":k=Z.annotationPath+"/"+"arrowUp.png";break;case"arrowUpRight":k=Z.annotationPath+"/"+"arrowUpRight.png";break;case"arrowRight":k=Z.annotationPath+"/"+"arrowRight.png";break;case"arrowRightDown":k=Z.annotationPath+"/"+"arrowRightDown.png";break;case"lineHorizontal":k=Z.annotationPath+"/"+"lineHorizontal.png";break;case"lineVertical":k=Z.annotationPath+"/"+"lineVertical.png";break;default:k=Z.annotationPath+"/"+"noSubstitutePlaceholder.png"}S[x].setAttribute("MEDIA",k),s=!0}i.push(S[x].getAttribute("MEDIA"))}var L=new mt(S[x]);ls.push(L)}}}jt(),br.visibility=Ds?"visible":"hidden",It(),i.sort(),i=Z.Utils.z391(i),gt(i)},this.togglePolygonEditing=function(e){hs!==null&&(Z.z375=e?e:!Z.z375,ps=null,ms=null,gs=!1,vs=!0,sn(!0));var t=document.getElementById("buttonEditMode");if(t)var n=t.style;var r=document.getElementById("buttonEditDelete");if(r)var i=r.style;var s=document.getElementById("buttonEditCancel");if(s)var o=s.style;var u=document.getElementById("buttonEditSave");if(u)var a=u.style;n&&o&&i&&a&&(Z.z375?(Z.Toolbar.z210(t,"hidden"),Z.Toolbar.z210(r,"visible"),Z.Toolbar.z210(s,"visible"),Z.Toolbar.z210(u,"visible")):(Z.Toolbar.z210(t,"visible"),Z.Toolbar.z210(r,"hidden"),Z.Toolbar.z210(s,"hidden"),Z.Toolbar.z210(u,"hidden"))),Z.mobileDevice&&Z.z375&&Z.progressVisible?Z.Toolbar.hideProgress():Z.progressVisible&&Z.Toolbar.z406(),Z.z375?(Qs=Z.Utils.clone("hotspots",ls,Qs),Ys=Z.Utils.clone("labels",Vs,Ys)):(Z.Utils.removeEventListener(document,"mousemove",Nn),e!=0&&(Z.Utils.z405(Z.Utils.z285("z6")),this.saveAnnotations()))},this.deleteCurrentLabel=function(){Ut(hs);var e=ls.indexOfObjectValue("internalID",hs);e!=-1&&(ls.splice(e,1),ls.length>0?hs=parseInt(Us.options[Us.selectedIndex].value):hs=null,ps=null,ms=null,wt())},this.cancelLabelEdits=function(){Z.Utils.z405(Z.Utils.z285("z2")),ls=Z.Utils.clone("hotspots",Qs,ls),Vs=Z.Utils.clone("labels",Ys,Vs);var e=Is.options[Is.selectedIndex].value;$s=en(Vs,e),Z.Utils.z428(Us,$s),hs=parseInt(Us.options[Us.selectedIndex].value),wt(),this.togglePolygonEditing(!1)},this.saveAnnotations=function(){js=cn(js);if(Z.Utils.isStrVal(Z.saveHandlerPath))if(Z.saveHandlerPath.indexOf(Z.Utils.z285("z4"))!=-1)Z.Utils.z405(Z.Utils.z285("z5"));else{var e=new Z.NetConnector;e.postXML(Z.saveHandlerPath,js)}else Z.Utils.z405(Z.Utils.z285("z171"));this.togglePolygonEditing(!1)},this.setAllHotspotsSaved=function(){for(var e=0,t=ls.length;e<t;e++)ls[e].saved==1},this.setView=function(e,t,n){if(e==undefined||e==null)e=Z.imageW/2;if(t==undefined||t==null)t=Z.imageH/2;n==undefined||n==null?n=Z.fitZ:n>1&&(n/=100),hn(e,t,n)},this.zoom=function(e){switch(e){case"out":Fi>=0&&(Fi-=Pi);break;case"in":Fi<=0&&(Fi+=Pi);break;case"stop":Fi=0}Z.z454=Fi==0?"stop":Fi>0?"in":"out",Fi!=0?Ui||((Fi<0&&Z.imageZ>Z.minZ||Fi>0&&Z.imageZ<Z.maxZ)&&qn.z427(!1),Z.useCanvas||N(vr),Ui=window.setTimeout(pn,Ri)):(mn(),qn.updateView(),qn.z427(!0))},this.pan=function(e){switch(e){case"left":Bi<=0&&(Bi+=Hi);break;case"up":ji<=0&&(ji+=Hi);break;case"down":ji>=0&&(ji-=Hi);break;case"right":Bi>=0&&(Bi-=Hi);break;case"horizontalStop":Bi=0;break;case"verticalStop":ji=0;break;case"stop":Bi=0,ji=0}Z.z362=Bi==0?"stop":Bi>0?"left":"right",Z.z363=ji==0?"stop":ji>0?"up":"down",zi=Z.imageX*P(Dr,1),Wi=Z.imageY*P(Dr,1),Bi!=0||ji!=0?Ui||(qn.z427(!1),Z.useCanvas||N(vr),Ui=window.setTimeout(pn,Ri)):(mn(),qn.updateView(),qn.z427(!0))},this.zoomAndPanToView=function(e,t,n,r,i){qn.z448();if(typeof r=="undefined"||r===null)r=$i;if(typeof i=="undefined"||i===null)i=Ji;qn.z427(!1),Z.useCanvas||N(vr),e==null&&(e=Z.initialX),t==null&&(t=Z.initialY),n==null?n=Z.initialZ:n>1&&n<2&&n%1!=0?n=1:n>1?n/=100:n>.99&&n<1&&n*100%1!=0&&(n=1);var s=st(e,t,n);e=s.x,t=s.y,n=at(n),Qi=0,vn(e,t,n,r,i)},this.z448=function(e){mn(),gn(),e||qn.updateView()},this.z394=function(e){var t=yn(e);t&&(pt(),wt(),k())},this.reset=function(){qn.zoomAndPanToView(Z.initialX,Z.initialY,Z.initialZ)},this.toggleFullPageViewExternal=function(){ss=!0,qn.toggleFullPageView()},this.toggleFullPageView=function(e){qn.z448(),Z.fullPage=e?e:!Z.fullPage;var t=document.body,n=t.style,r=document.documentElement.style,i=Z.ViewerDisplay.style,s=null,u=null;if(Z.fullPage){Gi=n.width,Yi=n.height,Zi=n.overflow,es=r.overflow,ts=i.backgroundColor,ns=i.position,rs=i.zIndex;var a;Z.mobileDevice?(a=Z.Utils.getWindowSize(),n.width=a.x,n.height=a.y):(n.width="100%",n.height="100%"),n.overflow="hidden",r.overflow="hidden",i.backgroundColor=Z.Utils.z285("z59"),i.position="fixed",i.zIndex="99999999",a=Z.Utils.getWindowSize(),s=a.x,u=a.y}else{n.width=Gi,n.height=Yi,n.overflow=Zi,r.overflow=es,i.backgroundColor=ts,i.position="relative",i.zIndex=rs;var f=Z.Utils.getElementStyle(Z.pageContainer);s=parseFloat(f.width),u=parseFloat(f.height),isNaN(s)&&(s=Z.ViewerDisplay.clientWidth),isNaN(u)&&(u=Z.ViewerDisplay.clientHeight),ss=!1}Z.viewerW=s,Z.viewerH=u,o(s,u),bn(ss);if(Z.ToolbarDisplay&&Z.Toolbar.z284()){Z.toolbarCurrentW=Z.toolbarW==-1?s:Z.toolbarW;var l=Z.toolbarPosition==1?Z.viewerH-Z.toolbarH:0;Z.Toolbar.setSizeAndPosition(Z.toolbarCurrentW,null,null,l)}Z.NavigatorDisplay&&Z.Navigator.z284()&&Z.Navigator.setSizeAndPosition(Z.navigatorW,Z.navigatorH,Z.navigatorL-1,Z.navigatorT-1),d(),Z.imageZ=at(Z.imageZ);var c=parseFloat(tr.left),h=parseFloat(tr.top),p=ut(c,h);tr.left=p.x+"px",tr.top=p.y+"px",qn.updateView(!0)},this.z424=function(){var e=Z.ViewerDisplay.firstChild.childNodes[0].style;e.display=e.display=="none"?"inline-block":"none"},this.z426=function(){var e=Z.ViewerDisplay.firstChild.childNodes[1].style;e.display=e.display=="none"?"inline-block":"none"},this.z427=function(e){if(mr){var t=e?e:mr.display!="inline-block";mr.display=t?"inline-block":"none"}},this.z425=function(){Z.constrainPan=!Z.constrainPan;if(Z.constrainPan){var e=parseFloat(ar.left),t=parseFloat(ar.top),n=ut(e,t);tr.left=n.x+"px",tr.top=n.y+"px",qn.updateView()}},this.z281=function(e,t,n,r){var i=parseFloat(Z.Utils.z285("z43")),s=B(t.x,t.y),o=F(s.x,s.y),u=P(n,r);return e.altKey?(r>1+i?u=P(n,1):n>0&&(u=P(n-1,1)),u-Z.fitZ<i&&(u=Z.fitZ)):r<1-i?u=P(n,1):n<_r-1&&(u=P(n+1,1)),new Z.Utils.Point3D(o.x,o.y,u)},this.z419=function(e,t){var n=-(e-Z.imageX),r=-(t-Z.imageY),i=n*Z.imageZ,s=r*Z.imageZ,o=i+yi,u=s+wi,a=ut(o,u);tr.left=a.x+"px",tr.top=a.y+"px"},this.z217=function(e){if(!e)var e=new Z.Utils.Point(parseFloat(tr.left),parseFloat(tr.top));var t=e.x-yi,n=e.y-wi,r=t/Z.imageZ,i=n/Z.imageZ,s=Z.imageX-r,o=Z.imageY-i;return new Z.Utils.Point(s,o)}},Z.ZoomifyToolbar=function(e){function t(e,t){Z.ToolbarDisplay=Z.Utils.z248("div","ToolbarDisplay","inline-block","absolute","hidden","1px","1px","0px","1px","none","0px","transparent none","0px","0px","normal","default"),M=Z.ToolbarDisplay.style;var n=new Z.Utils.Graphic("background",Z.skinPath,t[0],"1px","1px","0px","0px");Z.ToolbarDisplay.appendChild(n.elmt),toolbarSkinSizes=e;if(Z.logoVisible){var r;if(!Z.Utils.isStrVal(Z.logoCustomPath))r=new Z.Utils.Graphic("toolbarLogo",Z.skinPath,t[1],"1px","1px","1px","1px");else{var o=Z.Utils.z215(Z.logoCustomPath);r=new Z.Utils.Graphic("toolbarLogo",o,null,"1px","1px","1px","1px")}Z.ToolbarDisplay.appendChild(r.elmt);if(Z.toolbarVisible==0||Z.toolbarVisible==1){var a=new Z.Utils.Graphic("logoDivider",Z.skinPath,t[2],"1px","1px","1px","1px");Z.ToolbarDisplay.appendChild(a.elmt)}}var f=Z.Utils.z248("div","buttonContainer","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal","default");Z.ToolbarDisplay.appendChild(f),Z.mobileDevice?Z.Utils.addEventListener(f,"touchstart",Z.Utils.preventDefault):(Z.Utils.addEventListener(f,"mousedown",Z.Utils.preventDefault),Z.Utils.addEventListener(f,"mouseover",m));var c=new Z.Utils.Graphic("buttonBackground",Z.skinPath,t[0],"1px","1px","0px","0px");f.appendChild(c.elmt);if(Z.toolbarVisible!=0&&Z.toolbarVisible!=1||Z.mobileDevice){var h=new Z.Utils.Button("buttonMinimize",null,Z.skinPath,t[3],t[4],t[5],"1px","1px","1px","1px","mouseover",g,"z182");Z.ToolbarDisplay.appendChild(h.elmt);var p=new Z.Utils.Button("buttonExpand",null,Z.skinPath,t[6],t[7],t[8],"1px","1px","1px","1px","mouseover",g,"z180");Z.ToolbarDisplay.appendChild(p.elmt)}var d=new Z.Utils.Button("buttonZoomOut",null,Z.skinPath,t[9],t[10],t[11],"1px","1px","1px","1px","mouseover",g,"z196");f.appendChild(d.elmt);if(Z.sliderVisible){var v=new Z.Utils.Graphic("trackSlider",Z.skinPath,t[12],"1px","1px","0px","0px");f.appendChild(v.elmt),Z.Utils.addEventListener(v.elmt,"mousedown",g),Z.Utils.addEventListener(v.elmt,"touchstart",g);var y=new Z.Utils.Button("buttonSlider",null,Z.skinPath,t[14],t[15],t[16],"1px","1px","1px","1px","mouseover",g,"z189");f.appendChild(y.elmt)}var b=new Z.Utils.Button("buttonZoomIn",null,Z.skinPath,t[17],t[18],t[19],"1px","1px","1px","1px","mouseover",g,"z195");f.appendChild(b.elmt);var w=new Z.Utils.Graphic("panDivider",Z.skinPath,t[20],"1px","1px","1px","1px");f.appendChild(w.elmt);var E=new Z.Utils.Button("buttonPanLeft",null,Z.skinPath,t[21],t[22],t[23],"1px","1px","1px","1px","mouseover",g,"z184");f.appendChild(E.elmt);var S=new Z.Utils.Button("buttonPanUp",null,Z.skinPath,t[24],t[25],t[26],"1px","1px","1px","1px","mouseover",g,"z186");f.appendChild(S.elmt);var x=new Z.Utils.Button("buttonPanDown",null,Z.skinPath,t[27],t[28],t[29],"1px","1px","1px","1px","mouseover",g,"z183");f.appendChild(x.elmt);var T=new Z.Utils.Button("buttonPanRight",null,Z.skinPath,t[30],t[31],t[32],"1px","1px","1px","1px","mouseover",g,"z185");f.appendChild(T.elmt);var N=new Z.Utils.Button("buttonReset",null,Z.skinPath,t[33],t[34],t[35],"1px","1px","1px","1px","mouseover",g,"z187");f.appendChild(N.elmt);if(Z.fullPageVisible){var C=new Z.Utils.Graphic("fullPageDivider",Z.skinPath,t[36],"1px","1px","1px","1px");f.appendChild(C.elmt);var k=new Z.Utils.Button("buttonFullPage",null,Z.skinPath,t[37],t[38],t[39],"1px","1px","1px","1px","mouseover",g,"z194");f.appendChild(k.elmt)}if(Z.editMode&&Z.useCanvas){var L=new Z.Utils.Button("buttonEditMode",null,Z.skinPath,t[40],t[41],t[42],"1px","1px","1px","1px","mouseover",g,"z193");f.appendChild(L.elmt);var A=new Z.Utils.Button("buttonEditCancel",null,Z.skinPath,t[43],t[44],t[45],"1px","1px","1px","1px","mouseover",g,"z177");f.appendChild(A.elmt);var _=new Z.Utils.Button("buttonEditDelete",null,Z.skinPath,t[46],t[47],t[48],"1px","1px","1px","1px","mouseover",g,"z178");f.appendChild(_.elmt);var D=new Z.Utils.Button("buttonEditSave",null,Z.skinPath,t[49],t[50],t[51],"1px","1px","1px","1px","mouseover",g,"z179");f.appendChild(D.elmt)}if(Z.progressVisible){var P=Z.Utils.z248("div","progressTextBox","inline-block","absolute","hidden","1px","1px","1px","1px","none","0px","transparent none","0px","0px","normal"),H=toolbarSkinSizes[16];f.appendChild(P);var B=document.createTextNode(Z.Utils.z285("z108"));P.appendChild(Z.Utils.z247(B)),Z.Utils.z401(B,"black","verdana",H+"px","none","normal","normal","normal","normal","1em","left","none"),Z.Utils.addEventListener(P,"contextmenu",Z.Utils.preventDefault),Z.Utils.z260(B)}Z.ViewerDisplay.appendChild(Z.ToolbarDisplay),Z.toolbarW=toolbarSkinSizes[0],Z.toolbarCurrentW=Z.toolbarW==-1?Z.viewerW:Z.toolbarW,Z.toolbarH=O=toolbarSkinSizes[1];var j=Z.toolbarPosition==1?Z.viewerH-O:0;s(Z.toolbarCurrentW,Z.toolbarH,0,j);if(Z.Viewport&&Z.Viewport.z284()){var F=Z.Viewport.getZoom();l(F)}u(Z.toolbarVisible==1||Z.toolbarVisible==2||Z.toolbarVisible==4),Z.Utils.addEventListener(Z.ToolbarDisplay,"mouseover",Z.Utils.stopPropagation),i(!0)}function n(){window.clearInterval(R),R=null;var e=document.getElementById("progressTextBox").firstChild.firstChild.firstChild.firstChild;e&&(e.nodeValue="")}function r(){return L}function i(e){L=e}function s(e,t,n,r){typeof e=="undefined"||e===null?e=Z.toolbarVisible>0?Z.toolbarCurrentW:0:Z.toolbarCurrentW=e;if(typeof t=="undefined"||t===null)t=Z.toolbarVisible>0?O:0;if(typeof n=="undefined"||n===null)n=0;if(typeof r=="undefined"||r===null)r=Z.toolbarPosition==1?Z.viewerH-O:0;var i=Z.ToolbarDisplay.style;i.width=e+"px",i.height=t+"px",i.left=n+"px",i.top=r+"px",o(e,t)}function o(e,t){var n=e,r=t,i=toolbarSkinSizes[2],s=toolbarSkinSizes[3],o=toolbarSkinSizes[4],u=toolbarSkinSizes[5],a=toolbarSkinSizes[6],f=toolbarSkinSizes[7],l=toolbarSkinSizes[8],c=toolbarSkinSizes[9],h=toolbarSkinSizes[10],p=toolbarSkinSizes[11],d=toolbarSkinSizes[12],v=toolbarSkinSizes[13],m=toolbarSkinSizes[14],g=toolbarSkinSizes[15],y=0,b=(r-s)/2+1,w=(r-u)/2,E=(r-f)/2,S=E*1.3,x=E+4,T=E+2,N=Z.logoVisible==1?0:l/2,C=Z.logoVisible==1?0:l/2,k=l-(a-o),L=Z.fullPageVisible?8:7,A=20,O=L*l+2*k;Z.sliderVisible&&(O+=v),U=z=W=!1;var M=Z.logoVisible==1?i+2:0,_=Z.toolbarVisible!=0&&Z.toolbarVisible!=1?l:0,D=M+_,P=D+A+O+A+m;P>n&&(U=!0,P-v>n&&(z=!0,P-v-m>n&&(W=!0,D=0),m=0),O-=v);var H=D+(n-m-D-O)/2,B=document.getElementById("background");B.style.width=n+"px",B.firstChild.style.width=n+"px",B.style.height=r+"px",B.firstChild.style.height=r+"px";var j=document.getElementById("buttonContainer");j.style.width=O+A*2+"px",j.style.height=r+"px",j.style.left=H-A+"px";var F=document.getElementById("buttonBackground");F.style.width=n+"px",Z.Utils.z301(F,parseFloat(j.style.width),parseFloat(j.style.height)),F.style.left="0px";var I=document.getElementById("toolbarLogo");if(I){var q=I.style;if(q)if(!W){q.display="inline-block",Z.Utils.z301(I,i,s),q.left=y+"px",q.top=b+"px",y+=i+2;var R=document.getElementById("logoDivider");if(R){Z.Utils.z301(R,o,u);var X=R.style;X.left=y+"px",X.top=w+"px"}}else q.display="none"}if(Z.toolbarVisible!=0&&Z.toolbarVisible!=1){var V=document.getElementById("buttonMinimize"),$=document.getElementById("buttonExpand");if(V&&$){var J=V.style,K=$.style;J&&K&&(W?(J.display="none",K.display="none"):(J.display="inline-block",K.display="inline-block",Z.Utils.z213(V,a,f),Z.Utils.z213($,a,f),J.left=y+N+"px",J.top=S+"px",K.left=y+C+"px",K.top=S+"px"))}}y=A;var Q=document.getElementById("buttonZoomOut");Z.Utils.z213(Q,a,f);var G=Q.style;G.left=y+"px",G.top=E+"px",y+=l;var Y=document.getElementById("trackSlider"),et=document.getElementById("buttonSlider");if(Y&&et){var tt=Y.style,nt=et.style;tt&&nt&&(U?(tt.display="none",nt.display="none"):(tt.display="inline-block",nt.display="inline-block",Z.Utils.z301(Y,p,d),tt.left=y-2+"px",tt.top=x+"px",Z.Utils.z213(et,c,h),nt.left=parseFloat(tt.left)+"px",nt.top=T+"px",y+=v))}var rt=document.getElementById("buttonZoomIn");Z.Utils.z213(rt,a,f);var it=rt.style;it.left=y+"px",it.top=E+"px",y+=l+1;var st=document.getElementById("panDivider");Z.Utils.z301(st,o,u);var ot=st.style;ot.left=y+"px",ot.top=w+"px",y+=k;var ut=document.getElementById("buttonPanLeft");Z.Utils.z213(ut,a,f);var at=ut.style;at.left=y+"px",at.top=E+"px",y+=l;var ft=document.getElementById("buttonPanUp");Z.Utils.z213(ft,a,f);var lt=ft.style;lt.left=y+"px",lt.top=E+"px",y+=l;var ct=document.getElementById("buttonPanDown");Z.Utils.z213(ct,a,f);var ht=ct.style;ht.left=y+"px",ht.top=E+"px",y+=l;var pt=document.getElementById("buttonPanRight");Z.Utils.z213(pt,a,f);var dt=pt.style;dt.left=y+"px",dt.top=E+"px",y+=l;var vt=document.getElementById("buttonReset");Z.Utils.z213(vt,a,f);var mt=vt.style;mt.left=y+"px",mt.top=E+"px",y+=l+1;var gt=document.getElementById("fullPageDivider");if(gt){Z.Utils.z301(gt,o,u);var yt=gt.style;yt.left=y+"px",yt.top=w+"px",y+=k;var bt=document.getElementById("buttonFullPage");Z.Utils.z213(bt,a,f);var wt=bt.style;wt.left=y+"px",wt.top=E+"px"}var Et=document.getElementById("buttonEditMode");if(Et){y+=l+10,Z.Utils.z213(Et,a,f);var St=Et.style;St.left=y+"px",St.top=E+"px"}var xt=document.getElementById("buttonEditCancel");if(xt){Z.Utils.z213(xt,a,f);var Tt=xt.style;Tt.left=y+"px",Tt.top=E+"px",Tt.visibility="hidden"}var Nt=document.getElementById("buttonEditDelete");if(Nt){y+=l+1,Z.Utils.z213(Nt,a,f);var Ct=Nt.style;Ct.left=y+"px",Ct.top=E+"px",Ct.visibility="hidden"}var kt=document.getElementById("buttonEditSave");if(kt){y+=l+1,Z.Utils.z213(kt,a,f);var Lt=kt.style;Lt.left=y+"px",Lt.top=E+"px",Lt.visibility="hidden"}var At=document.getElementById("progressTextBox");if(At){var Ot=At.style;Ot&&(z?Ot.display="none":(Ot.display="inline-block",Ot.width=m+"px",Ot.height=g+"px",Ot.left=n-parseFloat(j.style.left)-parseFloat(Ot.width)+"px",Ot.top=(r-parseFloat(Ot.height))/2+"px"))}}function u(e){Z.toolbarVisible<4&&!Z.mobileDevice?a(e):f(!e)}function a(e){M&&(e?M.display="inline-block":M.display="none")}function f(e){if(M){var t=document.getElementById("buttonContainer"),n=document.getElementById("background"),r=document.getElementById("buttonMinimize"),i=document.getElementById("buttonExpand"),s=document.getElementById("logoDivider"),o=0;W||(o=parseFloat(i.style.left)+parseFloat(i.style.width)+4);var u=Z.toolbarCurrentW;e?(t.style.display="none",W||(s&&(s.style.display="none"),r.style.display="none",i.style.display="inline-block"),M.width=o+"px",n.style.width=o+"px"):(t.style.display="inline-block",W||(s&&(s.style.display="inline-block"),r.style.display="inline-block",i.style.display="none"),M.width=u+"px",n.style.width=u+"px")}}function l(e){if(Z.sliderVisible){_||(_=document.getElementById("trackSlider")),D||(D=_.style),P||(P=document.getElementById("buttonSlider")),H||(H=P.style);if(D&&H){var t=Z.maxZ-Z.minZ,n=(e-Z.minZ)/t;trackL=parseFloat(D.left),trackR=parseFloat(D.left)+parseFloat(D.width)-parseFloat(H.width);var r=trackR-trackL,i=n*r+trackL;H.left=i+"px"}}}function c(t){_||(_=document.getElementById("trackSlider")),D||(D=_.style);if(_&&D){var n,r=Z.Utils.getElementPosition(_);Z.mobileDevice?n=Z.Utils.getMousePosition(t).x-r.x:n=t.clientX-r.x;var i=v(n,0,parseFloat(D.width));i<Z.minZ+.1&&(i=Z.minZ),i>Z.maxZ-.1&&(i=Z.maxZ),e.z394(i),e.updateView()}}function h(e){F=!0,P||(P=document.getElementById("buttonSlider"));if(P){var t=Z.Utils.getMousePosition(e);P.mouseXPrior=t.x,P.mouseYPrior=t.y}}function p(t){_||(_=document.getElementById("trackSlider")),D||(D=_.style),P||(P=document.getElementById("buttonSlider")),H||(H=P.style);if(D&&P&&H){trackL=parseFloat(D.left),trackR=parseFloat(D.left)+parseFloat(D.width)-parseFloat(H.width);var n=parseFloat(H.left)+(q.x-P.mouseXPrior);n<trackL?n=trackL:n>trackR?n=trackR:P.mouseXPrior=q.x,H.left=n+"px";var r=v(n,trackL,trackR);e.z394(r)}}function d(){F=!1,e.updateView()}function v(e,t,n){var r=n-t,i=(e-t)/r,s=Z.maxZ-Z.minZ,o=Z.minZ+s*i;return o}function m(e){var e=Z.Utils.event(e),t=Z.Utils.relatedTarget(e);if(!F&&t){var n=t.parentNode;y(n)}}function g(e){Z.mobileDevice&&e.preventDefault();var e=Z.Utils.event(e),t=Z.Utils.target(e),n=Z.Utils.relatedTarget(e);if(t){var r=t.parentNode;r&&(targetParentID=r.id)}if(n){var i=n.parentNode;i&&(relatedTargetParentID=i.id)}if(!F||e.type=="mouseup"||e.type=="touchend"||e.type=="touchcancel")E(),t&&!Z.Utils.z324(e)&&(targetParentID&&targetParentID!="trackSlider"&&e.type!="mousemove"&&(S(e),x(e)),T(e))}function y(t){e&&e.z448(),t&&Z.Utils.isStrVal(t.id)&&(t.id.indexOf("button")!=-1?(b(t),w(t,null)):t.id.indexOf("background")!=-1&&E())}function b(e){Z.Utils.removeEventListener(e,"mousedown",g),Z.Utils.removeEventListener(e,"mouseup",g),Z.Utils.removeEventListener(e,"mouseout",g),Z.Utils.addEventListener(e,"mouseover",g)}function w(e,t){var n=document.getElementById(e._imgUpID),r=document.getElementById(e._imgOverID),i=document.getElementById(e._imgDownID);n&&(n.style.visibility=t!==null?t:"visible"),r&&(r.style.visibility="hidden"),i&&(i.style.visibility="hidden")}function E(){var e=Z.ToolbarDisplay.childNodes,t=null;for(var n=0,r=e.length;n<r;n++){t=e[n];if(t.id&&t.id.indexOf("button")!=-1)if(t.id!="buttonContainer")b(t),w(t,null);else{var i=t.childNodes,s=null;for(var o=0,u=i.length;o<u;o++)s=i[o],s.id&&s.id.indexOf("button")!=-1&&(!Z.editMode||s.id!="buttonEditMode"&&s.id!="buttonEditCancel"&&s.id!="buttonEditDelete"&&s.id!="buttonEditSave")&&(b(s),w(s,null))}}}function S(e){var t=Z.Utils.target(e);if(t){var n=t.parentNode;n&&(Z.mobileDevice?(Z.Utils.removeEventListener(n,"touchstart",g),Z.Utils.removeEventListener(n,"touchend",g),Z.Utils.removeEventListener(n,"touchcancel",g)):(Z.Utils.removeEventListener(n,"mouseover",g),Z.Utils.removeEventListener(n,"mousedown",g),Z.Utils.removeEventListener(n,"mouseup",g),Z.Utils.removeEventListener(n,"mouseout",g)))}}function x(e){var t=Z.Utils.target(e);if(t){var n=Z.Utils.target(e).parentNode;if(n)if(!n._imgUpID)y(n);else{var r=document.getElementById(n._imgUpID),i=document.getElementById(n._imgOverID),s=document.getElementById(n._imgDownID);if(r&&i&&s){var o=r.style,u=i.style,a=s.style;o.visibility="hidden",u.visibility="hidden",a.visibility="hidden";switch(e.type){case"mouseover":u.visibility="visible";break;case"mousedown":a.visibility="visible";break;case"mousemove":a.visibility="visible";break;case"mouseup":u.visibility="visible";break;case"mouseout":o.visibility="visible";break;case"touchstart":a.visibility="visible";break;case"touchend":o.visibility="visible";break;case"touchcancel":o.visibility="visible"}}}}}function T(t){var n=Z.Utils.target(t).parentNode;if(n){var r=n.id;switch(t.type){case"mouseover":Z.Utils.addEventListener(n,"mousedown",g);break;case"mousedown":Z.Utils.addEventListener(n,"mouseup",g);if(e)switch(r){case"buttonMinimize":k.minimize(!0),Z.Navigator.setVisibility(!1);break;case"buttonExpand":k.minimize(!1),Z.Navigator.setVisibility(!0);break;case"buttonZoomOut":e.zoom("out");break;case"buttonSlider":h(t),N(t),Z.Utils.addEventListener(document,"mousemove",N),I||(I=window.setInterval(p,j)),Z.Utils.addEventListener(document,"mouseup",g);break;case"trackSlider":c(t);break;case"buttonZoomIn":e.zoom("in");break;case"buttonPanLeft":e.pan("left");break;case"buttonPanUp":e.pan("up");break;case"buttonPanDown":e.pan("down");break;case"buttonPanRight":e.pan("right");break;case"buttonReset":e.reset()}break;case"mouseup":Z.Utils.addEventListener(n,"mousedown",g),e&&(r=="buttonSlider"||F?(I&&(window.clearInterval(I),I=null),d(),Z.Utils.removeEventListener(document,"mousemove",N),Z.Utils.removeEventListener(document,"mouseup",g),E()):r=="buttonZoomOut"||r=="buttonZoomIn"?e.zoom("stop"):r=="buttonPanLeft"||r=="buttonPanRight"?e.pan("horizontalStop"):r=="buttonPanUp"||r=="buttonPanDown"?e.pan("verticalStop"):r=="buttonFullPage"?e.toggleFullPageView():r=="buttonEditMode"?e.togglePolygonEditing():r=="buttonEditDelete"?e.deleteCurrentLabel():r=="buttonEditCancel"?e.cancelLabelEdits():r=="buttonEditSave"&&e.saveAnnotations());break;case"mouseout":Z.Utils.addEventListener(n,"mouseover",g),e&&(r=="buttonZoomOut"||r=="buttonZoomIn"?e.zoom("stop"):r=="buttonPanLeft"||r=="buttonPanRight"?e.pan("horizontalStop"):(r=="buttonPanUp"||r=="buttonPanDown")&&e.pan("verticalStop"));break;case"touchstart":Z.Utils.addEventListener(n,"touchend",g),Z.Utils.addEventListener(n,"touchcancel",g);if(e)switch(r){case"buttonMinimize":k.minimize(!0),Z.Navigator.setVisibility(!1);break;case"buttonExpand":k.minimize(!1),Z.Navigator.setVisibility(!0);break;case"buttonZoomOut":e.zoom("out");break;case"buttonSlider":h(t),C(t),Z.Utils.addEventListener(document,"touchmove",C),I||(I=window.setInterval(p,j)),Z.Utils.addEventListener(n,"touchend",g),Z.Utils.addEventListener(n,"touchcancel",g);break;case"trackSlider":c(t);break;case"buttonZoomIn":e.zoom("in");break;case"buttonPanLeft":e.pan("left");break;case"buttonPanUp":e.pan("up");break;case"buttonPanDown":e.pan("down");break;case"buttonPanRight":e.pan("right");break;case"buttonReset":e.reset()}break;case"touchend":Z.Utils.addEventListener(n,"touchstart",g),e&&(r=="buttonZoomOut"||r=="buttonZoomIn"?(e.zoom("stop"),Z.debug==0&&r=="buttonZoomOut"&&t.altKey&&Z.Utils.z404()):r=="buttonSlider"?(I&&(window.clearInterval(I),I=null),d(),Z.Utils.removeEventListener(document,"touchmove",C)):r=="buttonPanLeft"||r=="buttonPanRight"?e.pan("horizontalStop"):r=="buttonPanUp"||r=="buttonPanDown"?e.pan("verticalStop"):r=="buttonFullPage"?e.toggleFullPageView():r=="buttonEditMode"?e.togglePolygonEditing():r=="buttonEditDelete"?e.deleteCurrentLabel():r=="buttonEditCancel"?e.cancelLabelEdits():r=="buttonEditSave"&&e.saveAnnotations());break;case"touchcancel":Z.Utils.addEventListener(n,"touchstart",g),e&&(r=="buttonZoomOut"||r=="buttonZoomIn"?(e.zoom("stop"),Z.debug==0&&r=="buttonZoomOut"&&t.altKey&&Z.Utils.z404()):r=="buttonSlider"?(I&&(window.clearInterval(I),I=null),d(),Z.Utils.removeEventListener(document,"touchmove",C)):r=="buttonPanLeft"||r=="buttonPanRight"?e.pan("horizontalStop"):r=="buttonPanUp"||r=="buttonPanDown"?e.pan("verticalStop"):r=="buttonFullPage"?e.toggleFullPageView():r=="buttonEditMode"?e.togglePolygonEditing():r=="buttonEditDelete"?e.deleteCurrentLabel():r=="buttonEditCancel"?e.cancelLabelEdits():r=="buttonEditSave"&&e.saveAnnotations())}}}function N(e){q=new Z.Utils.Point(e.clientX,e.clientY)}function C(e){var t=Z.Utils.getFirstTouch(e);if(t){var n=t.target;q=new Z.Utils.Point(t.pageX,t.pageY)}}var k=this,L=!1;Z.skinPath=Z.Utils.z392(Z.skinPath);var A=new Z.NetConnector;A.loadXML(Z.skinPath+"/"+Z.Utils.z285("z111"));var O,M,_,D,P,H,B=[],j=parseInt(Z.Utils.z285("z113"),10),F=!1,I=null,q=null,R=null,U,z,W;this.z284=function(){return r()},this.setSizeAndPosition=function(e,t,n,r){s(e,t,n,r)},this.show=function(e){u(e)},this.setVisibility=function(e){a(e)},this.minimize=function(e){f(e)},this.z406=function(){var e=document.getElementById("progressTextBox");if(e){var t=e.style;t&&(t.display="inline-block")}},this.hideProgress=function(){var e=document.getElementById("progressTextBox");if(e){var t=e.style;t&&(t.display="none")}},this.updateProgress=function(e,t){if(Z.progressVisible){R&&window.clearInterval(R);var r,i=document.getElementById("progressTextBox").firstChild.firstChild.firstChild.firstChild;i&&(e==0||t==0?(i.nodeValue="llllllllll",R=window.setInterval(n,parseInt(Z.Utils.z285("z107")),10)):(r=Math.round(100-t/e*100),i.nodeValue="l".multiply(Math.round(r/10))))}},this.z369=function(e){Z.skinMode=e.getElementsByTagName("SETUP")[0].attributes.getNamedItem("SKINMODE").nodeValue;var n,r;Z.skinMode==1||Z.skinMode==0&&!Z.mobileDevice?(n=e.getElementsByTagName("SETUP")[0].attributes.getNamedItem("FOLDERSTANDARD").nodeValue,r="SIZESSTANDARD"):(n=e.getElementsByTagName("SETUP")[0].attributes.getNamedItem("FOLDERLARGE").nodeValue,r="SIZESLARGE");var i=[];i.push(parseFloat(e.getElementsByTagName(r)[0].attributes.getNamedItem("TOOLBARW").nodeValue)),i.push(parseFloat(e.getElementsByTagName(r)[0].attributes.getNamedItem("TOOLBARH").nodeValue)),i.push(parseFloat(e.getElementsByTagName(r)[0].attributes.getNamedItem("LOGOW").nodeValue)),i.push(parseFloat(e.getElementsByTagName(r)[0].attributes.getNamedItem("LOGOH").nodeValue)),i.push(parseFloat(e.getElementsByTagName(r)[0].attributes.getNamedItem("DIVIDERW").nodeValue)),i.push(parseFloat(e.getElementsByTagName(r)[0].attributes.getNamedItem("DIVIDERH").nodeValue)),i.push(parseFloat(e.getElementsByTagName(r)[0].attributes.getNamedItem("BUTTONW").nodeValue)),i.push(parseFloat(e.getElementsByTagName(r)[0].attributes.getNamedItem("BUTTONH").nodeValue)),i.push(parseFloat(e.getElementsByTagName(r)[0].attributes.getNamedItem("BUTTONSPAN").nodeValue)),i.push(parseFloat(e.getElementsByTagName(r)[0].attributes.getNamedItem("SLIDERBUTTONW").nodeValue)),i.push(parseFloat(e.getElementsByTagName(r)[0].attributes.getNamedItem("SLIDERBUTTONH").nodeValue)),i.push(parseFloat(e.getElementsByTagName(r)[0].attributes.getNamedItem("SLIDERTRACKW").nodeValue)),i.push(parseFloat(e.getElementsByTagName(r)[0].attributes.getNamedItem("SLIDERTRACKH").nodeValue)),i.push(parseFloat(e.getElementsByTagName(r)[0].attributes.getNamedItem("SLIDERSPAN").nodeValue)),i.push(parseFloat(e.getElementsByTagName(r)[0].attributes.getNamedItem("PROGRESSW").nodeValue)),i.push(parseFloat(e.getElementsByTagName(r)[0].attributes.getNamedItem("PROGRESSH").nodeValue)),i.push(parseFloat(e.getElementsByTagName(r)[0].attributes.getNamedItem("PROGRESSFONTSIZE").nodeValue));var s=[],o,u,a,f,l;o=Z.editMode?51:39,u=e.getElementsByTagName("FILES")[0].attributes.getNamedItem("SKIN0"),u!==null&&(a=u.nodeValue),f=e.getElementsByTagName("FILES")[0].attributes.getNamedItem("SKIN"+o.toString()),f!==null&&(l=f.nodeValue);if(typeof a!="undefined"&&Z.Utils.isStrVal(a)&&typeof l!="undefined"&&Z.Utils.isStrVal(l)){var c=!1;for(var h=0;h<o+1;h++){var p=e.getElementsByTagName("FILES")[0].attributes.getNamedItem("SKIN"+h).nodeValue;Z.Utils.isStrVal(p)?s[h]=n+"/"+p:(s[h]="null",c=!0)}c&&Z.Utils.z405(Z.Utils.z285("z160")),t(i,s)}else Z.Utils.z405(Z.Utils.z285("z159"))},this.z418=function(e){l(e)},this.z210=function(e,t){w(e,t)}},Z.ZoomifyNavigator=function(e){function t(e){Z.NavigatorDisplay=Z.Utils.z248("div","NavigatorDisplay","inline-block","absolute","hidden",j+"px",F+"px",I+"px",q+"px","solid","1px","transparent none","0px","0px","normal"),k=Z.NavigatorDisplay,L=k.style;var t=Z.Utils.z285("z86"),n=Z.Utils.z285("z86NOALPHA"),r=Z.Utils.z248("div","navigatorBackground","inline-block","absolute","hidden",j+"px",F+"px","0px","0px","none","0px",t,"0px","0px","normal");Z.Utils.z398(r,W,n),Z.NavigatorDisplay.appendChild(r),A=r,O=A.style;var i=Z.Utils.z248("div","navigatorImageContainer","inline-block","absolute","hidden",j+"px",F+"px","0px","0px","none","0px","transparent none","0px","0px","normal");i.appendChild(B),Z.NavigatorDisplay.appendChild(i),M=i,_=M.style,D=B;var s=Z.Utils.z248("div","navigatorRectangle","inline-block","absolute","hidden",j+1+"px",F+1+"px",I+"px",q+"px","solid","1px","transparent none","0px","0px","normal");s.style.borderColor=Z.Utils.z285("z91"),Z.NavigatorDisplay.appendChild(s),P=s,H=P.style,Z.ViewerDisplay.appendChild(Z.NavigatorDisplay),u(j,F,I,q,R),h(Z.navigatorVisible==1||Z.navigatorVisible==2),l(),Z.mobileDevice?(Z.Utils.addEventListener(k,"touchstart",w),Z.Utils.addEventListener(k,"touchmove",E),Z.Utils.addEventListener(k,"touchend",S),Z.Utils.addEventListener(k,"touchcancel",x)):(Z.Utils.addEventListener(D,"mousedown",Z.Utils.preventDefault),Z.Utils.addEventListener(k,"mousedown",Z.Utils.preventDefault),Z.Utils.addEventListener(k,"mouseover",Z.Utils.stopPropagation),Z.Utils.addEventListener(k,"mousedown",g)),Z.Utils.addEventListener(B,"contextmenu",Z.Utils.preventDefault),Z.Utils.addEventListener(r,"contextmenu",Z.Utils.preventDefault),Z.Utils.addEventListener(s,"contextmenu",Z.Utils.preventDefault),o(!0),c()}function n(e){Z.tileSource=="ZoomifyImageFolder"?X=Z.Utils.z215(Z.imagePath+"/TileGroup0/"+"0-0-0.jpg"):Z.tileSource=="ZoomifyImageFile"&&(X=Z.Viewport.z279(0,0,0)),B=null,B=new Image,B.onload=e,B.onerror=m;if(X!="offsetLoading")B.src=X;else var t=window.setTimeout(function(){n(e)},100)}function r(e){M.appendChild(B),D=Z.NavigatorDisplay.childNodes[1].firstChild,u(j,F,I,q,R),h(Z.navigatorVisible==1||Z.navigatorVisible==2),l(),c()}function i(){if(s()){C&&(window.clearInterval(C),C=null);if(!k||!L||!A||!O||!M||!_||!D||!P||!H)k=Z.NavigatorDisplay,L=k.style,A=Z.NavigatorDisplay.childNodes[0],O=A.style,M=Z.NavigatorDisplay.childNodes[1],_=M.style,D=Z.NavigatorDisplay.childNodes[1].firstChild,P=Z.NavigatorDisplay.childNodes[2],H=P.style}}function s(){return N}function o(e){N=e}function u(e,t,n,r,i){e||(e=Z.navigatorW),t||(t=Z.navigatorH);if(typeof n=="undefined"||n===null)n=0;if(typeof r=="undefined"||r===null)r=0;k||(k=Z.NavigatorDisplay),L||(L=k.style),D=k.childNodes[1].firstChild;if(k&&L&&D){if(i){var s=1,o=1;i==0?o=Z.viewerW/Z.viewerH:o=D.width/D.height,s>1?(t=e,t/=o):(e=t,e*=o)}L.width=e+"px",L.height=t+"px",L.left=n-1+"px",L.top=r-1+"px",a(e,t)}}function a(e,t){O||(O=Z.NavigatorDisplay.firstChild.style),_||(_=Z.NavigatorDisplay.childNodes[1].style),D||(D=Z.NavigatorDisplay.childNodes[1].firstChild),O&&_&&D&&(O.width=e+"px",O.height=t+"px",f(e,t,D.width,D.height),_.width=D.width+"px",_.height=D.height+"px",_.left=(e-parseFloat(_.width))/2+"px",_.top=(t-parseFloat(_.height))/2+"px",c())}function f(e,t,n,r){D||(D=Z.NavigatorDisplay.childNodes[1].firstChild);if(D){var i=n/r,s=e/n,o=t/r,u=0,a=0;s<=o?(n=e,r=e/i,a=(t-r*(e/n))/2):o<s&&(r=t,n=t*i,u=(e-n*(t/r))/2),D.width=n,D.height=r}}function l(){L||(L=Z.NavigatorDisplay.style),L&&(L.zIndex=L.zIndex+100)}function c(){if(Z.Viewport&&Z.Viewport.z284()){p();var e=Z.Viewport.z217();d(e)}}function h(e){L||(L=Z.NavigatorDisplay.style),L&&(e?L.display="inline-block":L.display="none")}function p(){if(D&&H){var e=D.width/Z.imageW,t=D.height/Z.imageH,n=Z.Viewport.getZoom(),r=Z.viewerW*e/n,i=Z.viewerH*t/n;H.width=r+"px",H.height=i+"px"}}function d(e){if(D&&H&&_){var t=D.width/Z.imageW,n=D.height/Z.imageH,r=e.x*t,i=e.y*n,s=r-parseFloat(H.width)/2,o=i-parseFloat(H.height)/2;H.left=Math.round(s+parseFloat(_.left))+"px",H.top=Math.round(o+parseFloat(_.top))+"px"}}function v(){if(H&&_&&D){var e=parseFloat(H.left)-parseFloat(_.left),t=parseFloat(H.top)-parseFloat(_.top),n=e+(parseFloat(H.width)-1)/2,r=t+(parseFloat(H.height)-1)/2,i=Z.imageW/D.width,s=Z.imageH/D.height,o=n*i,u=r*s;Z.Viewport.z419(o,u)}}function m(){Z.Utils.z405(Z.Utils.z285("z156"))}function g(e){Z.Viewport.z448();if(k&&P&&H){var e=Z.Utils.event(e);P.mouseXPrior=e.clientX,P.mouseYPrior=e.clientY,dragPtStart=new Z.Utils.Point(e.clientX,e.clientY),Z.Utils.addEventListener(k,"mousemove",y),Z.Utils.addEventListener(k,"mouseup",b),Z.Utils.addEventListener(document,"mouseup",b)}}function y(e){if(P&&H){var t=parseFloat(H.left),n=parseFloat(H.top);return H.left=t+(e.clientX-P.mouseXPrior)+"px",H.top=n+(e.clientY-P.mouseYPrior)+"px",P.mouseXPrior=e.clientX,P.mouseYPrior=e.clientY,v(),!1}}function b(e){if(k&&P&&H){document.mousemove=null,document.mouseup=null,Z.Utils.removeEventListener(k,"mousemove",y),Z.Utils.removeEventListener(k,"mouseup",b),Z.Utils.removeEventListener(document,"mouseup",b);var e=Z.Utils.event(e),t=new Z.Utils.Point(e.clientX,e.clientY),n=Z.Utils.calculatePointsDistance(dragPtStart.x,dragPtStart.y,t.x,t.y,2);if(n<4){var r=Z.Utils.getElementPosition(Z.NavigatorDisplay);H.left=e.clientX-r.x-parseFloat(H.width)/2+"px",H.top=e.clientY-r.y-parseFloat(H.height)/2+"px"}v(),Z.Viewport.updateView()}}function w(e){e.preventDefault();if(k&&P&&H){var t=Z.Utils.getFirstTouch(e);if(t){var n=t.target,r=new Z.Utils.Point(t.pageX,t.pageY);dragPtStart=new Z.Utils.Point(r.x,r.y),P.mouseXPrior=r.x,P.mouseYPrior=r.y}}}function E(e){e.preventDefault();if(!Z.mousePan)return;if(P&&H){var t=Z.Utils.getFirstTouch(e);if(t){var n=t.target,r=new Z.Utils.Point(t.pageX,t.pageY),i=parseFloat(H.left),s=parseFloat(H.top);return H.left=i+(r.x-P.mouseXPrior)+"px",H.top=s+(r.y-P.mouseYPrior)+"px",P.mouseXPrior=r.x,P.mouseYPrior=r.y,v(),!1}}return!1}function S(e){if(k&&P&&H){var t=Z.Utils.getFirstTouch(e);if(t){var n=t.target,r=new Z.Utils.Point(t.pageX,t.pageY),i=new Z.Utils.Point(r.x,r.y),s=Z.Utils.calculatePointsDistance(dragPtStart.x,dragPtStart.y,i.x,i.y,2),o=Z.mobileDevice?6:3;if(s<o){var u=Z.Utils.getElementPosition(Z.NavigatorDisplay);H.left=r.x-u.x-parseFloat(H.width)/2+"px",H.top=r.y-u.y-parseFloat(H.height)/2+"px"}}v(),Z.Viewport.updateView()}}function x(e){if(k&&P&&H){var t=Z.Utils.getFirstTouch(e);if(t){var n=t.target,r=new Z.Utils.Point(t.pageX,t.pageY),i=new Z.Utils.Point(r.x,r.y),s=Z.Utils.calculatePointsDistance(dragPtStart.x,dragPtStart.y,i.x,i.y,2),o=Z.mobileDevice?6:3;if(s<o){var u=Z.Utils.getElementPosition(Z.NavigatorDisplay);H.left=r.x-u.x-parseFloat(H.width)/2+"px",H.top=r.y-u.y-parseFloat(H.height)/2+"px"}}v(),Z.Viewport.updateView()}}var T=this,N=!1,C,k,L,A,O,M,_,D,P,H,B,j=Z.navigatorW,F=Z.navigatorH,I=Z.navigatorL-1,q=Z.navigatorT-1,R=Z.navigatorFit,U,z=null,W=parseFloat(Z.Utils.z285("z85")),X;n(t),this.setImagePath=function(e){M.removeChild(B),n(r)},this.z284=function(){return s()},this.setSizeAndPosition=function(e,t,n,r,i){i||(i=R),u(e,t,n,r,i)},this.setVisibility=function(e){h(e)},this.z420=function(){c()},this.z416=function(){p()},this.z417=function(e){d(e)},this.z432=function(){s()?i():C=window.setInterval(i,300)}},Z.NetConnector=function(){function e(e,t,n){var r=null,i=typeof t=="function";if(i)var s=t,t=function(){window.setTimeout(Z.Utils.createCallback(null,s,r),1)};if(window.ActiveXObject){var o=["Msxml2.XMLHTTP","Msxml3.XMLHTTP","Microsoft.XMLHTTP"];for(var u=0;u<o.length;u++)try{r=new ActiveXObject(o[u]);break}catch(a){continue}}else window.XMLHttpRequest&&(r=new XMLHttpRequest);r||Z.Utils.z405(Z.Utils.z285("z169")),i&&(r.onreadystatechange=function(){r.readyState==4&&(r.onreadystatechange=new Function,t())});try{n===null?(r.open("GET",e,i),r.send(null)):(Z.z380=!0,r.open("POST",e,!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.setRequestHeader("Content-length",params.length),r.setRequestHeader("Connection","close"),r.send(params))}catch(a){e.indexOf("ImageProperties.xml")!=-1?Z.Utils.z405(Z.Utils.z285("z148-IMAGEXML")):e.toUpperCase().indexOf(".PFF")!=-1?Z.Utils.z405(Z.Utils.z285("z148-IMAGEHEADER")):e.toUpperCase().indexOf("reply_data")!=-1?Z.Utils.z405(Z.Utils.z285("z148-IMAGEOFFSET")):e.indexOf(Z.Utils.z285("z111"))!=-1?Z.Utils.z405(Z.Utils.z285("z148-TOOLBARXML")):e.indexOf(Z.Utils.z285("z71"))!=-1?Z.Utils.z405(Z.Utils.z285("z148-HOTSPOTSXML")):e.indexOf(Z.Utils.z285("z34"))!=-1?Z.Utils.z405(Z.Utils.z285("z148-ANNOTATIONSXML")):e.toUpperCase().indexOf(Z.Utils.z285("DEFAULT_ANNOTATIONSXMLSAVEHANDLERNAME1"))!=-1||e.toUpperCase().indexOf(Z.Utils.z285("DEFAULT_ANNOTATIONSXMLSAVEHANDLERNAME1"))!=-1?Z.Utils.z405(Z.Utils.z285("z148-ANNOTATIONSSAVEHANDLER")):Z.Utils.z405(Z.Utils.z285("z148")),r.onreadystatechange=null,r=null}return i?null:r}function t(e){if(!e)Z.Utils.z405(Z.Utils.z285("z157"));else if(e.status!==200&&e.status!==0){var t=e.status,r=t==404?"Not Found":e.statusText;Z.Utils.z405(Z.Utils.z285("z158")+t+" - "+r)}else{var i=null;if(e.responseXML&&e.responseXML.documentElement)i=e.responseXML,n(i);else if(e.responseText){var s=e.responseText;if(Z.z380)Z.z380=!1,Z.Utils.z405(Z.Utils.z285("z1")),Z.Viewport&&Z.Viewport.setAllHotspotsSaved();else if(Z.tileSource=="ZoomifyImageFolder")i=Z.Utils.z241(s),n(i);else if(Z.tileSource=="ZoomifyImageFile"){if(s.toUpperCase().indexOf("PFFHEADER")!=-1){var o=s.indexOf("reply_data=")+"reply_data=".length;s=s.substring(o,s.length)}else{var u=s.indexOf("begin=")+"begin=".length,a=s.indexOf("&",u);beginValue=s.substring(u,a);var f=s.indexOf("reply_data=")+"reply_data=".length;replyDataValue=s.substring(f,s.length),s='<PFFOFFSET BEGIN="'+beginValue+'" REPLYDATA="'+replyDataValue+'" />'}i=Z.Utils.z241(s),n(i)}}}}function n(e){if(e&&e.documentElement){var t=e.documentElement.tagName;t=="COPYRIGHT"?r("copyright",e):t=="IMAGE_PROPERTIES"||t=="PFFHEADER"?r("image",e):t=="PFFOFFSET"?r("offset",e):t=="SKINDATA"?r("skin",e):t=="DATA"?r("hotspots",e):t=="ZAS"?r("annotations",e):Z.Utils.z405(Z.Utils.z285("z170"))}else Z.Utils.z405(Z.Utils.z285("z167"))}function r(e,t){if(e=="copyright"){var n=t.documentElement.getAttribute("STATEMENTTEXT"),r=t.documentElement.getAttribute("DECLINEDTEXT");Z.Utils.isStrVal(n)?Z.Utils.z403(n,r):Z.Utils.z405(Z.Utils.z285("z147"))}else e=="image"?(Z.tileSource=="ZoomifyImageFolder"||Z.tileSource=="ZoomifyImageFile"||Z.tileSource=="OtherTileSource")&&Z.Viewport&&Z.Viewport.z366(t):e=="offset"?Z.Viewport&&Z.Viewport.z367(t):e=="skin"?Z.Toolbar&&Z.Toolbar.z369(t):e=="hotspots"?Z.Viewport&&Z.Viewport.z365(t):e=="annotations"&&Z.Viewport&&Z.Viewport.z364(t)}function i(e,t,n){o--;if(typeof e=="function")try{e(n)}catch(r){Z.Utils.z405(r.name+Z.Utils.z285("z140")+t+" "+r.message)}}function s(e,t,n){function r(n){i.onload=null,i.onabort=null,i.onerror=null,s&&window.clearTimeout(s),window.setTimeout(function(){t(e,n?i:null)},1)}var i=null,s=null;this.start=function(){i=new Image;var t=function(){r(!0)},o=function(){r(!1)},l=function(){Z.Utils.z405(Z.Utils.z285("z145")+e),r(!1),Z.debug==2&&Z.Utils.trace("Image request for "+n+" timeout: "+e)};i.onload=t,i.onabort=o,i.onerror=o,s=window.setTimeout(l,u),i.src=e}}var o=0,u=parseFloat(Z.Utils.z285("z72"));this.loadXML=function(n){e(n,t,null)},this.postXML=function(n,r){e(n,t,r)},this.loadImage=function(e,t,n){if(o>=parseInt(Z.Utils.z285("z73"),10))return!1;var r=Z.Utils.createCallback(null,i,t),u=new s(e,r,n);return o++,u.start(),!0}},Z.Utils={z258:function(){Z.z361=null,Z.imagePath=null,Z.skinPath=null,Z.skinMode=null,Z.parameters=null,Z.browsers=null,Z.browser=null,Z.browserVersion=null,Z.z223=null,Z.cssTransformsSupported=null,Z.cssTransformProperty=null,Z.cssTransformNoUnits=null,Z.alphaSupported=null,Z.renderQuality=null,Z.mobileDevice=null,Z.initialX=null,Z.initialY=null,Z.initialZ=null,Z.minZ=null,Z.maxZ=null,Z.zoomSpeed=null,Z.panSpeed=null,Z.fadeInSpeed=null,Z.toolbarVisible=null,Z.toolbarW=null,Z.toolbarH=null,Z.toolbarPosition=null,Z.navigatorVisible=null,Z.navigatorW=null,Z.navigatorH=null,Z.navigatorL=null,Z.navigatorT=null,Z.navigatorFit=null,Z.clickZoom=null,Z.clickPan=null,Z.mousePan=null,Z.keys=null,Z.constrainPan=null,Z.tooltipsVisible=null,Z.watermarkPath=null,Z.z245=null,Z.hotspotPath=null,Z.hotspotListTitle=null,Z.annotationPath=null,Z.saveHandlerPath=null,Z.z380=!1,Z.sliderVisible=null,Z.fullPageVisible=null,Z.fullPageInitial=null,Z.progressVisible=null,Z.logoVisible=null,Z.logoCustomPath=null,Z.canvas=null,Z.debug=null,Z.imageProperties=null,Z.serverIP=null,Z.serverPort=null,Z.tileHandlerPath=null,Z.tileHandlerPathFull=null,Z.tileSource=null,Z.editMode=!1,Z.z375=!1,Z.Viewer=null,Z.ViewerDisplay=null,Z.Viewport=null,Z.Toolbar=null,Z.ToolbarDisplay=null,Z.TooltipDisplay=null,Z.Navigator=null,Z.NavigatorDisplay=null,Z.MessageDisplay=null,Z.CopyrightDisplay=null,Z.AnnotationPanelDisplay=null,Z.imageW=null,Z.imageH=null,Z.imageX=0,Z.imageY=0,Z.imageZ=0,Z.fitZ=null,Z.z454="stop",Z.z362="stop",Z.z363="stop",Z.fullPage=!1,Z.useCanvas=!0,Z.TraceDisplay=null,Z.traces=null},z275:function(){var e=this.z384("imageCopyright");e?Z.Viewer.z229():this.z332()},z332:function(){var e=new Z.NetConnector;e.loadXML(Z.z245)},z403:function(e,t){var n=this.z285("z51"),r=this.z285("z49");Z.CopyrightDisplay=this.z248("div","CopyrightDisplay","inline-block","absolute","hidden",Z.viewerW-2+"px",Z.viewerH-2+"px","0px","0px","solid","1px",n,"0px","0px","normal"),Z.ViewerDisplay.appendChild(Z.CopyrightDisplay);var i=440,s=200,o=parseFloat(Z.CopyrightDisplay.style.width)/2-i/2,u=parseFloat(Z.CopyrightDisplay.style.height)/2-s/2,a=this.z248("div","textBox","inline-block","absolute","hidden",i+"px",s+"px",o+"px",u+"px","none","0px","transparent none","0px","0px","normal");a.id="textBox",Z.CopyrightDisplay.appendChild(a);var f=document.createTextNode(e);a.appendChild(this.z247(f)),this.z401(f,"black","verdana","16px","none","normal","normal","normal","normal","1em","justify","none");var l=document.createTextNode(t);a.appendChild(l);var c=80,h=20,p=30,d=20,v=o+i/2-(c*2+p)/2,m=u+s+d,g=this.z285("z48"),y=new Z.Utils.Button("buttonAgree",g,null,null,null,null,c+"px",h+"px",v+"px",m+"px","mousedown",this.z243,"z175","solid","1px",r,"0px","0px");Z.CopyrightDisplay.appendChild(y.elmt),v+=c+p,g=this.z285("z50");var b=new Z.Utils.Button("buttonExit",g,null,null,null,null,c+"px",h+"px",v+"px",m+"px","mousedown",this.z244,"z176","solid","1px",r,"0px","0px");Z.CopyrightDisplay.appendChild(b.elmt)},hideCopyright:function(){var e=document.getElementById("textBox"),t=e.childNodes[1].nodeValue;e.firstChild.firstChild.firstChild.firstChild.nodeValue=t;var n=document.getElementById("buttonAgree");this.removeEventListener(n,"mousedown",this.z243),Z.CopyrightDisplay.removeChild(n);var r=document.getElementById("buttonExit");this.removeEventListener(r,"mousedown",this.z244),Z.CopyrightDisplay.removeChild(r)},z243:function(e){Z.ViewerDisplay.removeChild(Z.CopyrightDisplay),document.cookie="imageCopyright=confirmed",Z.Viewer.z229()},z244:function(e){Z.Utils.hideCopyright();return},Button:function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b){var w=Z.Utils.z248("span",e,"inline-block","absolute","hidden",o,u,a,f,p,d,v,m,g,y,b);if(!Z.Utils.isStrVal(t)){n=Z.Utils.z392(n);var E=Z.Utils.z250(n+"/"+r),S=Z.Utils.z250(n+"/"+i),x=Z.Utils.z250(n+"/"+s);E.id=w.id+"-imgUp",S.id=w.id+"-imgOver",x.id=w.id+"-imgDown",w._imgUpID=E.id,w._imgOverID=S.id,w._imgDownID=x.id;var T=E.style,N=S.style,C=x.style;T.position=N.position=C.position="absolute",T.width=N.width=N.width=o,T.height=N.height=N.height=u,T.top=N.top=C.top="0px",T.left=N.left=C.left="0px",Z.browser==Z.browsers.FIREFOX&&Z.browserVersion<3&&(T.top=N.top=C.top=""),N.visibility="hidden",C.visibility="hidden",w.appendChild(E),w.appendChild(S),w.appendChild(x),Z.Utils.addEventListener(E,"contextmenu",Z.Utils.preventDefault),Z.Utils.addEventListener(S,"contextmenu",Z.Utils.preventDefault),Z.Utils.addEventListener(x,"contextmenu",Z.Utils.preventDefault)}else{var k=document.createTextNode(t);w.appendChild(Z.Utils.z247(k)),Z.Utils.z401(k,"black","verdana","13px","none","normal","normal","normal","normal","1em","center","none"),Z.Utils.z260(k),Z.Utils.addEventListener(w,"contextmenu",Z.Utils.preventDefault)}Z.tooltipsVisible&&Z.Utils.isStrVal(h)&&(w.title=Z.Utils.z285(h)),Z.mobileDevice?Z.Utils.addEventListener(w,"touchstart",c):(Z.Utils.addEventListener(w,"mousedown",Z.Utils.preventDefault),Z.Utils.addEventListener(w,"mouseover",Z.Utils.stopPropagation),Z.Utils.addEventListener(w,"mouseout",Z.Utils.stopPropagation),Z.Utils.addEventListener(w,l,c)),this.elmt=w},z213:function(e,t,n){var r=e.style;r.width=t+"px",r.height=n+"px";var i=document.getElementById(e._imgUpID),s=document.getElementById(e._imgOverID),o=document.getElementById(e._imgDownID);if(i&&s&&o){var u=i.style,a=s.style,f=o.style;u.width=t+"px",u.height=n+"px",a.width=t+"px",a.height=n+"px",f.width=t+"px",f.height=n+"px"}},Graphic:function(e,t,n,r,i,s,o){t=Z.Utils.z392(t);var u=n?t+"/"+n:t,a=Z.Utils.z250(u),f=a.style;f.width=r,f.height=i;var n=Z.Utils.z248("span",e,"inline-block","absolute","hidden",r,i,s,o,"none","0px","transparent none","0px","0px","normal");n.appendChild(a),this.elmt=n,Z.mobileDevice?Z.Utils.addEventListener(a,"touchstart",Z.Utils.preventDefault):Z.Utils.addEventListener(a,"mousedown",Z.Utils.preventDefault),Z.Utils.addEventListener(a,"contextmenu",Z.Utils.preventDefault)},z301:function(e,t,n){var r=e.style;r.width=t+"px",r.height=n+"px";var i=e.firstChild,s=i.style;s.width=t+"px",s.height=n+"px"},z202:function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){t?t<0&&(t=Math.max(0,this.length+t)):t=0;for(var n=t,r=this.length;n<r;n++)if(this[n]===e)return n;return-1}),Array.prototype.indexOfObjectValue||(Array.prototype.indexOfObjectValue=function(e,t,n){n?n<0&&(n=Math.max(0,this.length+n)):n=0;for(var r=n,i=this.length;r<i;r++)if(this[r][e]===t)return r;return-1}),Array.prototype.indexOfObjectValueSubstring||(Array.prototype.indexOfObjectValueSubstring=function(e,t,n){n?n<0&&(n=Math.max(0,this.length+n)):n=0;for(var r=n,i=this.length;r<i;r++)if(this[r][e].indexOf(t)!=-1)return r;return-1}),Array.prototype.push||(Array.prototype.push=function(e){this[this.length]=e}),Array.prototype.splice||(Array.prototype.subarr=function(e,t){if(e>=this.length||t&&t<=0)return[];e<0&&(Math.abs(e)>this.length?e=0:e=this.length+e);if(!t||t+e>this.length)t=this.length-e;var n=[];for(var r=e;r<e+t;r++)n.push(this[r]);return n},Array.prototype.subarray=function(e,t){e<0&&(e=0);if(!t||t>this.length)t=this.length;if(e==t)return[];var n=[];for(var r=e;r<t;r++)n.push(this[r]);return n},Array.prototype.splice=function(e,t){t<0&&(t=0);var n=[];if(arguments.length>2)for(var r=2,i=arguments.length;r<i;r++)n.push(arguments[r]);var s=this.subarray(0,e),o=this.subarr(e,t),u=this.subarray(e+t),a=s.concat(n,u);this.length=0;for(var r=0,i=a.length;r<i;r++)this.push(a[r]);return o}),String.prototype.multiply||(String.prototype.multiply=function(){var e=Array.prototype.join,t={};return function(n){return t.length=n+1,e.call(t,this)}}())},z201:function(){document.addEventListener?(this.z260=function(e){e&&(tnS=e.parentNode.style,tnS&&(e.parentNode.unselectable="on",tnS.userSelect="none",tnS.MozUserSelect="none",tnS.webkitUserSelect="none",tnS.webkitTouchCallout="none",tnS.webkitTapHighlightColor="transparent"))},this.renderQuality=function(e,t){if(t){var n=t=="high"?"optimizeQuality":"optimizeSpeed";e.style.setProperty("image-rendering",n,null)}},this.z398=function(e,t,n){Z.alphaSupported?e.style.opacity=t:n&&(e.style.backgroundColor=n)}):document.attachEvent&&(this.z260=function(e){e&&(e.parentNode.unselectable="on",e.parentNode.onselectstart=function(){return!1})},this.renderQuality=function(e,t){if(t){var n=t=="high"?"bicubic":"nearest-neighbor";e.style.msInterpolationMode=n}},this.z398=function(e,t,n){Z.alphaSupported?(t*=100,e.style.zoom=1,e.style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity="+t+")",e.style.filter="alpha(opacity="+t+")",t==100&&(e.style.filter="")):n&&(e.style.backgroundColor=n)})},z200:function(){document.addEventListener?(this.addEventListener=function(e,t,n){t=="mousewheel"&&elmt.addEventListener("DOMMouseScroll",n,!1),e.addEventListener(t,n,!1)},this.removeEventListener=function(e,t,n){t=="mousewheel"&&elmt.addEventListener("DOMMouseScroll",n,!1),e&&e.removeEventListener(t,n,!1)},this.event=function(e){return e},this.target=function(e){return e.target},this.relatedTarget=function(e){return e.relatedTarget},this.z324=function(e){var t=!1;if(e.which==2||e.which==3)t=!0;return t},this.preventDefault=function(e){e.preventDefault()},this.stopPropagation=function(e){e.stopPropagation()}):document.attachEvent&&(this.addEventListener=function(e,t,n){if(this._findListener(e,t,n)!=-1)return;var r=function(){var t=window.event;Function.prototype.call?n.call(e,t):(e._currentListener=n,e._currentListener(t),e._currentListener=null)};e.attachEvent("on"+t,r);var i={target:e,eventName:t,handler:n,handler2:r},s=e.document||e,o=s.parentWindow,u="l"+this._listenerCounter++;o._allListeners||(o._allListeners={}),o._allListeners[u]=i,e._listeners||(e._listeners=[]),e._listeners[e._listeners.length]=u,o._unloadListenerAdded||(o._unloadListenerAdded=!0,o.attachEvent("onunload",this._removeAllListeners))},this.removeEventListener=function(e,t,n){if(e){var r=this._findListener(e,t,n);if(r==-1)return;var i=e.document||e,s=i.parentWindow,o=e._listeners[r],u=s._allListeners[o];e.detachEvent("on"+t,u.handler2),e._listeners.splice(r,1),delete s._allListeners[o]}},this.event=function(e){return window.event},this.target=function(e){return e.srcElement},this.relatedTarget=function(e){var t=null;return e.type=="mouseover"?t=e.fromElement:e.type=="mouseout"&&(t=e.toElement),t},this.z324=function(e){var t=!1;return e.button==2&&(t=!0),t},this.preventDefault=function(e){e&&(e.returnValue=!1)},this.stopPropagation=function(e){e.cancelBubble=!0},this._findListener=function(e,t,n){var r=e._listeners;if(!r)return-1;var i=e.document||e,s=i.parentWindow;for(var o=r.length-1;o>=0;o--){var u=r[o],a=s._allListeners[u];if(a.eventName==t&&a.handler==n)return o}return-1},this._removeAllListeners=function(){var e=this;for(id in e._allListeners){var t=e._allListeners[id];t.target.detachEvent("on"+t.eventName,t.handler2),delete e._allListeners[id]}},this._listenerCounter=0)},z259:function(){Z.browsers={UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5};var e=Z.browsers.UNKNOWN,t=0,n=navigator.appName,r=navigator.appVersion,i=!1,s=!1,o=navigator.userAgent.toLowerCase();if(n!="Microsoft Internet Explorer"||!window.attachEvent||!window.ActiveXObject)if(n!="Netscape"||!window.addEventListener)n=="Opera"&&!!window.opera&&!!window.attachEvent&&(e=Z.browsers.OPERA,t=parseFloat(r));else{var u=o.indexOf("firefox"),a=o.indexOf("safari"),f=o.indexOf("chrome");if(u>=0)e=Z.browsers.FIREFOX,t=parseFloat(o.substring(u+8));else if(a>=0){var l=o.substring(0,a).lastIndexOf("/");e=f>=0?Z.browsers.CHROME:Z.browsers.SAFARI,t=parseFloat(o.substring(l+1,a))}var c=new Image;c.style.getPropertyValue&&(s=c.style.getPropertyValue("image-rendering"))}else{var h=o.indexOf("msie");e=Z.browsers.IE,t=parseFloat(o.substring(h+5,o.indexOf(";",h))),i=typeof document.documentMode!="undefined"}var p=document.documentElement||{},d=p.style||{},v=!1,m=["transform","WebkitTransform","MozTransform"],g,y;while(g=m.shift())if(typeof d[g]!="undefined"){v=!0,y=/webkit/i.test(g);break}var b=document.createElement("canvas").getContext&&document.createElement("canvas").getContext("2d"),w=!(e==Z.browsers.SAFARI&&t<4||e==Z.browsers.CHROME&&t<2),E=b&&w,S=!(e==Z.browsers.CHROME&&t<2),x=i||s?"high":null,T=o.indexOf("android")>-1||o.indexOf("iphone")>-1||o.indexOf("ipad")>-1||o.indexOf("ipod")>-1;Z.browser=e,Z.browserVersion=t,Z.z223=E,Z.useCanvas=Z.z223,Z.cssTransformsSupported=v,Z.cssTransformProperty=g,Z.cssTransformNoUnits=y,Z.alphaSupported=S,Z.renderQuality=x,Z.mobileDevice=T},isStrVal:function(e){return e!=null&&e!=""&&e!="null"},z282:function(){var e=new Date,t=(e.getUTCMonth()+1<10?"0":"")+(e.getUTCMonth()+1),n=(e.getUTCDate()<10?"0":"")+e.getUTCDate(),r=(e.getUTCHours()<10?"0":"")+e.getUTCHours(),i=(e.getUTCMinutes()<10?"0":"")+e.getUTCMinutes(),s=(e.getUTCSeconds()<10?"0":"")+e.getUTCSeconds();return e.getUTCFullYear()+t+n+r+i+s},getElementPosition:function(e){var t=0,n=0,r=this.getElementStyle(e).position=="fixed",i=this.getOffsetParent(e,r);while(i){t+=e.offsetLeft,n+=e.offsetTop;if(r){var s=this.getPageScroll();t+=s.x,n+=s.y}e=i,r=this.getElementStyle(e).position=="fixed",i=this.getOffsetParent(e,r)}return new this.Point(t,n)},getOffsetParent:function(e,t){return t&&e!=document.body?document.body:e.offsetParent},getElementSize:function(e){return new this.Point(e.clientWidth,e.clientHeight)},getElementStyle:function(e){if(e.currentStyle)return e.currentStyle;if(window.getComputedStyle)return window.getComputedStyle(e,"");this.z405(this.z285("z162"))},getElementStyleProperty:function(e,t){if(e.currentStyle)return e.currentStyle[t];if(window.getComputedStyle)return document.defaultView.getComputedStyle(e,null).getPropertyValue(t);this.z405(this.z285("z162"))},getEventTargetCoords:function(e){return getElementPosition(Z.Utils.target(e))},getFirstTouch:function(e){var t=null,n=e.touches,r=e.changedTouches;return n!==undefined?t=n[0]:r!==undefined&&(t=r[0]),t},getMousePosition:function(e){var t=0,n=0;return e.type=="DOMMouseScroll"&&browser==Browser.FIREFOX&&browserVersion<3?(t=e.screenX,n=e.screenY):typeof e.pageX=="number"?(t=e.pageX,n=e.pageY):typeof e.clientX=="number"?(t=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,n=e.clientY+document.body.scrollTop+document.documentElement.scrollTop):this.z405(this.z285("z163")),new this.Point(t,n)},getMouseScroll:function(e){var t=0;return typeof e.wheelDelta=="number"?t=e.wheelDelta:typeof e.detail=="number"?t=e.detail*-1:this.z405(this.z285("z164")),t?t/Math.abs(t):0},getPageScroll:function(){var e=0,t=0,n=document.documentElement||{},r=document.body||{};if(typeof window.pageXOffset=="number")e=window.pageXOffset,t=window.pageYOffset;else if(r.scrollLeft||r.scrollTop)e=r.scrollLeft,t=r.scrollTop;else if(n.scrollLeft||n.scrollTop)e=n.scrollLeft,t=n.scrollTop;return new this.Point(e,t)},getWindowSize:function(){var e=0,t=0,n=document.documentElement||{},r=document.body||{};return typeof window.innerWidth=="number"?(e=window.innerWidth,t=window.innerHeight):n.clientWidth||n.clientHeight?(e=n.clientWidth,t=n.clientHeight):r.clientWidth||r.clientHeight?(e=r.clientWidth,t=r.clientHeight):this.z405(this.z285("z165")),new this.Point(e,t)},z353:function(e){var t=!1,n=e;while(t==0){if(!n)break;n.id?n.id=="ViewerDisplay"?t=!0:n=n.parentNode:n=n.parentNode}return t},z384:function(e){var t=e+"=",n=document.cookie.split(";");for(var r=0;r<n.length;r++){var i=n[r];while(i.charAt(0)==" ")i=i.substring(1,i.length);if(i.indexOf(t)==0)return i.substring(t.length,i.length)}return null},z392:function(e){var t=e.slice(-1,e.length)=="/"?e.slice(0,e.length-1):e;return t},z215:function(e){return e+="?noCacheSfx="+(new Date).getTime().toString(),e},z274:function(e,t,n,r){var i=t-e;return(n/=r/2)<1?i/2*n*n*n*n*n+e:i/2*((n-=2)*n*n*n*n+2)+e},z368:function(e){var t;return e&&(t=e.split("&")),t},z399:function(e){var t=this.z285("z100"),n=this.z285("z99"),r=this.z285("z98"),i=this.z285("z103"),s=this.z285("z102"),o=this.z285("z101"),u=i!=s?!0:!1,a=this.z285("z33"),f=this.z285("z32"),l=this.z285("z31"),c=a!=f?!0:!1;Z.skinPath=this.z285("z112"),Z.skinMode=this.z285("z110"),isNaN(parseFloat(this.z285("z74")))||(Z.initialX=parseFloat(this.z285("z74"))),isNaN(parseFloat(this.z285("z75")))||(Z.initialY=parseFloat(this.z285("z75"))),isNaN(parseFloat(this.z285("z76")))||(Z.initialZ=parseFloat(this.z285("z76"))),isNaN(parseFloat(this.z285("z83")))||(Z.minZ=parseFloat(this.z285("z83"))),isNaN(parseFloat(this.z285("z81")))||(Z.maxZ=parseFloat(this.z285("z81"))),isNaN(parseFloat(this.z285("z133")))||(Z.zoomSpeed=parseFloat(this.z285("z133"))),isNaN(parseFloat(this.z285("z96")))||(Z.panSpeed=parseFloat(this.z285("z96"))),isNaN(parseFloat(this.z285("z53")))||(Z.fadeInSpeed=parseFloat(this.z285("z53"))),Z.toolbarVisible=parseInt(this.z285("z119"),10),Z.toolbarPosition=parseFloat(this.z285("z118")),Z.tooltipsVisible=this.z285("z120")!="0",Z.navigatorVisible=parseInt(this.z285("z93"),10),Z.navigatorW=parseInt(this.z285("z94"),10),Z.navigatorH=parseInt(this.z285("z89"),10),Z.navigatorL=parseInt(this.z285("z90"),10),Z.navigatorT=parseInt(this.z285("z92"),10),Z.navigatorFit=this.z285("z88"),Z.clickZoom=this.z285("DEFAULT_CLICKZOOM")!="0",Z.clickPan=this.z285("z42")!="0",Z.mousePan=this.z285("z84")!="0",Z.keys=this.z285("z77")!="0",Z.constrainPan=this.z285("z44")!="0",Z.sliderVisible=this.z285("z114")!="0",Z.fullPageVisible=this.z285("z62")!="0",Z.fullPageInitial=this.z285("z60IAL")!="0",Z.progressVisible=this.z285("z109")!="0",Z.logoVisible=this.z285("z79")!="0",Z.logoCustomPath=this.z285("z78"),Z.canvas=this.z285("z41")!="0",Z.debug=parseInt(this.z285("z52"),10);if(this.isStrVal(e))for(var h=0,p=e.length;h<p;h++){var d=e[h],v=d.indexOf("=");if(v>0){var m=d.substring(0,v),g=d.substring(v+1);if(this.isStrVal(g))switch(m){case"zInitialX":isNaN(parseFloat(g))||(Z.initialX=parseFloat(g));break;case"zInitialY":isNaN(parseFloat(g))||(Z.initialY=parseFloat(g));break;case"zInitialZoom":isNaN(parseFloat(g))||(Z.initialZ=parseFloat(g),Z.initialZ&&(Z.initialZ/=100));break;case"zMinZoom":!isNaN(parseFloat(g))&&parseFloat(g)>.01&&(Z.minZ=parseFloat(g),Z.minZ&&(Z.minZ/=100));break;case"zMaxZoom":isNaN(parseFloat(g))||(Z.maxZ=parseFloat(g),Z.maxZ&&(Z.maxZ/=100));break;case"zNavigatorVisible":Z.navigatorVisible=parseInt(g,10);break;case"zToolbarVisible":Z.toolbarVisible=parseInt(g,10);break;case"zLogoVisible":g=="0"&&(Z.logoVisible=!1);break;case"zSliderVisible":g=="0"&&(Z.sliderVisible=!1);break;case"zFullPageVisible":g=="0"&&(Z.fullPageVisible=!1);break;case"zFullPageInitial":g=="1"&&(Z.fullPageInitial=!0);break;case"zProgressVisible":g=="0"&&(Z.progressVisible=!1);break;case"zTooltipsVisible":g=="0"&&(Z.tooltipsVisible=!1);break;case"zSkinPath":Z.skinPath=g;break;default:if(t==n)alert(r+" "+m);else switch(m){case"zZoomSpeed":Z.zoomSpeed=parseInt(g,10);break;case"zPanSpeed":Z.panSpeed=parseInt(g,10);break;case"zFadeInSpeed":Z.fadeInSpeed=parseInt(g,10);break;case"zToolbarPosition":Z.toolbarPosition=parseInt(g,10);break;case"zNavigatorWidth":isNaN(parseFloat(g))||(Z.navigatorW=parseFloat(g));break;case"zNavigatorHeight":isNaN(parseFloat(g))||(Z.navigatorH=parseFloat(g));break;case"zNavigatorLeft":isNaN(parseFloat(g))||(Z.navigatorL=parseFloat(g));break;case"zNavigatorTop":isNaN(parseFloat(g))||(Z.navigatorT=parseFloat(g));break;case"zNavigatorFit":isNaN(parseFloat(g))||(Z.navigatorFit=parseInt(g,10));break;case"zClickZoom":g=="0"&&(Z.clickZoom=!1);break;case"zClickPan":g=="0"&&(Z.clickPan=!1);break;case"zMousePan":g=="0"&&(Z.mousePan=!1);break;case"zKeys":g=="0"&&(Z.keys=!1);break;case"zConstrainPan":g=="0"&&(Z.constrainPan=!1);break;case"zWatermarkPath":Z.watermarkPath=g;break;case"zCopyrightPath":Z.z245=g;break;case"zHotspotPath":Z.hotspotPath=g;break;case"zHotspotListTitle":Z.hotspotListTitle=g;break;case"zAnnotationPath":Z.annotationPath=g;break;case"zLogoCustomPath":Z.logoCustomPath=g;break;case"zCanvas":g=="0"&&(Z.canvas=!1);if(!Z.z223||!Z.canvas)Z.useCanvas=!1;break;case"zDebug":Z.debug=parseInt(g,10);break;case"zImageProperties":Z.imageProperties=g;break;case"zServerIP":Z.serverIP=g;break;case"zServerPort":Z.serverPort=g;break;case"zTileHandlerPath":Z.tileHandlerPath=g;break;case"zEditMode":Z.editMode=g;break;case"zSaveHandlerPath":Z.saveHandlerPath=g}}}}if(!Z.Utils.isStrVal(Z.tileHandlerPath))Z.tileSource="ZoomifyImageFolder";else if(Z.imagePath.toLowerCase().indexOf(".pff")!=-1)if(u){Z.tileSource="ZoomifyImageFile";var y=Z.tileHandlerPath;Z.tileHandlerPathFull=y}else alert(o);else Z.tileSource="OtherTileSource";if(Z.Utils.isStrVal(Z.annotationPath)||Z.Utils.isStrVal(Z.saveHandlerPath))if(c){if(Z.Utils.isStrVal(Z.saveHandlerPath)){var b=Z.saveHandlerPath;Z.saveHandlerPath=b}}else Z.annotationPath="",alert(l)},z391:function(e){for(var t=1;t<e.length;)e[t-1]==e[t]?e.splice(t,1):t++;return e},intersect:function(e,t){var n=[];for(var r=0;r<e.length;r++){var i=e[r],s=!1;for(var o=0;o<t.length&&i>=(elmt2=t[o]);o++)if(elmt2==i){s=!0;break}s&&n.push(e[r])}return n},subtract:function(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=!1;for(var s=0;s<t.length&&r>=(elmt2=t[s]);s++)if(elmt2==r){i=!0;break}i&&e.splice(n--,1)}return e},clone:function(e,t,n){n=[];switch(e){case"hotspots":for(var r=0,i=t.length;r<i;r++){polygonPtsTemp=[];var s=t[r].polygonPts;if(t[r].polygonPts!==null)for(var o=0,u=s.length;o<u;o++)polygonPtsTemp.push({x:s[o].x,y:s[o].y});n.push({id:t[r].id,internalID:t[r].internalID,name:t[r].name,media:t[r].media,mediaType:t[r].mediaType,image:t[r].image,iW:t[r].iW,iH:t[r].iH,x:t[r].x,y:t[r].y,zoom:t[r].zoom,xScale:t[r].xScale,yScale:t[r].yScale,url:t[r].url,urlTarget:t[r].urlTarget,visibility:t[r].visibility,rollover:t[r].rollover,caption:t[r].caption,tooltip:t[r].tooltip,textColor:t[r].textColor,backColor:t[r].backColor,lineColor:t[r].lineColor,fillColor:t[r].fillColor,textVisible:t[r].textVisible,backVisible:t[r].backVisible,lineVisible:t[r].lineVisible,fillVisible:t[r].fillVisible,captionPosition:t[r].captionPosition,saved:t[r].saved,polygonPts:polygonPtsTemp})}break;case"pois":for(var r=0,i=t.length;r<i;r++)n.push({text:t[r].text,value:t[r].value,x:t[r].x,y:t[r].y,zoom:t[r].zoom});break;case"notes":for(var r=0,i=t.length;r<i;r++)n.push({text:t[r].text,value:t[r].value,noteText:t[r].noteText,poiID:t[r].poiID});break;case"labels":for(var r=0,i=t.length;r<i;r++)n.push({text:t[r].text,value:t[r].value,poiID:t[r].poiID})}return n},calculatePointsDistance:function(e,t,n,r){return Math.sqrt((e-=n)*e+(t-=r)*t)},getDimensionsFromPolygonPoints:function(e){var t=e[0].x,n=e[0].y,r=e[0].x,i=e[0].y;for(var s=1,o=e.length;s<o;s++)e[s].x<t&&(t=e[s].x),e[s].x>r&&(r=e[s].x),e[s].y<n&&(n=e[s].y),e[s].y>i&&(i=e[s].y);var u=r-t,a=i-n;return new Z.Utils.Point(u,a)},getCenterOfPolygonPoints:function(e){var t=e[0].x,n=e[0].y,r=e[0].x,i=e[0].y;for(var s=1,o=e.length;s<o;s++)t=Math.min(t,e[s].x),n=Math.min(n,e[s].y),r=Math.max(r,e[s].x),i=Math.max(i,e[s].y);var u=t+(r-t)/2,a=n+(i-n)/2;return new Z.Utils.Point(u,a)},createCallback:function(e,t){var n=[];for(var r=2,i=arguments.length;r<i;r++)n.push(arguments[r]);return function(){var r=n.concat([]);for(var i=0,s=arguments.length;i<s;i++)r.push(arguments[i]);return t.apply(e,r)}},z248:function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){var m=document.createElement(e);this.isStrVal(t)&&(m.id=t);var g=m.style;return g.display=this.isStrVal(n)?n:"inline-block",g.position=this.isStrVal(r)?r:"static",g.overflow=this.isStrVal(i)?i:"hidden",e=="canvas"?(this.isStrVal(s)&&m.setAttribute("width",s),this.isStrVal(o)&&m.setAttribute("height",o)):(this.isStrVal(s)&&(g.width=s),this.isStrVal(o&&o)&&(g.height=o)),this.isStrVal(u)&&(g.left=u),this.isStrVal(a)&&(g.top=a),g.borderStyle=this.isStrVal(f)?f:"none",g.borderWidth=this.isStrVal(l)?l:"0px",g.borderColor="#696969",g.background=this.isStrVal(c)?c:"transparent none",g.margin=this.isStrVal(h)?h:"0px",g.padding=this.isStrVal(p)?p:"0px",g.whiteSpace=this.isStrVal(d)?d:"normal",this.isStrVal(v)&&(g.cursor=v),m},z247:function(e){var t=this.z248("div"),n=[];n.push('<div style="display:table; height:100%; width:100%;'),n.push("border:none; margin:0px; padding:0px;"),n.push('#position:relative; overflow:hidden; text-align:left;">'),n.push('<div style="#position:absolute; #top:50%; width:100%; '),n.push("border:none; margin:0px; padding:0px;"),n.push('display:table-cell; vertical-align:middle;">'),n.push('<div style="#position:relative; #top:-50%; width:100%; '),n.push("border:none; margin:0px; padding:0px;"),n.push('text-align:center;"></div></div></div>'),t.innerHTML=n.join(""),t=t.firstChild;var r=t,i=t.getElementsByTagName("div");while(i.length>0)r=i[0],i=r.getElementsByTagName("div");return r.appendChild(e),t},z250:function(e){var t=this.z248("img"),n=null;return Z.browser==Z.browsers.IE&&Z.browserVersion<7?(n=this.z248("span",null,"inline-block"),t.onload=function(){n.style.width=n.style.width||t.width+"px",n.style.height=n.style.height||t.height+"px",t.onload=null,t=null},n.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e+"', sizingMethod='scale')"):(n=t,n.src=e),n},z254:function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){var d=Z.Utils.z248("div","textBoxFor"+e,"inline-block","absolute","hidden",n,r,i,s,u,a,"white","0px",o,"normal"),v=document.createElement("textarea");d.appendChild(v);var m=v,g=m.style;return m.id=e,m.value=t,m.readOnly=l,m.overflowY=f,g.width="100%",g.height="100%",g.margin="0",g.border="0",g.fontFamily=c,g.fontSize=h,g.resize=p,d},z253:function(e,t,n,r,i,s,o,u){sList=document.createElement("select"),sList.id=e,Z.Utils.isStrVal(t)&&(sList.options[0]=new Option(t,null));for(var a=0,f=n.length;a<f;a++)sList.options[sList.options.length]=new Option(n[a].text,n[a].value);return sList.onchange=u,sList.style.width=r+"px",sList.style.position="absolute",sList.style.left=i+"px",sList.style.top=s+"px",sList.style.visibility=o,sList},z428:function(e,t){if(e){e.innerHTML="";for(var n=0,r=t.length;n<r;n++)e.options[e.options.length]=new Option(t[n].text,t[n].value)}},z401:function(e,t,n,r,i,s,o,u,a,f,l,c){var h=e.parentNode.style;h.color=t,h.fontFamily=n,h.fontSize=r,h.fontSizeAdjust=i,h.fontStyle=s,h.fontStretch=o,h.fontVariant=u,h.fontWeight=a,h.lineHeight=f,h.textAlign=l,h.textDecoration=c},z241:function(e){var t=null;if(window.ActiveXObject)try{t=new ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(e)}catch(n){this.z405(n.name+this.z285("z139")+n.message)}else if(window.DOMParser)try{var r=new DOMParser;t=r.parseFromString(e,"text/xml")}catch(n){this.z405(n.name+this.z285("z139")+n.message)}else this.z405(this.z285("z168"));return t},z240:function(e){var t=null;if(window.ActiveXObject)try{t=e.xml}catch(n){this.z405(n.name+this.z285("z138")+n.message)}else if(window.DOMParser)try{t=(new XMLSerializer).serializeToString(e)}catch(n){this.z405(n.name+this.z285("z138")+n.message)}else this.z405(this.z285("z168"));return t},Point:function(e,t){this.x=typeof e=="number"?e:0,this.y=typeof t=="number"?t:0},Point3D:function(e,t,n){this.x=typeof e=="number"?e:0,this.y=typeof t=="number"?t:0,this.z=typeof n=="number"?n:0},z285:function(e){var t="";switch(e){case"z100":t="Enable Developer parameters";break;case"z99":t="Changing This Violates License Agreement";break;case"z98":t="Support for this parameter is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Developer edition: ";break;case"z103":t="Changing this violates License Agreement";break;case"z102":t="Changing this violates License Agreement";break;case"z101":t="Support for PFF single file storage is enabled only in the Zoomify Image Viewer included in the Zoomify Enterprise products.";break;case"z33":t="Changing this violates License Agreement";break;case"z32":t="Changing this violates License Agreement";break;case"z31":t="Support for annotations is enabled only in the Zoomify Image Viewer included in the Zoomify Enterprise products.";break;case"z73":t="200";break;case"z72":t="30000";break;case"z116":t="1.15";break;case"z117":Z.mobileDevice?t="50":t="300";break;case"z40":t="6";break;case"z39":t="3";break;case"z38":t="3";break;case"z37":t="2";break;case"z36":t="0";break;case"z95":Z.mobileDevice?t="1":t="1.5";break;case"z96":t="5";break;case"z97":t="10";break;case"z133":t="5";break;case"z134":t="0.02";break;case"z135":t="30";break;case"z136":t="20";break;case"z137":t="800";break;case"z43":t="0.2";break;case"z63":t="10";break;case"z53":t="5";break;case"z54":t="0.067";break;case"z119":t="4";break;case"z118":t="1";break;case"z120":t="1";break;case"z93":t="2";break;case"z94":t="150";break;case"z89":t="100";break;case"z90":t="0";break;case"z92":t="0";break;case"z88":t=null;break;case"z86":t="#ffffff";break;case"z86NOALPHA":t="#fbfafa";break;case"z85":t="0.75";break;case"z25":t="#ffffff";break;case"z25NOALPHA":t="#fbfafa";break;case"z24":t="0.75";break;case"z91":t="blue";break;case"z111":t="skinFiles.xml";break;case"z112":t="Assets/Skins/Default";break;case"z110":t="0";break;case"z44":t="1";break;case"z114":t="1";break;case"z113":t="10";break;case"z62":t="1";break;case"z60IAL":t="0";break;case"z59":t="white";break;case"z58":t="X";break;case"z57":t="	#F8F8F8";break;case"z109":t="1";break;case"z107":t="500";break;case"z108":t=" ";break;case"z79":t="1";break;case"z78":t=null;break;case"z41":t="1";break;case"z52":t="0";break;case"DEFAULT_MESSAGESCREENCOLOR":t="lightgray";break;case"DEFAULT_MESSAGEBUTTONCOLOR":t="white";break;case"DEFAULT_MESSAGEOKBUTTONTEXT":t="OK";break;case"DEFAULT_MESSAGECANCELBUTTONTEXT":t="Cancel";break;case"z51":t="lightgray";break;case"z49":t="white";break;case"z48":t="Agree";break;case"z50":t="Exit";break;case"z128":t="0.6";break;case"z129":t="0.33";break;case"z131":t="512";break;case"z130":t="384";break;case"z71":t="hotspots.xml";break;case"z65":t="6";break;case"DEFAULT_MINHOTSPOTCAPTIONPADDING":t="2";break;case"DEFAULT_MAXHOTSPOTCAPTIONPADDING":t="7";break;case"z64":t="14";break;case"z82":t="3";break;case"z80":t="14";break;case"z56":t="1.8";break;case"z70":t=!0;break;case"z105":t=1;break;case"z45":t="1";break;case"z47":t="#ffffff";break;case"z55":t="#ffffff";break;case"z115":t="#999999";break;case"z46":t="10";break;case"z68":t="Hotspots";break;case"z67":t="NAME";break;case"z69":t="200";break;case"z66":t="2";break;case"z34":t="annotations.xml";break;case"DEFAULT_ANNOTATIONSXMLSAVEHANDLERNAME1":t="save";break;case"z35":t="upload";break;case"z30":t=!0;break;case"z29":t="220";break;case"z27":t="200";break;case"z19":t="160";break;case"z23":t="189";break;case"z21":t="88";break;case"z22":t="6";break;case"z20":t="11";break;case"DEFAULT_ANNOTATIONNOTEVISIBILITY":t=!0;break;case"z28":t="11";break;case"z74":t=null;break;case"z75":t=null;break;case"z76":t=null;break;case"z83":t=null;break;case"z81":t="1";break;case"DEFAULT_CLICKZOOM":t="1";break;case"z42":t="1";break;case"z84":t="1";break;case"z77":t="1";break;case"z122":t="This panel is enabled using the HTML parameter 'zDebug=1' (basic) or 'zDebug=2' (adds tile tracing). It can be called in JavaScript as follows:\n\n   Z.Utils.trace('value to display');  \n\nThe buttons below display or modify important state values.  Web designers new to JavaScript will also benefit from the console, trace, profiling, and other debugging features of leading browsers.";break;case"z123":t="lightgray";break;case"z121":t="white";break;case"z124":t="Show Globals";break;case"z127":t="Toggle Display";break;case"z125":t="Toggle Backfill";break;case"z126":t="Toggle Constrain Pan";break;case"z3":t="Displaying or editing polygon hotspots requires a browser that supports the HTML5 canvas feature.";break;case"z2":t="Cancelling all unsaved edits.";break;case"z6":t="Saving unsaved edits.";break;case"z1":t="XML save complete.";break;case"z4":t="SAVEDISABLEDFORDEMO";break;case"z5":t="Edits to this demo are saved only for the duration of the browser session.";break;case"z169":t="Browser does not support XMLHttpRequest.";break;case"z148-IMAGEXML":t="Error loading image: please make sure image path in web page matches image folder location on webserver.";break;case"z148-IMAGEHEADER":t="Error loading image: image header request invalid.";break;case"z148-IMAGEOFFSET":t="Error loading image: image offset request invalid.";break;case"z148-TOOLBARXML":t="Error loading toolbar - skin files not found: please verify that the folders 'Assets/Skins/Default' are in same folder as the web page displaying the Viewer, or add zSkinPath parameter to web page.";break;case"z148-HOTSPOTSXML":t="Error loading hotspots: please make sure hotspot path in web page matches hotspot folder location on webserver.";break;case"z148-ANNOTATIONSXML":t="Error loading annotations: please make sure annotation path in web page matches annotation folder location on webserver.";break;case"z148-ANNOTATIONSSAVEHANDLER":t="Error saving annotations: please make sure save handler path in web page matches save handler file location on webserver.";break;case"z148":t="Error making network request: possible invalid path or network error.";break;case"z143":t="Image failed to load: possible invalid path, missing image, or network error.";break;case"z161":t="Sorry!  Part of this view isn't refreshing.  The network may be slow, or the website might be missing a file:  ";break;case"z142":t="Hotspot media failed to load: possible invalid path, missing file, or legacy hotspot media such as library clip of Flash-based viewer.";break;case"z141":t="Media of one or more hotspots unsupported: hotspot media of type 'symbol' depend on internal Library of Flash-based viewers.";break;case"z171":t="Annotations cannot be saved: missing or incorrect save handler path parameter, or missing file on server.";break;case"z157":t="Error related to network security: ";break;case"z158":t="Error related to network status: ";break;case"z139":t=" converting XML text to XML doc (DOMParser): ";break;case"z138":t=" converting XML doc to XML text (DOMParser): ";break;case"z168":t="Browser does not support XML DOM.";break;case"z167":t="XML Doc invalid.";break;case"z170":t="XML invalid.";break;case"z147":t="Image XML invalid.";break;case"z144":t="Image properties parameter invalid.";break;case"z146":t="Image tile count does not match value in image XML. If the count is invalid display problems can result.";break;case"z140":t=" while executing callback: ";break;case"z145":t="Image timed out: ";break;case"z156":t="Navigator image failed to load: possible invalid path, missing image, or network error.";break;case"z159":t="Skin XML invalid.";break;case"z160":t="The skin XML file has one or more faulty name lines.";break;case"z166":t="Watermark image failed to load: ";break;case"z162":t="Unknown element style - no known method to identify.";break;case"z163":t="Unknown mouse position - no known method to calculate.";break;case"z164":t="Unknown mouse scroll - no known method to calculate.";break;case"z165":t="Unknown window size - no known method to calculate.";break;case"z181":t="Launch Zoomify Website";break;case"z182":t="Minimize Toolbar";break;case"z180":t="Expand Toolbar";break;case"z196":t="Zoom Out";break;case"z189":t="Zoom In And Out";break;case"z195":t="Zoom In";break;case"z184":t="Pan Left";break;case"z186":t="Pan Up";break;case"z183":t="Pan Down";break;case"z185":t="Pan Right";break;case"z187":t="Reset Initial View";break;case"z194":t="Toggle Full Page View";break;case"z174":t="Cancel Full Page View";break;case"z193":t="Toggle Label Editing";break;case"z178":t="Delete Label Selected in Choicelist";break;case"z177":t="Cancel Edits To Current Label";break;case"z179":t="Save All Label Edits";break;case"TIP_MESSAGEOK":t="Accept and close message";break;case"TIP_MESSAGECANCEL":t="Decline and close message";break;case"z175":t="Agree to copyright and view images";break;case"z176":t="Exit and do not view images";break;case"z188":t="Toggle Full Page View";break;case"z192":t="Toggle Viewport Display";break;case"z190":t="Toggle Viewport Backfill";break;case"z191":t="Toggle Constrain Pan";break;case"z199":t="POI";break;case"z198":t="Note";break;case"z197":t="Label";break;case"z18":t="Anonymous";break;case"z16":t="Unnamed Point Of Interest";break;case"z17":t=this.z285("z18");break;case"z13":t="Unnamed Note";break;case"z14":t="Note text";break;case"z15":t=this.z285("z18");break;case"z11":t="Unnamed Label";break;case"z12":t=this.z285("z18");break;case"z9":t="List creation in progress...";break;case"z10":t="Note loading in progress...";break;case"CONTENT_ANNOTATIONSCAPTIONTEXTCOLOR":t="#000000";break;case"CONTENT_ANNOTATIONSCAPTIONBACKCOLOR":t="#ffffff";break;case"CONTENT_ANNOTATIONSCAPTIONBACKVISIBLE":t="1";break;case"CONTENT_ANNOTATIONSCAPTIONPOSITION":t="8";break;case"CONTENT_POLYGONLINECOLOR":t="#ffff00";break;case"CONTENT_POLYGONFILLCOLOR":t="#ffffff";break;case"CONTENT_POLYGONLINEVISIBLE":t="1";break;case"CONTENT_POLYGONFILLVISIBLE":t="1";break;default:t="Unexpected resource request"}return t},z404:function(){var e="";e+="\n",e+="                            ZOOMIFY IMAGE VIEWER - CURRENT VALUES\n",e+="\n",e+="IMAGE & SKIN:    ",e+="Z.imagePath="+Z.imagePath+",   ",e+="Z.skinPath="+Z.skinPath+",   ",e+="Z.skinMode="+Z.skinMode+",   ",e+="Z.imageW="+Z.imageW+",   ",e+="Z.imageH="+Z.imageH+",   ",e+="tierCount="+Z.Viewport.z286()+",   ",e+="TILE_SIZE="+Z.Viewport.z294()+"\n",e+="\n",e+="PAGE & BROWSER:    ",e+="Z.pageContainer="+Z.pageContainer+",   ",e+="Z.browser="+Z.browser+",   ",e+="Z.browserVersion="+Z.browserVersion+",   ",e+="Z.z223="+Z.z223+",   ",e+="Z.cssTransformsSupported="+Z.cssTransformsSupported+",   ",e+="Z.cssTransformProperty="+Z.cssTransformProperty+",   ",e+="Z.cssTransformNoUnits="+Z.cssTransformNoUnits+",   ",e+="Z.alphaSupported="+Z.alphaSupported+",   ",e+="Z.renderQuality="+Z.renderQuality+",   ",e+="Z.mobileDevice="+Z.mobileDevice+"\n",e+="\n",e+="VIEWER OPTIONS & DEFAULTS:    ",e+="Z.initialX="+Z.initialX+",   ",e+="Z.initialY="+Z.initialY+",   ",e+="Z.initialZ="+Z.initialZ+",   ",e+="Z.minZ="+Z.minZ+",   ",e+="Z.maxZ="+Z.maxZ+",   ",e+="Z.fitZ="+Z.fitZ+",   ",e+="Z.zoomSpeed="+Z.zoomSpeed+",   ",e+="Z.panSpeed="+Z.panSpeed+",   ",e+="Z.fadeInSpeed="+Z.fadeInSpeed+",   ",e+="Z.toolbarVisible="+Z.toolbarVisible+",   ",e+="Z.toolbarW="+Z.toolbarW+",   ",e+="Z.toolbarCurrentW="+Z.toolbarCurrentW+",   ",e+="Z.toolbarH="+Z.toolbarH+",   ",e+="Z.toolbarPosition="+Z.toolbarPosition+",   ",e+="Z.tooltipsVisible="+Z.tooltipsVisible+",   ",e+="Z.navigatorVisible="+Z.navigatorVisible+",   ",e+="Z.navigatorW="+Z.navigatorW+",   ",e+="Z.navigatorH="+Z.navigatorH+",   ",e+="Z.navigatorL="+Z.navigatorL+",   ",e+="Z.navigatorT="+Z.navigatorT+",   ",e+="Z.navigatorFit="+Z.navigatorFit+",   ",e+="Z.clickZoom="+Z.clickZoom+",   ",e+="Z.clickPan="+Z.clickPan+",   ",e+="Z.mousePan="+Z.mousePan+",   ",e+="Z.keys="+Z.keys+",   ",e+="Z.constrainPan="+Z.constrainPan+",   ",e+="Watermark alpha = "+Z.Utils.z285("z128")+",   ",e+="Z.watermarkPath="+Z.watermarkPath+",   ",e+="Z.z245="+Z.z245+",   ",e+="Z.hotspotPath="+Z.hotspotPath+",   ",e+="Z.annotationPath="+Z.annotationPath+",   ",e+="Z.saveHandlerPath="+Z.saveHandlerPath+",   ",e+="Z.sliderVisible="+Z.sliderVisible+",   ",e+="Z.fullPageVisible="+Z.fullPageVisible+",   ",e+="Z.fullPageInitial="+Z.fullPageInitial+",   ",e+="Z.progressVisible="+Z.progressVisible+",   ",e+="Z.logoVisible="+Z.logoVisible+",   ",e+="Z.logoCustomPath="+Z.logoCustomPath+",   ",e+="Z.canvas="+Z.canvas+",   ",e+="Z.debug="+Z.debug+",   ",e+="Z.imageProperties="+Z.imageProperties+",   ",e+="Z.serverIP="+Z.serverIP+",   ",e+="Z.serverPort="+Z.serverPort+",   ",e+="Z.tileHandlerPath="+Z.tileHandlerPath+",   ",e+="Z.tileHandlerPathFull="+Z.tileHandlerPathFull+",   ",e+="Z.tileSource="+Z.tileSource+",   ",e+="Z.zEditMode="+Z.zEditMode+"\n",e+="\n",e+="INTERNAL VALUES:    ",e+="\n",e+="displayW="+Z.Viewport.getW()+",   ",e+="displayH="+Z.Viewport.getH()+",   ",e+="tierCurrent="+Z.Viewport.z287()+",   ",e+="tierScale="+Z.Viewport.getTierScale()+",   ",e+="TIERS_MAX_SCALE_UP="+Z.Viewport.z293()+",   ",e+="TIERS_MAX_SCALE_DOWN="+Z.Viewport.z292()+",   ",e+="TILES_MAX_CACHE="+Z.Viewport.z296()+",   ",e+="Z.useCanvas="+Z.useCanvas+"\n",e+="\n",e+="INTERNAL LISTS:    ",e+="tierWs="+Z.Viewport.z291()+",   ",e+="tierHs="+Z.Viewport.z288()+",   ",e+="tierTileCounts="+Z.Viewport.z290()+",   ",e+="tilesLoadingNames="+Z.Viewport.z295()+"\n",e+="\n",alert(e)},z405:function(e){Z.MessageDisplay?(Z.messages&&(Z.messages.value=e),Z.MessageDisplay.style.display="inline-block",typeof Z.MessageDisplay.messageTimer!="undefined"&&Z.MessageDisplay.messageTimer!==null&&window.clearTimeout(Z.MessageDisplay.messageTimer)):Z.Utils.configureMessageDisplay(e),Z.MessageDisplay.messageTimer=window.setTimeout(Z.Utils.hideMessageTimerHandler,2e3)},hideMessage:function(){Z.MessageDisplay.style.display="none"},hideMessageTimerHandler:function(){Z.MessageDisplay.messageTimer&&(window.clearTimeout(Z.MessageDisplay.messageTimer),Z.MessageDisplay.messageTimer=null),Z.Utils.hideMessage()},configureMessageDisplay:function(e){var t=430,n=100,r=Z.viewerW-t-80,i=Z.viewerH-n-80,s=this.z285("DEFAULT_MESSAGESCREENCOLOR"),o=this.z285("DEFAULT_MESSAGEBUTTONCOLOR");Z.MessageDisplay=this.z248("div","MessageDisplay","inline-block","absolute","hidden",t+"px",n+"px",r+"px",i+"px","solid","1px",s,"0px","0px","normal"),Z.ViewerDisplay.appendChild(Z.MessageDisplay);var u=Z.Utils.z254("messageBox",e,t-18+"px",n-40+"px","4px","4px","4px","solid","1px","auto",!0,"verdana","12px","none");Z.MessageDisplay.appendChild(u),Z.messages=document.getElementById("messageBox");var a=56,f=18,l=10,c=5,h=t,p=n-f-c,d;h-=a+l,d=this.z285("DEFAULT_MESSAGEOKBUTTONTEXT");var v=new Z.Utils.Button("buttonOk",d,null,null,null,null,a+"px",f+"px",h+"px",p+"px","mousedown",this.messageOkButtonHandler,"TIP_MESSAGEOK","solid","1px",o,"0px","0px");Z.MessageDisplay.appendChild(v.elmt)},messageOkButtonHandler:function(e){return Z.Utils.hideMessage(),!0},messageCancelButtonHandler:function(e){return Z.Utils.hideMessage(),!1},z407:function(){Z.TraceDisplay?Z.TraceDisplay.style.display="inline-block":Z.Utils.z228()},hideTraces:function(){Z.TraceDisplay.style.display="none"},z228:function(){var e=Z.viewerW/3,t=Z.viewerH/3+45,n=10,r=Z.viewerH/3,i=this.z285("z123");Z.TraceDisplay=this.z248("div","TraceDisplay","inline-block","absolute","hidden",e+"px",t+"px",n+"px",r+"px","solid","1px",i,"0px","10px","normal"),Z.ViewerDisplay.appendChild(Z.TraceDisplay);var s="Trace Values\n",o=Z.Utils.z254("debugTraces",s,e-15+"px",t-60+"px","10px","10px","5px","solid","1px","auto",!0,"verdana","10px","none");Z.TraceDisplay.appendChild(o),Z.traces=document.getElementById("debugTraces");var u=58,a=42,f=20,l=t-a/2-10,c=10,h=this.z285("z121"),p=this.z285("z124"),d=new this.Button("buttonShowGlobals",p,null,null,null,null,u+"px",a+"px",f+"px",l+"px","mousedown",this.z404,"z188","solid","1px",h,"0px","0px");Z.TraceDisplay.appendChild(d.elmt),f+=u+c;var p=this.z285("z127"),v=new this.Button("buttonToggleDisplay",p,null,null,null,null,u+"px",a+"px",f+"px",l+"px","mousedown",Z.Viewport.z426,"z192","solid","1px",h,"0px","0px");Z.TraceDisplay.appendChild(v.elmt),f+=u+c;var p=this.z285("z125"),m=new this.Button("buttonToggleBackfill",p,null,null,null,null,u+"px",a+"px",f+"px",l+"px","mousedown",Z.Viewport.z424,"z190","solid","1px",h,"0px","0px");Z.TraceDisplay.appendChild(m.elmt),f+=u+c,u+=12;var p=this.z285("z126"),g=new this.Button("buttonToggleConstrainPan",p,null,null,null,null,u+"px",a+"px",f+"px",l+"px","mousedown",Z.Viewport.z425,"z191","solid","1px",h,"0px","0px");Z.TraceDisplay.appendChild(g.elmt)},trace:function(e){Z.TraceDisplay||Z.Utils.z228(),Z.traces&&(Z.traces.value+="\n"+e+"\n")},z265:function(e,t,n){var r=Z.Utils.z248("div","viewportCenterLineVertical","inline-block","absolute","visible","1px",n+"px",t/2+"px","0px","solid","1px","transparent none","0px","0px","normal"),i=Z.Utils.z248("div","viewportCenterLineHorizontal","inline-block","absolute","visible",t+"px","1px","0px",n/2+"px","solid","1px","transparent none","0px","0px","normal");e.appendChild(i),e.appendChild(r)}}